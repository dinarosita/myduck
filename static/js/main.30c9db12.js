/*! For license information please see main.30c9db12.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,v=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(v){var i=d(n);i&&i!==v&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),p=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!p||!p[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,v=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case p:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=p,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===p},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===p||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case _:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,Ee=null;function _e(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Te(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ie(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==Se||null!==Ee)&&(De(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(le){Pe=!1}function Re(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Re.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,St,Et,_t,Tt=!1,It=[],Ct=null,Dt=null,Nt=null,At=new Map,Ot=new Map,Pt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void _t(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==Dt&&Vt(Dt)&&(Dt=null),null!==Nt&&Vt(Nt)&&(Nt=null),At.forEach(Ut),Ot.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==Dt&&jt(Dt,e),null!==Nt&&jt(Nt,e),At.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Qt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Wt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Dt=Mt(Dt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Wt=null;function $t(e,t,n,r){if(Wt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function _n(){return En}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(An),Pn=[9,13,27,32],Ln=l&&"CompositionEvent"in window,Rn=null;l&&"documentMode"in document&&(Rn=document.documentMode);var Mn=l&&"TextEvent"in window&&!Rn,Fn=l&&(!Ln||Rn&&8<Rn&&11>=Rn),Vn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Hn=null;function Wn(e){Vr(e,0)}function $n(e){if(H(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Hn=Qn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Gn(t,Hn,e,we(e)),Ae(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==W(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Qr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function _r(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=_r("animationend"),Ir=_r("animationiteration"),Cr=_r("animationstart"),Dr=_r("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Lr=Ar[Pr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Tr:case Ir:case Cr:s=mn;break;case Dr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Oe(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Hr(d))v++;for(d=0,p=h;p;p=Hr(p))d++;for(;0<v-d;)l=Hr(l),v--;for(;0<d-v;)h=Hr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Kn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Ln)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(m=Qr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=en(),Zt=Jt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],Si=-1;function Ei(e){return{current:e}}function _i(e){0>Si||(e.current=xi[Si],xi[Si]=null,Si--)}function Ti(e,t){Si++,xi[Si]=e.current,e.current=t}var Ii={},Ci=Ei(Ii),Di=Ei(!1),Ni=Ii;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){_i(Di),_i(Ci)}function Li(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Di,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=Ci.current,Ti(Ci,e),Ti(Di,Di.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,_i(Di),_i(Ci),Ti(Ci,e)):_i(Di),Ti(Di,n)}var Vi=null,Ui=!1,Bi=!1;function ji(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Hi=[],Wi=0,$i=null,Xi=1,Yi="";function Ji(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function Zi(e,t,n){Hi[Wi++]=Xi,Hi[Wi++]=Yi,Hi[Wi++]=$i,$i=e;var r=Xi;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Xi=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Wi],Hi[Wi]=null,Yi=Hi[--Wi],Hi[Wi]=null,Xi=Hi[--Wi],Hi[Wi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;_i(ma),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function _a(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ds)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(rc(t,e,i,r),Ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(rc(t,e,i,r),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=La(e,i,r))&&(rc(t,e,r,n),Ra(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=_a(a):(i=Oi(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=_a(a):(a=Oi(t)?Ni:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Qa(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Qa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m,f=y}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function y(i,u,s,c){var l=R(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),ia&&Ji(i,y),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===S){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===S?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Rc(o.type,o.key,o.props,null,r.mode,s)).ref=Qa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(R(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Vc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=$a(!0),Ya=$a(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Za),Ti(Za,t)}function io(){_i(Za),_i(eo),_i(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(_i(Za),_i(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function _o(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function Io(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Oo(e,t){var n=po,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Lo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&vo)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Ro(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Da(e,1);null!==t&&rc(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function jo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Qo(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Xo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:_a,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:_a,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:$o,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&vo)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:_a,useCallback:Xo,useContext:_a,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Yo,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:$o,useDeferredValue:function(e){return Jo(Io(),yo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],Io().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:_a,useCallback:Xo,useContext:_a,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Yo,useReducer:No,useRef:Bo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=Io();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Io().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Qs=r),hu(0,t)},n}function pu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,La(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=_o(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Su(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Lc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function _u(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ls,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ls,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ls,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ls,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Oi(n)?Ni:Ci.current;return a=Ai(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=_o(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=_a(c):c=Ai(t,c=Oi(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Di.current||Na?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=_a(s):s=Ai(t,s=Oi(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Di.current||Na?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Na||za(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Du(e,t,n,r,a,i)}function Du(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Pu,Lu,Ru,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Da(e,i),rc(r,e,i,-1))}return yc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Wi++]=Xi,Hi[Wi++]=Yi,Hi[Wi++]=$i,Xi=e.id,Yi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Lc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Lc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&va(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Hu(t),null;case 3:return r=t.stateNode,io(),_i(Di),_i(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Lu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":Q(r),Z(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ru(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(_i(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Rs&&(Rs=3):yc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Pu(e,t),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(_i(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Qu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Qu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qs&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Ye()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),_i(Di),_i(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(_i(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Lu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ru=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){_c(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Yu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_c(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,ds(e,t,n),Yu=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){_c(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){_c(e,e.return,y)}try{rs(5,e,e.return)}catch(y){_c(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){_c(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){_c(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){_c(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){_c(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Ye())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,ys(t,e),Yu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){_c(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==v?(v.return=d,Zu=v):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){_c(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){_c(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){_c(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=Xu;var c=Yu;if(Xu=o,(Yu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?Ss(i):null!==s?(s.return=o,Zu=s):Ss(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Xu=u,Yu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&as(t)}catch(d){_c(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function Ss(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){_c(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){_c(t,i,s)}}var a=t.return;try{as(t)}catch(s){_c(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){_c(t,o,s)}}}catch(s){_c(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,_s=Math.ceil,Ts=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ds=0,Ns=null,As=null,Os=0,Ps=0,Ls=Ei(0),Rs=0,Ms=null,Fs=0,Vs=0,Us=0,Bs=null,js=null,zs=0,qs=1/0,Ks=null,Gs=!1,Qs=null,Hs=null,Ws=!1,$s=null,Xs=0,Ys=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ds)?Ye():-1!==Zs?Zs:Zs=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ds)&&0!==Os?Os&-Os:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Ds)&&e===Ns||(e===Ns&&(0===(2&Ds)&&(Vs|=n),4===Rs&&sc(e,Os)),ic(e,r),1===n&&0===Ds&&0===(1&t.mode)&&(qs=Ye()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Os:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Ds)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ds))throw Error(a(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ds;Ds|=2;var o=pc();for(Ns===e&&Os===t||(Ks=null,qs=Ye()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}wa(),Ts.current=o,Ds=i,null!==As?t=0:(Ns=null,Os=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Ye()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,js,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,js,Ks),t);break}xc(e,js,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_s(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,js,Ks),r);break}xc(e,js,Ks);break;default:throw Error(a(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Us,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ds))throw Error(a(327));Sc();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,js,Ks),ic(e,Ye()),null}function lc(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(qs=Ye()+500,Ui&&zi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&Ds)&&Sc();var t=Ds;Ds|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ds=t))&&zi()}}function hc(){Ps=Ls.current,_i(Ls)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),_i(Di),_i(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:_i(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,As=e=Lc(e.current,null),Os=Ps=t,Rs=0,Ms=null,Us=Vs=Fs=0,js=Bs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function vc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Rs=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Rs&&(Rs=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function yc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Vs)||sc(Ns,Os)}function mc(e,t){var n=Ds;Ds|=2;var r=pc();for(Ns===e&&Os===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(wa(),Ds=n,Ts.current=r,null!==As)throw Error(a(261));return Ns=null,Os=0,Rs}function gc(){for(;null!==As;)bc(As)}function kc(){for(;null!==As&&!$e();)bc(As)}function bc(e){var t=Es(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Is.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ps)))return void(As=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Rs=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Rs&&(Rs=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{Sc()}while(null!==$s);if(0!==(6&Ds))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ds;Ds|=4,Is.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ms(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Xe(),Ds=s,kt=u,Cs.transition=o}else e.current=n;if(Ws&&(Ws=!1,$s=e,Xs=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Qs,Qs=null,e;0!==(1&Xs)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===Js?Ys++:(Ys=0,Js=e):Ys=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function Sc(){if(null!==$s){var e=bt(Xs),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Xs=0,0!==(6&Ds))throw Error(a(331));var i=Ds;for(Ds|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){_c(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ds=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=La(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function _c(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=La(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Os&n)===n&&(4===Rs||3===Rs&&(130023424&Os)===Os&&500>Ye()-zs?dc(e,0):Us|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Da(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case S:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case _:return(e=Oc(12,n,t,2|i)).elementType=_,e.lanes=o,e;case D:return(e=Oc(13,n,t,i)).elementType=D,e.lanes=o,e;case N:return(e=Oc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case A:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ri(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,La(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=La(i,t,o))&&(rc(e,i,o,a),Ra(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,_u(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Du(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Su(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Vu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Di.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Sa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Sa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=_a(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Su(e,t,r,i=ya(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ku(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ga(t,r,i,n),Du(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return _u(e,t,n)}throw Error(a(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[vi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Ye()),0===(6&Ds)&&(qs=Ye()+500,zi()))}break;case 13:fc((function(){var t=Da(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Da(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return kt},_t=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,De=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var v=e[o],p=n[2],y=n[3],m=n[4],g=n[5],k=n[6],b=n[7];u&&(r.push(u),u="");var w=null!=p&&null!=v&&v!==p,x="+"===k||"*"===k,S="?"===k||"*"===k,E=n[2]||l,_=m||g;r.push({name:y||a++,prefix:p||"",delimiter:E,optional:S,repeat:x,partial:w,asterisk:!!b,pattern:_?c(_):b?".*":"[^"+s(E)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var v=s(n.delimiter||"/"),p=o.slice(-v.length)===v;return i||(o=(p?o.slice(0,-v.length):o)+"(?:"+v+"(?=$))?"),o+=a?"$":i&&p?"":"(?="+v+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,v=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case p:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=D(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=D(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!p)if(null!==r(c))p=!0,P(x);else{var t=r(l);null!==t&&L(w,t.startTime-e)}}function x(e,n){p=!1,y&&(y=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!D());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&L(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,_=null,T=-1,I=5,C=-1;function D(){return!(t.unstable_now()-C<I)}function N(){if(null!==_){var e=t.unstable_now();C=e;var n=!0;try{n=_(!0,e)}finally{n?S():(E=!1,_=null)}}else E=!1}if("function"===typeof k)S=function(){k(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=N,S=function(){O.postMessage(null)}}else S=function(){m(N,0)};function P(e){_=e,E||(E=!0,S())}function L(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,L(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,P(x))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return J},SDK_VERSION:function(){return ot},_DEFAULT_ENTRY_NAME:function(){return He},_addComponent:function(){return Ye},_addOrOverwriteComponent:function(){return Je},_apps:function(){return $e},_clearComponents:function(){return nt},_components:function(){return Xe},_getProvider:function(){return et},_registerComponent:function(){return Ze},_removeServiceInstance:function(){return tt},deleteApp:function(){return lt},getApp:function(){return st},getApps:function(){return ct},initializeApp:function(){return ut},onLog:function(){return dt},registerVersion:function(){return ht},setLogLevel:function(){return vt}});var t=n(791),r=n(250);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h={tagline:"Header_tagline__JL7uZ"},d=n(184),v=["Quack quack!","Talk to me!","Quack with me!","Doo doo doo...","Quackers not crackers","Let's brainstorm!","Spill it...","Talking to yourself?","Your newest best friend"];function p(){return(0,d.jsxs)("header",{children:[(0,d.jsx)("h1",{children:"MyDuck"}),(0,d.jsx)("div",{className:h.tagline,children:(e=v,e[Math.floor(Math.random()*e.length)])})]});var e}var y={chatTitle:"ChatTitle_chatTitle__Hxs2s",timestamp:"ChatTitle_timestamp__2W2Vq"};function m(e){var n=(0,t.useContext)(uk),r=(0,t.useContext)(sk),i=n.find((function(e){return e.id===r}));return(0,d.jsxs)("div",{className:y.chatTitle,children:[(0,d.jsx)("h2",{children:i.title?i.title:"Untitled Quacks"}),(0,d.jsxs)("div",{className:y.timestamp,children:["Created: ",function(e){var t=new Date(1e3*e.seconds).toDateString(),n=new Date(1e3*e.seconds).toLocaleTimeString();return"".concat(t," at ").concat(n)}(i.createdAt)]})]})}var g={messages:"Messages_messages__BoP0z",messageBubble:"Messages_messageBubble__TwHb6"},k=["This is made using dummy data. Still under construction.","the favourite thing, i don't understand why it's not just as simple as a dd a property in the database object.","favorite boolean","then all pages can access it. favourite page merely displaying true ones. and count will be easy too"];function b(){return(0,d.jsx)("div",{className:g.messages,children:k.map((function(e){return(0,d.jsx)("div",{className:g.messageBubble,children:e})}))})}var w={addMessage:"AddMessage_addMessage__15d3x"};function x(){return(0,d.jsxs)("form",{className:w.addMessage,children:[(0,d.jsx)("label",{htmlFor:"entry",children:"Add new message"}),(0,d.jsx)("textarea",{id:"entry"}),(0,d.jsx)("button",{children:"Submit"})]})}function S(){return(0,d.jsxs)("main",{children:[(0,d.jsx)("h2",{children:"Welcome to MyDuck \ud83e\udd86"}),(0,d.jsx)("p",{children:"MyDuck is developed because talking to ourselves does help."})]})}function E(){var e=(0,t.useContext)(uk);(0,t.useContext)(sk);return e.length?(0,d.jsxs)("main",{children:[(0,d.jsx)(m,{}),(0,d.jsx)(b,{}),(0,d.jsx)(x,{})]}):(0,d.jsx)(S,{})}var _={addChat:"AddChat_addChat__NU5sk",buttons:"AddChat_buttons__kkwk3"};function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function C(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function R(e){var t=L();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}(this,n)}}function M(e,t,n){return M=L()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&A(i,n.prototype),i},M.apply(null,arguments)}function F(e){var t="function"===typeof Map?new Map:void 0;return F=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return M(e,arguments,P(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),A(n,e)},F(e)}var V=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(V(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new B;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},B=function(e){O(n,e);var t=R(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return C(n)}(F(Error)),j=function(e){return function(e){var t=V(e);return U.encodeByteArray(t,!0)}(e).replace(/\./g,"")},z=function(e){try{return U.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function q(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&K(n)&&(e[n]=q(e[n],t[n]));return e}function K(e){return"__proto__"!==e}var G=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Q=function(){try{return G()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/myduck",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&z(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},H=function(){var e;return null===(e=Q())||void 0===e?void 0:e.config},W=function(){function e(){var t=this;T(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return C(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function $(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function X(){return!function(){var e,t=null===(e=Q())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y(){try{return"object"===typeof indexedDB}catch(e){return!1}}var J=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(N(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(N(a),Z.prototype.create),a}return C(n)}(F(Error)),Z=function(){function e(t,n,r){T(this,e),this.service=t,this.serviceName=n,this.errors=r}return C(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ee,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new J(n,a,t)}}]),e}();var ee=/\{\$([^}]+)}/g;function te(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ne(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(re(u)&&re(s)){if(!ne(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function re(e){return null!==e&&"object"===typeof e}function ie(e,t){var n=new ae(e,t);return n.subscribe.bind(n)}var ae=function(){function e(t,n){var r=this;T(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return C(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=D(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=oe),void 0===r.error&&(r.error=oe),void 0===r.complete&&(r.complete=oe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function oe(){}function ue(e){return e&&e._delegate?e._delegate:e}function se(){se=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var h={};function d(){}function v(){}function p(){}var y={};c(y,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(I([])));g&&g!==t&&n.call(g,o)&&(y=g);var k=p.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function a(r,o,u,s){var c=f(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==i(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,u,s)}),(function(e){a("throw",e,u,s)})):t.resolve(h).then((function(e){l.value=e,u(l)}),(function(e){return a("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:v,configurable:!0}),v.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),c(k,s,"Generator"),c(k,o,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function ce(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){le(a,r,i,o,u,"next",e)}function u(e){le(a,r,i,o,u,"throw",e)}o(void 0)}))}}var he=function(){function e(t,n,r){T(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return C(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),de="[DEFAULT]",ve=function(){function e(t,n){T(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return C(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new W;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:de})}catch(s){}var t,n=D(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ce(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ce(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=D(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=f(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(oy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===de?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(oy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.component?this.component.multipleInstances?e:de:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var pe,ye,me=function(){function e(t){T(this,e),this.name=t,this.providers=new Map}return C(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ve(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ge=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ye||(ye={}));var ke={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},be=ye.INFO,we=(o(pe={},ye.DEBUG,"log"),o(pe,ye.VERBOSE,"log"),o(pe,ye.INFO,"info"),o(pe,ye.WARN,"warn"),o(pe,ye.ERROR,"error"),pe),xe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=we[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Se=function(){function e(t){T(this,e),this.name=t,this._logLevel=be,this._logHandler=xe,this._userLogHandler=null,ge.push(this)}return C(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ye))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ke[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.DEBUG].concat(t)),this._logHandler.apply(this,[this,ye.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ye.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.INFO].concat(t)),this._logHandler.apply(this,[this,ye.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.WARN].concat(t)),this._logHandler.apply(this,[this,ye.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.ERROR].concat(t)),this._logHandler.apply(this,[this,ye.ERROR].concat(t))}}]),e}();var Ee,_e,Te=function(e,t){return t.some((function(t){return e instanceof t}))};var Ie=new WeakMap,Ce=new WeakMap,De=new WeakMap,Ne=new WeakMap,Ae=new WeakMap;var Oe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ce.get(e);if("objectStoreNames"===t)return e.objectStoreNames||De.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Re(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Pe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Me(this),n),Re(Ie.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Re(e.apply(Me(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Me(this),t].concat(r));return De.set(a,t.sort?t.sort():[t]),Re(a)}}function Le(e){return"function"===typeof e?Pe(e):(e instanceof IDBTransaction&&function(e){if(!Ce.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ce.set(e,t)}}(e),Te(e,Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Oe):e)}function Re(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Re(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ie.set(t,e)})).catch((function(){})),Ae.set(t,e),t}(e);if(Ne.has(e))return Ne.get(e);var t=Le(e);return t!==e&&(Ne.set(e,t),Ae.set(t,e)),t}var Me=function(e){return Ae.get(e)};var Fe,Ve,Ue=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],je=new Map;function ze(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(je.get(t))return je.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Be.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ue.includes(n))){var a=function(){var e=fe(se().mark((function e(t){var a,o,u,s,c,l,f=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return je.set(t,a),a}}}Oe=function(e){return s(s({},e),{},{get:function(t,n,r){return ze(t,n)||e.get(t,n,r)},has:function(t,n){return!!ze(t,n)||e.has(t,n)}})}(Oe);var qe=function(){function e(t){T(this,e),this.container=t}return C(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ke="@firebase/app",Ge="0.9.5",Qe=new Se("@firebase/app"),He="[DEFAULT]",We=(o(Fe={},Ke,"fire-core"),o(Fe,"@firebase/app-compat","fire-core-compat"),o(Fe,"@firebase/analytics","fire-analytics"),o(Fe,"@firebase/analytics-compat","fire-analytics-compat"),o(Fe,"@firebase/app-check","fire-app-check"),o(Fe,"@firebase/app-check-compat","fire-app-check-compat"),o(Fe,"@firebase/auth","fire-auth"),o(Fe,"@firebase/auth-compat","fire-auth-compat"),o(Fe,"@firebase/database","fire-rtdb"),o(Fe,"@firebase/database-compat","fire-rtdb-compat"),o(Fe,"@firebase/functions","fire-fn"),o(Fe,"@firebase/functions-compat","fire-fn-compat"),o(Fe,"@firebase/installations","fire-iid"),o(Fe,"@firebase/installations-compat","fire-iid-compat"),o(Fe,"@firebase/messaging","fire-fcm"),o(Fe,"@firebase/messaging-compat","fire-fcm-compat"),o(Fe,"@firebase/performance","fire-perf"),o(Fe,"@firebase/performance-compat","fire-perf-compat"),o(Fe,"@firebase/remote-config","fire-rc"),o(Fe,"@firebase/remote-config-compat","fire-rc-compat"),o(Fe,"@firebase/storage","fire-gcs"),o(Fe,"@firebase/storage-compat","fire-gcs-compat"),o(Fe,"@firebase/firestore","fire-fst"),o(Fe,"@firebase/firestore-compat","fire-fst-compat"),o(Fe,"fire-js","fire-js"),o(Fe,"firebase","fire-js-all"),Fe),$e=new Map,Xe=new Map;function Ye(e,t){try{e.container.addComponent(t)}catch(n){Qe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e,t){e.container.addOrOverwriteComponent(t)}function Ze(e){var t=e.name;if(Xe.has(t))return Qe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);var n,r=D($e.values());try{for(r.s();!(n=r.n()).done;){Ye(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function et(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He;et(e,t).clearInstance(n)}function nt(){Xe.clear()}var rt=(o(Ve={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),o(Ve,"bad-app-name","Illegal App name: '{$appName}"),o(Ve,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),o(Ve,"app-deleted","Firebase App named '{$appName}' already deleted"),o(Ve,"no-options","Need to provide options, when not being deployed to hosting via source."),o(Ve,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),o(Ve,"invalid-log-argument","First argument to `onLog` must be null or a function."),o(Ve,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),o(Ve,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),o(Ve,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),o(Ve,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ve),it=new Z("app","Firebase",rt),at=function(){function e(t,n,r){var i=this;T(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new he("app",(function(){return i}),"PUBLIC"))}return C(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw it.create("app-deleted",{appName:this._name})}}]),e}(),ot="9.18.0";function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:He,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw it.create("bad-app-name",{appName:String(i)});if(n||(n=H()),!n)throw it.create("no-options");var a=$e.get(i);if(a){if(ne(n,a.options)&&ne(r,a.config))return a;throw it.create("duplicate-app",{appName:i})}var o,u=new me(i),s=D(Xe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new at(n,r,u);return $e.set(i,l),l}function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=$e.get(e);if(!t&&e===He)return ut();if(!t)throw it.create("no-app",{appName:e});return t}function ct(){return Array.from($e.values())}function lt(e){return ft.apply(this,arguments)}function ft(){return(ft=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!$e.has(n)){e.next=6;break}return $e.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t,n){var r,i=null!==(r=We[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qe.warn(u.join(" "))}Ze(new he("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function dt(e,t){if(null!==e&&"function"!==typeof e)throw it.create("invalid-log-argument");!function(e,t){var n,r=D(ge);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ke[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ye[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function vt(e){var t;t=e,ge.forEach((function(e){e.setLogLevel(t)}))}var pt="firebase-heartbeat-database",yt=1,mt="firebase-heartbeat-store",gt=null;function kt(){return gt||(gt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Re(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Re(u.result),e.oldVersion,e.newVersion,Re(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(pt,yt,{upgrade:function(e,t){if(0===t)e.createObjectStore(mt)}}).catch((function(e){throw it.create("idb-open",{originalErrorMessage:e.message})}))),gt}function bt(e){return wt.apply(this,arguments)}function wt(){return wt=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kt();case 3:return n=e.sent,e.abrupt("return",n.transaction(mt).objectStore(mt).get(Et(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof J?Qe.warn(e.t0.message):(r=it.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Qe.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),wt.apply(this,arguments)}function xt(e,t){return St.apply(this,arguments)}function St(){return St=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kt();case 3:return r=e.sent,i=r.transaction(mt,"readwrite"),a=i.objectStore(mt),e.next=8,a.put(n,Et(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof J?Qe.warn(e.t0.message):(o=it.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Qe.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),St.apply(this,arguments)}function Et(e){return"".concat(e.name,"!").concat(e.options.appId)}var _t=1024,Tt=function(){function e(t){var n=this;T(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new At(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return C(e,[{key:"triggerHeartbeat",value:function(){var e=fe(se().mark((function e(){var t,n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=It(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=It(),n=Ct(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=j(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function It(){return(new Date).toISOString().substring(0,10)}function Ct(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t,r=[],i=e.slice(),a=D(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ot(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ot(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Dt,Nt,At=function(){function e(t){T(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return C(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,bt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ce(r.heartbeats),ce(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ot(e){return j(JSON.stringify({version:2,heartbeats:e})).length}Dt="",Ze(new he("platform-logger",(function(e){return new qe(e)}),"PRIVATE")),Ze(new he("heartbeat",(function(e){return new Tt(e)}),"PRIVATE")),ht(Ke,Ge,Dt),ht(Ke,Ge,"esm2017"),ht("fire-js","");var Pt=function(){function e(t,n){var r=this;T(this,e),this._delegate=t,this.firebase=n,Ye(t,new he("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return C(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),lt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ye(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Je(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Lt=(o(Nt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),o(Nt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Nt),Rt=new Z("app-compat","Firebase",Lt);var Mt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ut(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(te(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ht,setLogLevel:vt,onLog:dt,apps:null,SDK_VERSION:ot,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ze(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Rt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&q(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!te(n,e=e||He))throw Rt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Pt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){q(n,e)},createSubscribe:ie,ErrorFactory:Z,deepExtend:q}),n}(),Ft=new Se("@firebase/app-compat"),Vt="@firebase/app-compat",Ut="0.2.5";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ft.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Bt=self.firebase.SDK_VERSION;Bt&&Bt.indexOf("LITE")>=0&&Ft.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var jt=Mt;!function(e){ht(Vt,Ut,e)}();function zt(){return zt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},zt.apply(this,arguments)}jt.registerVersion("firebase","9.18.0","app-compat");var qt,Kt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Gt={},Qt=Qt||{},Ht=Kt||self;function Wt(){}function $t(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Xt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Yt="closure_uid_"+(1e9*Math.random()>>>0),Jt=0;function Zt(e,t,n){return e.call.apply(e.bind,arguments)}function en(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function tn(e,t,n){return(tn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zt:en).apply(null,arguments)}function nn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function rn(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function an(){this.s=this.s,this.o=this.o}an.prototype.s=!1,an.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Yt)&&e[Yt]||(e[Yt]=++Jt))},an.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var on=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function un(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function sn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if($t(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function cn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var ln=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ht.addEventListener("test",Wt,t),Ht.removeEventListener("test",Wt,t)}catch(n){}return e}();function fn(e){return/^[\s\xa0]*$/.test(e)}var hn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function dn(e,t){return e<t?-1:e>t?1:0}function vn(){var e=Ht.navigator;return e&&(e=e.userAgent)?e:""}function pn(e){return-1!=vn().indexOf(e)}function yn(e){return yn[" "](e),e}yn[" "]=Wt;var mn,gn=pn("Opera"),kn=pn("Trident")||pn("MSIE"),bn=pn("Edge"),wn=bn||kn,xn=pn("Gecko")&&!(-1!=vn().toLowerCase().indexOf("webkit")&&!pn("Edge"))&&!(pn("Trident")||pn("MSIE"))&&!pn("Edge"),Sn=-1!=vn().toLowerCase().indexOf("webkit")&&!pn("Edge");function En(){var e=Ht.document;return e?e.documentMode:void 0}e:{var _n="",Tn=function(){var e=vn();return xn?/rv:([^\);]+)(\)|;)/.exec(e):bn?/Edge\/([\d\.]+)/.exec(e):kn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Sn?/WebKit\/(\S+)/.exec(e):gn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Tn&&(_n=Tn?Tn[1]:""),kn){var In=En();if(null!=In&&In>parseFloat(_n)){mn=String(In);break e}}mn=_n}var Cn,Dn={};function Nn(){return function(e){var t=Dn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=hn(String(mn)).split("."),n=hn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=dn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||dn(0==a[2].length,0==o[2].length)||dn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ht.document&&kn){var An=En();Cn=An||(parseInt(mn,10)||void 0)}else Cn=void 0;var On=Cn;function Pn(e,t){if(cn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xn){e:{try{yn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ln[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Pn.X.h.call(this)}}rn(Pn,cn);var Ln={2:"touch",3:"pen",4:"mouse"};Pn.prototype.h=function(){Pn.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Rn="closure_listenable_"+(1e6*Math.random()|0),Mn=0;function Fn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Mn,this.ba=this.ea=!1}function Vn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Un(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Bn(e){var t={};for(var n in e)t[n]=e[n];return t}var jn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<jn.length;a++)n=jn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function qn(e){this.src=e,this.g={},this.h=0}function Kn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=on(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Vn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}qn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Gn(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Fn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Qn="closure_lm_"+(1e6*Math.random()|0),Hn={};function Wn(e,t,n,r,i){if(r&&r.once)return Xn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wn(e,t[a],n,r,i);return null}return n=rr(n),e&&e[Rn]?e.N(t,n,Xt(r)?!!r.capture:!!r,i):$n(e,t,n,!1,r,i)}function $n(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Xt(i)?!!i.capture:!!i,u=tr(e);if(u||(e[Qn]=u=new qn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=er;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ln||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Xn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Xn(e,t[a],n,r,i);return null}return n=rr(n),e&&e[Rn]?e.O(t,n,Xt(r)?!!r.capture:!!r,i):$n(e,t,n,!0,r,i)}function Yn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Yn(e,t[a],n,r,i);else r=Xt(r)?!!r.capture:!!r,n=rr(n),e&&e[Rn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Gn(a=e.g[t],n,r,i))&&(Vn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=tr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gn(t,n,r,i)),(n=-1<e?t[e]:null)&&Jn(n))}function Jn(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Rn])Kn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tr(t))?(Kn(n,e),0==n.h&&(n.src=null,t[Qn]=null)):Vn(e)}}}function Zn(e){return e in Hn?Hn[e]:Hn[e]="on"+e}function er(e,t){if(e.ba)e=!0;else{t=new Pn(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Jn(e),e=n.call(r,t)}return e}function tr(e){return(e=e[Qn])instanceof qn?e:null}var nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function rr(e){return"function"===typeof e?e:(e[nr]||(e[nr]=function(t){return e.handleEvent(t)}),e[nr])}function ir(){an.call(this),this.i=new qn(this),this.P=this,this.I=null}function ar(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new cn(t,e);else if(t instanceof cn)t.target=t.target||e;else{var i=t;zn(t=new cn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=or(o,r,!0,t)&&i}if(i=or(o=t.g=e,r,!0,t)&&i,i=or(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=or(o=t.g=n[a],r,!1,t)&&i}function or(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Kn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}rn(ir,an),ir.prototype[Rn]=!0,ir.prototype.removeEventListener=function(e,t,n,r){Yn(this,e,t,n,r)},ir.prototype.M=function(){if(ir.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Vn(n[r]);delete t.g[e],t.h--}}this.I=null},ir.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ir.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ur=Ht.JSON.stringify;function sr(){var e=yr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var cr,lr=function(){function e(){T(this,e),this.h=this.g=null}return C(e,[{key:"add",value:function(e,t){var n=fr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),fr=new(function(){function e(t,n){T(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return C(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new hr}),(function(e){return e.reset()})),hr=function(){function e(){T(this,e),this.next=this.g=this.h=null}return C(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function dr(e){Ht.setTimeout((function(){throw e}),0)}function vr(e,t){cr||function(){var e=Ht.Promise.resolve(void 0);cr=function(){e.then(mr)}}(),pr||(cr(),pr=!0),yr.add(e,t)}var pr=!1,yr=new lr;function mr(){for(var e;e=sr();){try{e.h.call(e.g)}catch(n){dr(n)}var t=fr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}pr=!1}function gr(e,t){ir.call(this),this.h=e||1,this.g=t||Ht,this.j=tn(this.lb,this),this.l=Date.now()}function kr(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function br(e,t,n){if("function"===typeof e)n&&(e=tn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=tn(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ht.setTimeout(e,t||0)}function wr(e){e.g=br((function(){e.g=null,e.i&&(e.i=!1,wr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}rn(gr,ir),(qt=gr.prototype).ca=!1,qt.R=null,qt.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ar(this,"tick"),this.ca&&(kr(this),this.start()))}},qt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qt.M=function(){gr.X.M.call(this),kr(this),delete this.g};var xr=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return C(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:wr(this)}},{key:"M",value:function(){zt(P(n.prototype),"M",this).call(this),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(an);function Sr(e){an.call(this),this.h=e,this.g={}}rn(Sr,an);var Er=[];function _r(e,t,n,r){Array.isArray(n)||(n&&(Er[0]=n.toString()),n=Er);for(var i=0;i<n.length;i++){var a=Wn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Tr(e){Un(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Jn(e)}),e),e.g={}}function Ir(){this.g=!0}function Cr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ur(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Sr.prototype.M=function(){Sr.X.M.call(this),Tr(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ir.prototype.Aa=function(){this.g=!1},Ir.prototype.info=function(){};var Dr={},Nr=null;function Ar(){return Nr=Nr||new ir}function Or(e){cn.call(this,Dr.Pa,e)}function Pr(e){var t=Ar();ar(t,new Or(t))}function Lr(e,t){cn.call(this,Dr.STAT_EVENT,e),this.stat=t}function Rr(e){var t=Ar();ar(t,new Lr(t,e))}function Mr(e,t){cn.call(this,Dr.Qa,e),this.size=t}function Fr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ht.setTimeout((function(){e()}),t)}Dr.Pa="serverreachability",rn(Or,cn),Dr.STAT_EVENT="statevent",rn(Lr,cn),Dr.Qa="timingevent",rn(Mr,cn);var Vr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ur={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Br(){}function jr(e){return e.h||(e.h=e.i())}function zr(){}Br.prototype.h=null;var qr,Kr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Gr(){cn.call(this,"d")}function Qr(){cn.call(this,"c")}function Hr(){}function Wr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Sr(this),this.O=Xr,e=wn?125:void 0,this.T=new gr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new $r}function $r(){this.i=null,this.g="",this.h=!1}rn(Gr,cn),rn(Qr,cn),rn(Hr,Br),Hr.prototype.g=function(){return new XMLHttpRequest},Hr.prototype.i=function(){return{}},qr=new Hr;var Xr=45e3,Yr={},Jr={};function Zr(e,t,n){e.K=1,e.v=gi(di(t)),e.s=n,e.P=!0,ei(e,null)}function ei(e,t){e.F=Date.now(),ii(e),e.A=di(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Ai(n.i,"t",r),e.C=0,n=e.l.H,e.h=new $r,e.g=Oa(e.l,n?t:null,!e.s),0<e.N&&(e.L=new xr(tn(e.La,e,e.g),e.N)),_r(e.S,e.g,"readystatechange",e.ib),t=e.H?Bn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Pr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function ti(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function ni(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ri(e,n))==Jr){4==t&&(e.o=4,Rr(14),i=!1),Cr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Yr){e.o=4,Rr(15),Cr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Cr(e.j,e.m,r,null),ci(e,r)}ti(e)&&r!=Jr&&r!=Yr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Rr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ea(t),t.K=!0,Rr(11))):(Cr(e.j,e.m,n,"[Invalid Chunked Response]"),si(e),ui(e))}function ri(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Jr:(n=Number(t.substring(n,r)),isNaN(n)?Yr:(r+=1)+n>t.length?Jr:(t=t.substr(r,n),e.C=r+n,t))}function ii(e){e.V=Date.now()+e.O,ai(e,e.O)}function ai(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fr(tn(e.gb,e),t)}function oi(e){e.B&&(Ht.clearTimeout(e.B),e.B=null)}function ui(e){0==e.l.G||e.I||Ia(e.l,e)}function si(e){oi(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,kr(e.T),Tr(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ci(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ui(n.h,e)))if(!e.J&&Ui(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ta(n),ya(n)}Sa(n),Rr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Fr(tn(n.cb,n),6e3));if(1>=Vi(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Da(n,11)}else if((e.J||n.g==e)&&Ta(n),!fn(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Bi(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,mi(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Aa(r,r.H?r.ka:null,r.V),d.J){ji(r.h,d);var v=d,p=r.J;p&&v.setTimeout(p),v.B&&(oi(v),ii(v)),r.g=d}else xa(r);0<n.i.length&&ga(n)}else"stop"!=a[0]&&"close"!=a[0]||Da(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Da(n,7):pa(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Pr()}catch(a){}}function li(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($t(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if($t(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if($t(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(qt=Wr.prototype).setTimeout=function(e){this.O=e},qt.ib=function(e){e=e.target;var t=this.L;t&&3==ca(e)?t.l():this.La(e)},qt.La=function(e){try{if(e==this.g)e:{var t=ca(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||wn||this.g&&(this.h.h||this.g.fa()||la(this.g)))){this.I||4!=t||7==n||Pr(),oi(this);var r=this.g.aa();this.Y=r;t:if(ti(this)){var i=la(this.g);e="";var a=i.length,o=4==ca(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){si(this),ui(this);var u="";break t}this.h.i=new Ht.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fn(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Rr(12),si(this),ui(this);break e}Cr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ci(this,r)}this.P?(ni(this,t,u),wn&&this.i&&3==t&&(_r(this.S,this.T,"tick",this.hb),this.T.start())):(Cr(this.j,this.m,u,null),ci(this,u)),4==t&&si(this),this.i&&!this.I&&(4==t?Ia(this.l,this):(this.i=!1,ii(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Rr(12)):(this.o=0,Rr(13)),si(this),ui(this)}}}catch(t){}},qt.hb=function(){if(this.g){var e=ca(this.g),t=this.g.fa();this.C<t.length&&(oi(this),ni(this,e,t),this.i&&4!=e&&ii(this))}},qt.cancel=function(){this.I=!0,si(this)},qt.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Pr(),Rr(17)),si(this),this.o=2,ui(this)):ai(this,this.V-e)};var fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hi(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof hi){this.h=void 0!==t?t:e.h,vi(this,e.j),this.s=e.s,this.g=e.g,pi(this,e.m),this.l=e.l,t=e.i;var n=new Ii;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),yi(this,n),this.o=e.o}else e&&(n=String(e).match(fi))?(this.h=!!t,vi(this,n[1]||"",!0),this.s=ki(n[2]||""),this.g=ki(n[3]||"",!0),pi(this,n[4]),this.l=ki(n[5]||"",!0),yi(this,n[6]||"",!0),this.o=ki(n[7]||"")):(this.h=!!t,this.i=new Ii(null,this.h))}function di(e){return new hi(e)}function vi(e,t,n){e.j=n?ki(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function yi(e,t,n){t instanceof Ii?(e.i=t,function(e,t){t&&!e.j&&(Ci(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Di(this,t),Ai(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=bi(t,_i)),e.i=new Ii(t,e.h))}function mi(e,t,n){e.i.set(t,n)}function gi(e){return mi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ki(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}hi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bi(t,xi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(bi(t,xi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bi(n,"/"==n.charAt(0)?Ei:Si,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",bi(n,Ti)),e.join("")};var xi=/[#\/\?@]/g,Si=/[#\?:]/g,Ei=/[#\?]/g,_i=/[#\?@]/g,Ti=/#/g;function Ii(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ci(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Di(e,t){Ci(e),t=Oi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ni(e,t){return Ci(e),t=Oi(e,t),e.g.has(t)}function Ai(e,t,n){Di(e,t),0<n.length&&(e.i=null,e.g.set(Oi(e,t),un(n)),e.h+=n.length)}function Oi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(qt=Ii.prototype).add=function(e,t){Ci(this),this.i=null,e=Oi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},qt.forEach=function(e,t){Ci(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},qt.oa=function(){Ci(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},qt.W=function(e){Ci(this);var t=[];if("string"===typeof e)Ni(this,e)&&(t=t.concat(this.g.get(Oi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},qt.set=function(e,t){return Ci(this),this.i=null,Ni(this,e=Oi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},qt.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Pi=C((function e(t,n){T(this,e),this.h=t,this.g=n}));function Li(e){this.l=e||Mi,Ht.PerformanceNavigationTiming?e=0<(e=Ht.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ht.g&&Ht.g.Ga&&Ht.g.Ga()&&Ht.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ri,Mi=10;function Fi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Vi(e){return e.h?1:e.g?e.g.size:0}function Ui(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bi(e,t){e.g?e.g.add(t):e.h=t}function ji(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function zi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=D(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return un(e.i)}function qi(){}function Ki(){this.g=new qi}function Gi(e,t,n){var r=n||"";try{li(e,(function(e,n){var i=e;Xt(e)&&(i=ur(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Qi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Hi(e){this.l=e.ac||null,this.j=e.jb||!1}function Wi(e,t){ir.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$i,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Li.prototype.cancel=function(){if(this.i=zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=D(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},qi.prototype.stringify=function(e){return Ht.JSON.stringify(e,void 0)},qi.prototype.parse=function(e){return Ht.JSON.parse(e,void 0)},rn(Hi,Br),Hi.prototype.g=function(){return new Wi(this.l,this.j)},Hi.prototype.i=(Ri={},function(){return Ri}),rn(Wi,ir);var $i=0;function Xi(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Yi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ji(e)}function Ji(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(qt=Wi.prototype).open=function(e,t){if(this.readyState!=$i)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ji(this)},qt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ht).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yi(this)),this.readyState=$i},qt.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ji(this)),this.g&&(this.readyState=3,Ji(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Ht.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xi(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},qt.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yi(this):Ji(this),3==this.readyState&&Xi(this)}},qt.Va=function(e){this.g&&(this.response=this.responseText=e,Yi(this))},qt.Ua=function(e){this.g&&(this.response=e,Yi(this))},qt.ga=function(){this.g&&Yi(this)},qt.setRequestHeader=function(e,t){this.v.append(e,t)},qt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},qt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Zi=Ht.JSON.parse;function ea(e){ir.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ta,this.K=this.L=!1}rn(ea,ir);var ta="",na=/^https?$/i,ra=["POST","PUT"];function ia(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,aa(e),ua(e)}function aa(e){e.D||(e.D=!0,ar(e,"complete"),ar(e,"error"))}function oa(e){if(e.h&&"undefined"!=typeof Qt&&(!e.C[1]||4!=ca(e)||2!=e.aa()))if(e.v&&4==ca(e))br(e.Ha,0,e);else if(ar(e,"readystatechange"),4==ca(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(fi)[1]||null;if(!a&&Ht.self&&Ht.self.location){var o=Ht.self.location.protocol;a=o.substr(0,o.length-1)}i=!na.test(a?a.toLowerCase():"")}t=i}if(t)ar(e,"complete"),ar(e,"success");else{e.m=6;try{var u=2<ca(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",aa(e)}}finally{ua(e)}}}function ua(e,t){if(e.g){sa(e);var n=e.g,r=e.C[0]?Wt:null;e.g=null,e.C=null,t||ar(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function sa(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ht.clearTimeout(e.A),e.A=null)}function ca(e){return e.g?e.g.readyState:0}function la(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ta:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Xa){return null}}function fa(e){var t="";return Un(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ha(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=fa(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):mi(e,t,n))}function da(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function va(e){this.Ca=0,this.i=[],this.j=new Ir,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=da("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=da("baseRetryDelayMs",5e3,e),this.bb=da("retryDelaySeedMs",1e4,e),this.$a=da("forwardChannelMaxRetries",2,e),this.ta=da("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Li(e&&e.concurrentRequestLimit),this.Fa=new Ki,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function pa(e){if(ma(e),3==e.G){var t=e.U++,n=di(e.F);mi(n,"SID",e.I),mi(n,"RID",t),mi(n,"TYPE","terminate"),ba(e,n),(t=new Wr(e,e.j,t,void 0)).K=2,t.v=gi(di(n)),n=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(n=Ht.navigator.sendBeacon(t.v.toString(),"")),!n&&Ht.Image&&((new Image).src=t.v,n=!0),n||(t.g=Oa(t.l,null),t.g.da(t.v)),t.F=Date.now(),ii(t)}Na(e)}function ya(e){e.g&&(Ea(e),e.g.cancel(),e.g=null)}function ma(e){ya(e),e.u&&(Ht.clearTimeout(e.u),e.u=null),Ta(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Ht.clearTimeout(e.m),e.m=null)}function ga(e){Fi(e.h)||e.m||(e.m=!0,vr(e.Ja,e),e.C=0)}function ka(e,t){var n;n=t?t.m:e.U++;var r=di(e.F);mi(r,"SID",e.I),mi(r,"RID",n),mi(r,"AID",e.T),ba(e,r),e.o&&e.s&&ha(r,e.o,e.s),n=new Wr(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=wa(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Bi(e.h,n),Zr(n,r,t)}function ba(e,t){e.ia&&Un(e.ia,(function(e,n){mi(t,n,e)})),e.l&&li({},(function(e,n){mi(t,n,e)}))}function wa(e,t,n){n=Math.min(e.i.length,n);var r=e.l?tn(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Gi(l,o,"req"+c+"_")}catch(ao){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function xa(e){e.g||e.u||(e.Z=1,vr(e.Ia,e),e.A=0)}function Sa(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Fr(tn(e.Ia,e),Ca(e,e.A)),e.A++,!0)}function Ea(e){null!=e.B&&(Ht.clearTimeout(e.B),e.B=null)}function _a(e){e.g=new Wr(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=di(e.sa);mi(t,"RID","rpc"),mi(t,"SID",e.I),mi(t,"CI",e.L?"0":"1"),mi(t,"AID",e.T),mi(t,"TYPE","xmlhttp"),ba(e,t),e.o&&e.s&&ha(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=gi(di(t)),n.s=null,n.P=!0,ei(n,e)}function Ta(e){null!=e.v&&(Ht.clearTimeout(e.v),e.v=null)}function Ia(e,t){var n=null;if(e.g==t){Ta(e),Ea(e),e.g=null;var r=2}else{if(!Ui(e.h,t))return;n=t.D,ji(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ar(r=Ar(),new Mr(r,n)),ga(e)}else xa(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Vi(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Fr(tn(e.Ja,e,t),Ca(e,e.C)),e.C++,!0))}(e,t)||2==r&&Sa(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Da(e,5);break;case 4:Da(e,10);break;case 3:Da(e,6);break;default:Da(e,2)}}function Ca(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Da(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=tn(e.kb,e);n||(n=new hi("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||vi(n,"https"),gi(n)),function(e,t){var n=new Ir;if(Ht.Image){var r=new Image;r.onload=nn(Qi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=nn(Qi,n,r,"TestLoadImage: error",!1,t),r.onabort=nn(Qi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=nn(Qi,n,r,"TestLoadImage: timeout",!1,t),Ht.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Rr(2);e.G=0,e.l&&e.l.va(t),Na(e),ma(e)}function Na(e){if(e.G=0,e.la=[],e.l){var t=zi(e.h);0==t.length&&0==e.i.length||(sn(e.la,t),sn(e.la,e.i),e.h.i.length=0,un(e.i),e.i.length=0),e.l.ua()}}function Aa(e,t,n){var r=n instanceof hi?di(n):new hi(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),pi(r,r.m);else{var i=Ht.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new hi(null,void 0);r&&vi(a,r),t&&(a.g=t),i&&pi(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&mi(r,n,t),mi(r,"VER",e.ma),ba(e,r),r}function Oa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new ea(new Hi({jb:!0})):new ea(e.ra)).Ka(e.H),t}function Pa(){}function La(){if(kn&&!(10<=Number(On)))throw Error("Environmental error: no available transport.")}function Ra(e,t){ir.call(this),this.g=new va(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!fn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Va(this)}function Ma(e){Gr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Fa(){Qr.call(this),this.status=1}function Va(e){this.g=e}(qt=ea.prototype).Ka=function(e){this.L=e},qt.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qr.g(),this.C=this.u?jr(this.u):jr(qr),this.g.onreadystatechange=tn(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void ia(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=D(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ht.FormData&&e instanceof Ht.FormData,!(0<=on(ra,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=D(n);try{for(c.s();!(s=c.n()).done;){var l=f(s.value,2),h=l[0],d=l[1];this.g.setRequestHeader(h,d)}}catch(v){c.e(v)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sa(this),0<this.B&&((this.K=function(e){return kn&&Nn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tn(this.qa,this)):this.A=br(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){ia(this,u)}},qt.qa=function(){"undefined"!=typeof Qt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ar(this,"timeout"),this.abort(8))},qt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ar(this,"complete"),ar(this,"abort"),ua(this))},qt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ua(this,!0)),ea.X.M.call(this)},qt.Ha=function(){this.s||(this.F||this.v||this.l?oa(this):this.fb())},qt.fb=function(){oa(this)},qt.aa=function(){try{return 2<ca(this)?this.g.status:-1}catch(Ri){return-1}},qt.fa=function(){try{return this.g?this.g.responseText:""}catch(Ri){return""}},qt.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Zi(t)}},qt.Ea=function(){return this.m},qt.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(qt=va.prototype).ma=8,qt.G=1,qt.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Wr(this,this.j,e,void 0),n=this.s;if(this.S&&(n?zn(n=Bn(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=wa(this,t,r),mi(i=di(this.F),"RID",e),mi(i,"CVER",22),this.D&&mi(i,"X-HTTP-Session-Id",this.D),ba(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(fa(n)))+"&"+r:this.o&&ha(i,this.o,n)),Bi(this.h,t),this.Ya&&mi(i,"TYPE","init"),this.O?(mi(i,"$req",r),mi(i,"SID","null"),t.Z=!0,Zr(t,i,null)):Zr(t,i,r),this.G=2}}else 3==this.G&&(e?ka(this,e):0==this.i.length||Fi(this.h)||ka(this))},qt.Ia=function(){if(this.u=null,_a(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Fr(tn(this.eb,this),e)}},qt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Rr(10),ya(this),_a(this))},qt.cb=function(){null!=this.v&&(this.v=null,ya(this),Sa(this),Rr(19))},qt.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Rr(2)):(this.j.info("Failed to ping google.com"),Rr(1))},(qt=Pa.prototype).xa=function(){},qt.wa=function(){},qt.va=function(){},qt.ua=function(){},qt.Ra=function(){},La.prototype.g=function(e,t){return new Ra(e,t)},rn(Ra,ir),Ra.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Rr(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Aa(e,null,e.V),ga(e)},Ra.prototype.close=function(){pa(this.g)},Ra.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ur(e),e=n);t.i.push(new Pi(t.ab++,e)),3==t.G&&ga(t)},Ra.prototype.M=function(){this.g.l=null,delete this.j,pa(this.g),delete this.g,Ra.X.M.call(this)},rn(Ma,Gr),rn(Fa,Qr),rn(Va,Pa),Va.prototype.xa=function(){ar(this.g,"a")},Va.prototype.wa=function(e){ar(this.g,new Ma(e))},Va.prototype.va=function(e){ar(this.g,new Fa)},Va.prototype.ua=function(){ar(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,Ra.prototype.send=Ra.prototype.u,Ra.prototype.open=Ra.prototype.m,Ra.prototype.close=Ra.prototype.close,Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,Ur.COMPLETE="complete",zr.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",ir.prototype.listen=ir.prototype.N,ea.prototype.listenOnce=ea.prototype.O,ea.prototype.getLastError=ea.prototype.Oa,ea.prototype.getLastErrorCode=ea.prototype.Ea,ea.prototype.getStatus=ea.prototype.aa,ea.prototype.getResponseJson=ea.prototype.Sa,ea.prototype.getResponseText=ea.prototype.fa,ea.prototype.send=ea.prototype.da,ea.prototype.setWithCredentials=ea.prototype.Ka;var Ua=Gt.createWebChannelTransport=function(){return new La},Ba=Gt.getStatEventTarget=function(){return Ar()},ja=Gt.ErrorCode=Vr,za=Gt.EventType=Ur,qa=Gt.Event=Dr,Ka=Gt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ga=Gt.FetchXmlHttpFactory=Hi,Qa=Gt.WebChannel=zr,Ha=Gt.XhrIo=ea,Wa="@firebase/firestore",$a=function(){function e(t){T(this,e),this.uid=t}return C(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();$a.UNAUTHENTICATED=new $a(null),$a.GOOGLE_CREDENTIALS=new $a("google-credentials-uid"),$a.FIRST_PARTY=new $a("first-party-uid"),$a.MOCK_USER=new $a("mock-user");var Xa="9.18.0",Ya=new Se("@firebase/firestore");function Ja(){return Ya.logLevel}function Za(e){if(Ya.logLevel<=ye.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(no);Ya.debug.apply(Ya,["Firestore (".concat(Xa,"): ").concat(e)].concat(ce(i)))}}function eo(e){if(Ya.logLevel<=ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(no);Ya.error.apply(Ya,["Firestore (".concat(Xa,"): ").concat(e)].concat(ce(i)))}}function to(e){if(Ya.logLevel<=ye.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(no);Ya.warn.apply(Ya,["Firestore (".concat(Xa,"): ").concat(e)].concat(ce(i)))}}function no(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Xa,") INTERNAL ASSERTION FAILED: ")+e;throw eo(t),new Error(t)}function io(e,t){e||ro()}function ao(e,t){return e}var oo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uo=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return C(n)}(J),so=C((function e(){var t=this;T(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),co=C((function e(t,n){T(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),lo=function(){function e(){T(this,e)}return C(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($a.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),fo=function(){function e(t){T(this,e),this.token=t,this.changeListener=null}return C(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ho=function(){function e(t){T(this,e),this.t=t,this.currentUser=$a.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return C(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new so;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new so,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Za("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Za("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new so)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Za("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(io("string"==typeof n.accessToken),new co(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return io(null===e||"string"==typeof e),new $a(e)}}]),e}(),vo=function(){function e(t,n,r,i){T(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=$a.FIRST_PARTY,this.p=new Map}return C(e,[{key:"I",value:function(){return this.g?this.g():(io(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),po=function(){function e(t,n,r,i){T(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return C(e,[{key:"getToken",value:function(){return Promise.resolve(new vo(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($a.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),yo=C((function e(t){T(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),mo=function(){function e(t){T(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return C(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Za("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Za("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Za("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Za("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(io("string"==typeof t.token),e.A=t.token,new yo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function go(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ko=function(){function e(){T(this,e)}return C(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=go(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function bo(e,t){return e<t?-1:e>t?1:0}function wo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function xo(e){return e+"\0"}var So=function(){function e(t,n){if(T(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new uo(oo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new uo(oo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new uo(oo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new uo(oo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return C(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?bo(this.nanoseconds,e.nanoseconds):bo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Eo=function(){function e(t){T(this,e),this.timestamp=t}return C(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new So(0,0))}},{key:"max",value:function(){return new e(new So(253402300799,999999999))}}]),e}(),_o=function(){function e(t,n,r){T(this,e),void 0===n?n=0:n>t.length&&ro(),void 0===r?r=t.length-n:r>t.length-n&&ro(),this.segments=t,this.offset=n,this.len=r}return C(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),To=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new uo(oo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ce(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(_o),Io=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Co=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Io.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new uo(oo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new uo(oo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new uo(oo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new uo(oo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(_o),Do=function(){function e(t){T(this,e),this.path=t}return C(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===To.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(To.fromString(t))}},{key:"fromName",value:function(t){return new e(To.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(To.emptyPath())}},{key:"comparator",value:function(e,t){return To.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new To(t.slice()))}}]),e}(),No=C((function e(t,n,r,i){T(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ao(e){return e.fields.find((function(e){return 2===e.kind}))}function Oo(e){return e.fields.filter((function(e){return 2!==e.kind}))}No.UNKNOWN_ID=-1;var Po=C((function e(t,n){T(this,e),this.fieldPath=t,this.kind=n}));var Lo=function(){function e(t,n){T(this,e),this.sequenceNumber=t,this.offset=n}return C(e,null,[{key:"empty",value:function(){return new e(0,Fo.min())}}]),e}();function Ro(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Eo.fromTimestamp(1e9===r?new So(n+1,0):new So(n,r));return new Fo(i,Do.empty(),t)}function Mo(e){return new Fo(e.readTime,e.key,-1)}var Fo=function(){function e(t,n,r){T(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return C(e,null,[{key:"min",value:function(){return new e(Eo.min(),Do.empty(),-1)}},{key:"max",value:function(){return new e(Eo.max(),Do.empty(),-1)}}]),e}();function Vo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Do.comparator(e.documentKey,t.documentKey))?n:bo(e.largestBatchId,t.largestBatchId)}var Uo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bo=function(){function e(){T(this,e),this.onCommittedListeners=[]}return C(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function jo(e){return zo.apply(this,arguments)}function zo(){return zo=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===oo.FAILED_PRECONDITION&&t.message===Uo){e.next=2;break}throw t;case 2:Za("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}var qo=function(){function e(t){var n=this;T(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return C(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ro(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=D(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Ko=function(){function e(t,n){var r=this;T(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new so,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Ho(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Jo(e.target.error);r.P.reject(new Ho(t,n))}}return C(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Za("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new $o(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ho(n,t)}}}]),e}(),Go=function(){function e(t,n,r){T(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D($())&&eo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return C(e,[{key:"O",value:function(){var e=fe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Za("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ho(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new uo(oo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new uo(oo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ho(t,n))},i.onupgradeneeded=function(e){Za("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.F(t,i.transaction,e.oldVersion,n.version).next((function(){Za("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=fe(se().mark((function e(t,n,r,i){var a,o,u,s,c=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=se().mark((function e(){var n,u,s,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Ko.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),qo.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Za("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Za("SimpleDb","Removing database:",e),Xo(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Y())return!1;if(e.N())return!0;var t=$(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/myduck",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.$)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Qo=function(){function e(t){T(this,e),this.q=t,this.U=!1,this.K=null}return C(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Xo(this.q.delete())}}]),e}(),Ho=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,oo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return C(n)}(uo);function Wo(e){return"IndexedDbTransactionError"===e.name}var $o=function(){function e(t){T(this,e),this.store=t}return C(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Za("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Za("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Xo(n)}},{key:"add",value:function(e){return Za("SimpleDb","ADD",this.store.name,e,e),Xo(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Xo(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Za("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Za("SimpleDb","DELETE",this.store.name,e),Xo(this.store.delete(e))}},{key:"count",value:function(){return Za("SimpleDb","COUNT",this.store.name),Xo(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new qo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new qo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Za("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Z=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new qo((function(n,r){t.onerror=function(e){var t=Jo(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new qo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Qo(i),o=t(i.primaryKey,i.value,a);if(o instanceof qo){var u=o.catch((function(e){return a.done(),qo.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return qo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Xo(e){return new qo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Jo(e.target.error);n(t)}}))}var Yo=!1;function Jo(e){var t=Go.D($());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new uo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Yo||(Yo=!0,setTimeout((function(){throw r}),0)),r}}return e}var Zo=function(){function e(t,n){T(this,e),this.asyncQueue=t,this.et=n,this.task=null}return C(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Za("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Za,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Wo(e.t4)){e.next=17;break}Za("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,jo(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),eu=function(){function e(t,n){T(this,e),this.localStore=t,this.persistence=n}return C(e,[{key:"st",value:function(){var e=fe(se().mark((function e(){var t,n=this,r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return qo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Za("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Za("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Mo(t);Vo(r,n)>0&&(n=r)})),new Fo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),tu=function(){function e(t,n){var r=this;T(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return C(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();tu.at=-1;var nu=C((function e(t,n,r,i,a,o,u,s){T(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ru=function(){function e(t,n){T(this,e),this.projectId=t,this.database=n||"(default)"}return C(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function iu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function au(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ou(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function uu(e){return null==e}function su(e){return 0===e&&1/e==-1/0}function cu(e){return"number"==typeof e&&Number.isInteger(e)&&!su(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var lu=function(e){O(n,e);var t=R(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return C(n)}(F(Error));var fu=function(e){function t(e){T(this,t),this.binaryString=e}return C(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return bo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new lu("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();fu.EMPTY_BYTE_STRING=new fu("");var hu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function du(e){if(io(!!e),"string"==typeof e){var t=0,n=hu.exec(e);if(io(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vu(e.seconds),nanos:vu(e.nanos)}}function vu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function pu(e){return"string"==typeof e?fu.fromBase64String(e):fu.fromUint8Array(e)}function yu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function mu(e){var t=e.mapValue.fields.__previous_value__;return yu(t)?mu(t):t}function gu(e){var t=du(e.mapValue.fields.__local_write_time__.timestampValue);return new So(t.seconds,t.nanos)}var ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bu={nullValue:"NULL_VALUE"};function wu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yu(e)?4:Ru(e)?9007199254740991:10:ro()}function xu(e,t){if(e===t)return!0;var n=wu(e);if(n!==wu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gu(e).isEqual(gu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=du(e.timestampValue),r=du(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return pu(e.bytesValue).isEqual(pu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vu(e.geoPointValue.latitude)===vu(t.geoPointValue.latitude)&&vu(e.geoPointValue.longitude)===vu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vu(e.integerValue)===vu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=vu(e.doubleValue),r=vu(t.doubleValue);return n===r?su(n)===su(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wo(e.arrayValue.values||[],t.arrayValue.values||[],xu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(iu(n)!==iu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xu(n[i],r[i])))return!1;return!0}(e,t);default:return ro()}}function Su(e,t){return void 0!==(e.values||[]).find((function(e){return xu(e,t)}))}function Eu(e,t){if(e===t)return 0;var n=wu(e),r=wu(t);if(n!==r)return bo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=vu(e.integerValue||e.doubleValue),r=vu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _u(e.timestampValue,t.timestampValue);case 4:return _u(gu(e),gu(t));case 5:return bo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=pu(e),r=pu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=bo(n[i],r[i]);if(0!==a)return a}return bo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=bo(vu(e.latitude),vu(t.latitude));return 0!==n?n:bo(vu(e.longitude),vu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Eu(n[i],r[i]);if(a)return a}return bo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ku.mapValue&&t===ku.mapValue)return 0;if(e===ku.mapValue)return 1;if(t===ku.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=bo(r[o],a[o]);if(0!==u)return u;var s=Eu(n[r[o]],i[a[o]]);if(0!==s)return s}return bo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ro()}}function _u(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bo(e,t);var n=du(e),r=du(t),i=bo(n.seconds,r.seconds);return 0!==i?i:bo(n.nanos,r.nanos)}function Tu(e){return Iu(e)}function Iu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=du(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?pu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Do.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=D(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Iu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=D(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Iu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ro();var t,n}function Cu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Du(e){return!!e&&"integerValue"in e}function Nu(e){return!!e&&"arrayValue"in e}function Au(e){return!!e&&"nullValue"in e}function Ou(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pu(e){return!!e&&"mapValue"in e}function Lu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return au(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Lu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Lu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ru(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mu(e){return"nullValue"in e?bu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Cu(ru.empty(),Do.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ro()}function Fu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Cu(ru.empty(),Do.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ku:ro()}function Vu(e,t){var n=Eu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Uu(e,t){var n=Eu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Bu=C((function e(t,n){T(this,e),this.position=t,this.inclusive=n}));function ju(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Do.comparator(Do.fromName(o.referenceValue),n.key):Eu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function zu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!xu(e.position[n],t.position[n]))return!1;return!0}var qu=C((function e(){T(this,e)})),Ku=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return C(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Eu(t,this.value)):null!==t&&wu(this.value)===wu(t)&&this.matchesComparison(Eu(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ro()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new es(e,t,r):"array-contains"===t?new is(e,r):"in"===t?new as(e,r):"not-in"===t?new os(e,r):"array-contains-any"===t?new us(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ts(e,n):new ns(e,n)}}]),n}(qu),Gu=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).filters=e,i.op=r,i.ft=null,i}return C(n,[{key:"matches",value:function(e){return Qu(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=D(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(qu);function Qu(e){return"and"===e.op}function Hu(e){return"or"===e.op}function Wu(e){return $u(e)&&Qu(e)}function $u(e){var t,n=D(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Gu)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Xu(e){if(e instanceof Ku)return e.field.canonicalString()+e.op.toString()+Tu(e.value);if(Wu(e))return e.filters.map((function(e){return Xu(e)})).join(",");var t=e.filters.map((function(e){return Xu(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Yu(e,t){return e instanceof Ku?function(e,t){return t instanceof Ku&&e.op===t.op&&e.field.isEqual(t.field)&&xu(e.value,t.value)}(e,t):e instanceof Gu?function(e,t){return t instanceof Gu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Yu(n,t.filters[r])}),!0)}(e,t):void ro()}function Ju(e,t){var n=e.filters.concat(t);return Gu.create(n,e.op)}function Zu(e){return e instanceof Ku?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Tu(e.value))}(e):e instanceof Gu?function(e){return e.op.toString()+" {"+e.getFilters().map(Zu).join(" ,")+"}"}(e):"Filter"}var es=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,e,r,i)).key=Do.fromName(i.referenceValue),a}return C(n,[{key:"matches",value:function(e){var t=Do.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ku),ts=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,"in",r)).keys=rs("in",r),i}return C(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ku),ns=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,"not-in",r)).keys=rs("not-in",r),i}return C(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ku);function rs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Do.fromName(e.referenceValue)}))}var is=function(e){O(n,e);var t=R(n);function n(e,r){return T(this,n),t.call(this,e,"array-contains",r)}return C(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Nu(t)&&Su(t.arrayValue,this.value)}}]),n}(Ku),as=function(e){O(n,e);var t=R(n);function n(e,r){return T(this,n),t.call(this,e,"in",r)}return C(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Su(this.value.arrayValue,t)}}]),n}(Ku),os=function(e){O(n,e);var t=R(n);function n(e,r){return T(this,n),t.call(this,e,"not-in",r)}return C(n,[{key:"matches",value:function(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Su(this.value.arrayValue,t)}}]),n}(Ku),us=function(e){O(n,e);var t=R(n);function n(e,r){return T(this,n),t.call(this,e,"array-contains-any",r)}return C(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Nu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Su(t.value.arrayValue,e)}))}}]),n}(Ku),ss=C((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";T(this,e),this.field=t,this.dir=n}));function cs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var ls=function(){function e(t,n){T(this,e),this.comparator=t,this.root=n||hs.EMPTY}return C(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,hs.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hs.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new fs(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new fs(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new fs(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new fs(this.root,e,this.comparator,!0)}}]),e}(),fs=function(){function e(t,n,r,i){T(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return C(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),hs=function(){function e(t,n,r,i,a){T(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return C(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ro();if(this.right.isRed())throw ro();var e=this.left.check();if(e!==this.right.check())throw ro();return e+(this.isRed()?0:1)}}]),e}();hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1,hs.EMPTY=new(function(){function e(){T(this,e),this.size=0}return C(e,[{key:"key",get:function(){throw ro()}},{key:"value",get:function(){throw ro()}},{key:"color",get:function(){throw ro()}},{key:"left",get:function(){throw ro()}},{key:"right",get:function(){throw ro()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new hs(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ds=function(){function e(t){T(this,e),this.comparator=t,this.data=new ls(this.comparator)}return C(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new vs(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new vs(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),vs=function(){function e(t){T(this,e),this.iter=t}return C(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ps(e){return e.hasNext()?e.getNext():void 0}var ys=function(){function e(t){T(this,e),this.fields=t,t.sort(Co.comparator)}return C(e,[{key:"unionWith",value:function(t){var n,r=new ds(Co.comparator),i=D(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=D(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=D(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return wo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),ms=function(){function e(t){T(this,e),this.value=t}return C(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Pu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(t)}},{key:"setAll",value:function(e){var t=this,n=Co.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Lu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Pu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return xu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Pu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){au(t,(function(t,n){return e[t]=n}));var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Lu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function gs(e){var t=[];return au(e.fields,(function(e,n){var r=new Co([e]);if(Pu(n)){var i=gs(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=D(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ys(t)}var ks=function(){function e(t,n,r,i,a,o,u){T(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return C(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Eo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Eo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Eo.min(),Eo.min(),Eo.min(),ms.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Eo.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Eo.min(),Eo.min(),ms.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Eo.min(),Eo.min(),ms.empty(),2)}}]),e}(),bs=C((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;T(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this._t=null}));function ws(e){return new bs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function xs(e){var t=ao(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Xu(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),uu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Tu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Tu(e)})).join(",")),t._t=n}return t._t}function Ss(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!cs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Yu(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zu(e.startAt,t.startAt)&&zu(e.endAt,t.endAt)}function Es(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function _s(e,t){return e.filters.filter((function(e){return e instanceof Ku&&e.field.isEqual(t)}))}function Ts(e,t,n){var r,i=bu,a=!0,o=D(_s(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=bu,c=!0;switch(u.op){case"<":case"<=":s=Mu(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=bu}Vu({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Vu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Is(e,t,n){var r,i=ku,a=!0,o=D(_s(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ku,c=!0;switch(u.op){case">=":case">":s=Fu(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ku}Uu({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Uu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Cs=C((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;T(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this.gt=null,this.startAt,this.endAt}));function Ds(e,t,n,r,i,a,o,u){return new Cs(e,t,n,r,i,a,o,u)}function Ns(e){return new Cs(e)}function As(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Os(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ps(e){var t,n=D(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Ls(e){return null!==e.collectionGroup}function Rs(e){var t=ao(e);if(null===t.wt){t.wt=[];var n=Ps(t),r=Os(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new ss(n)),t.wt.push(new ss(Co.keyField(),"asc"));else{var i,a=!1,o=D(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new ss(Co.keyField(),s))}}}return t.wt}function Ms(e){var t=ao(e);if(!t.gt)if("F"===t.limitType)t.gt=ws(t.path,t.collectionGroup,Rs(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=D(Rs(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ss(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Bu(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Bu(t.startAt.position,t.startAt.inclusive):null;t.gt=ws(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.gt}function Fs(e,t){t.getFirstInequalityField(),Ps(e);var n=e.filters.concat([t]);return new Cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vs(e,t,n){return new Cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Us(e,t){return Ss(Ms(e),Ms(t))&&e.limitType===t.limitType}function Bs(e){return"".concat(xs(Ms(e)),"|lt:").concat(e.limitType)}function js(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Zu(e)})).join(", "),"]")),uu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Tu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Tu(e)})).join(",")),"Target(".concat(t,")")}(Ms(e)),"; limitType=").concat(e.limitType,")")}function zs(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Do.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=D(Rs(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=D(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=ju(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Rs(e),t))&&!(e.endAt&&!function(e,t,n){var r=ju(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Rs(e),t))}(e,t)}function qs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ks(e){return function(t,n){var r,i=!1,a=D(Rs(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Gs(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Gs(e,t,n){var r=e.field.isKeyField()?Do.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Eu(r,i):ro()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ro()}}function Qs(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(t)?"-0":t}}function Hs(e){return{integerValue:""+e}}function Ws(e,t){return cu(t)?Hs(t):Qs(e,t)}var $s=C((function e(){T(this,e),this._=void 0}));function Xs(e,t,n){return e instanceof Zs?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ec?tc(e,t):e instanceof nc?rc(e,t):function(e,t){var n=Js(e,t),r=ac(n)+ac(e.It);return Du(n)&&Du(e.It)?Hs(r):Qs(e.Tt,r)}(e,t)}function Ys(e,t,n){return e instanceof ec?tc(e,t):e instanceof nc?rc(e,t):n}function Js(e,t){return e instanceof ic?Du(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Zs=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n)}($s),ec=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this)).elements=e,r}return C(n)}($s);function tc(e,t){var n,r=oc(t),i=D(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return xu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var nc=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this)).elements=e,r}return C(n)}($s);function rc(e,t){var n,r=oc(t),i=D(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!xu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ic=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).Tt=e,i.It=r,i}return C(n)}($s);function ac(e){return vu(e.integerValue||e.doubleValue)}function oc(e){return Nu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var uc=C((function e(t,n){T(this,e),this.field=t,this.transform=n}));var sc=C((function e(t,n){T(this,e),this.version=t,this.transformResults=n})),cc=function(){function e(t,n){T(this,e),this.updateTime=t,this.exists=n}return C(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function lc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var fc=C((function e(){T(this,e)}));function hc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ec(e.key,cc.none()):new mc(e.key,e.data,cc.none());var n,r=e.data,i=ms.empty(),a=new ds(Co.comparator),o=D(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new gc(e.key,i,new ys(a.toArray()),cc.none())}function dc(e,t,n){e instanceof mc?function(e,t,n){var r=e.value.clone(),i=bc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gc?function(e,t,n){if(lc(e.precondition,t)){var r=bc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(kc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vc(e,t,n,r){return e instanceof mc?function(e,t,n,r){if(!lc(e.precondition,t))return n;var i=e.value.clone(),a=wc(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof gc?function(e,t,n,r){if(!lc(e.precondition,t))return n;var i=wc(e.fieldTransforms,r,t),a=t.data;return a.setAll(kc(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return lc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function pc(e,t){var n,r=null,i=D(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Js(a.transform,o||null);null!=u&&(null===r&&(r=ms.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function yc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ec&&t instanceof ec||e instanceof nc&&t instanceof nc?wo(e.elements,t.elements,xu):e instanceof ic&&t instanceof ic?xu(e.It,t.It):e instanceof Zs&&t instanceof Zs}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var mc=function(e){O(n,e);var t=R(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return T(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return C(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fc),gc=function(e){O(n,e);var t=R(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return T(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return C(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(fc);function kc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bc(e,t,n){var r=new Map;io(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ys(o,u,n[i]))}return r}function wc(e,t,n){var r,i=new Map,a=D(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Xs(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var xc,Sc,Ec=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return C(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fc),_c=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return C(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fc),Tc=C((function e(t){T(this,e),this.count=t}));function Ic(e){switch(e){default:return ro();case oo.CANCELLED:case oo.UNKNOWN:case oo.DEADLINE_EXCEEDED:case oo.RESOURCE_EXHAUSTED:case oo.INTERNAL:case oo.UNAVAILABLE:case oo.UNAUTHENTICATED:return!1;case oo.INVALID_ARGUMENT:case oo.NOT_FOUND:case oo.ALREADY_EXISTS:case oo.PERMISSION_DENIED:case oo.FAILED_PRECONDITION:case oo.ABORTED:case oo.OUT_OF_RANGE:case oo.UNIMPLEMENTED:case oo.DATA_LOSS:return!0}}function Cc(e){if(void 0===e)return eo("GRPC error has no .code"),oo.UNKNOWN;switch(e){case xc.OK:return oo.OK;case xc.CANCELLED:return oo.CANCELLED;case xc.UNKNOWN:return oo.UNKNOWN;case xc.DEADLINE_EXCEEDED:return oo.DEADLINE_EXCEEDED;case xc.RESOURCE_EXHAUSTED:return oo.RESOURCE_EXHAUSTED;case xc.INTERNAL:return oo.INTERNAL;case xc.UNAVAILABLE:return oo.UNAVAILABLE;case xc.UNAUTHENTICATED:return oo.UNAUTHENTICATED;case xc.INVALID_ARGUMENT:return oo.INVALID_ARGUMENT;case xc.NOT_FOUND:return oo.NOT_FOUND;case xc.ALREADY_EXISTS:return oo.ALREADY_EXISTS;case xc.PERMISSION_DENIED:return oo.PERMISSION_DENIED;case xc.FAILED_PRECONDITION:return oo.FAILED_PRECONDITION;case xc.ABORTED:return oo.ABORTED;case xc.OUT_OF_RANGE:return oo.OUT_OF_RANGE;case xc.UNIMPLEMENTED:return oo.UNIMPLEMENTED;case xc.DATA_LOSS:return oo.DATA_LOSS;default:return ro()}}(Sc=xc||(xc={}))[Sc.OK=0]="OK",Sc[Sc.CANCELLED=1]="CANCELLED",Sc[Sc.UNKNOWN=2]="UNKNOWN",Sc[Sc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sc[Sc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sc[Sc.NOT_FOUND=5]="NOT_FOUND",Sc[Sc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sc[Sc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sc[Sc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sc[Sc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sc[Sc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sc[Sc.ABORTED=10]="ABORTED",Sc[Sc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sc[Sc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sc[Sc.INTERNAL=13]="INTERNAL",Sc[Sc.UNAVAILABLE=14]="UNAVAILABLE",Sc[Sc.DATA_LOSS=15]="DATA_LOSS";var Dc=function(){function e(t,n){T(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return C(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){au(this.inner,(function(t,n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ou(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Nc=new ls(Do.comparator);function Ac(){return Nc}var Oc=new ls(Do.comparator);function Pc(){for(var e=Oc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Lc(e){var t=Oc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Rc(){return Fc()}function Mc(){return Fc()}function Fc(){return new Dc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Vc=new ls(Do.comparator),Uc=new ds(Do.comparator);function Bc(){for(var e=Uc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var jc=new ds(bo);function zc(){return jc}var qc=function(){function e(t,n,r,i,a){T(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return C(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Kc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Eo.min(),i,zc(),Ac(),Bc())}}]),e}(),Kc=function(){function e(t,n,r,i,a){T(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return C(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Bc(),Bc(),Bc())}}]),e}(),Gc=C((function e(t,n,r,i){T(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=i})),Qc=C((function e(t,n){T(this,e),this.targetId=t,this.Rt=n})),Hc=C((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;T(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Wc=function(){function e(){T(this,e),this.Pt=0,this.vt=Yc(),this.bt=fu.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return C(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Dt",get:function(){return 0!==this.Pt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}},{key:"Nt",value:function(){var e=Bc(),t=Bc(),n=Bc();return this.vt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ro()}})),new Kc(this.bt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=Yc()}},{key:"$t",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ot",value:function(){this.Pt+=1}},{key:"Ft",value:function(){this.Pt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),$c=function(){function e(t){T(this,e),this.Lt=t,this.qt=new Map,this.Ut=Ac(),this.Kt=Xc(),this.Gt=new ds(bo)}return C(e,[{key:"Qt",value:function(e){var t,n=D(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(u){n.e(u)}finally{n.f()}var i,a=D(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.zt(o,e.key,e.At)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:ro()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var i=r.target;if(Es(i))if(0===n){var a=new Do(i.path);this.zt(t,a,ks.newNoDocument(a,Eo.min()))}else io(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Es(a.target)){var o=new Do(a.target.path);null!==t.Ut.get(o)||t.ne(i,o)||t.zt(i,o,ks.newNoDocument(o,e))}r.Ct&&(n.set(i,r.Nt()),r.kt())}}));var r=Bc();this.Kt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new qc(e,n,this.Gt,this.Ut,r);return this.Ut=Ac(),this.Kt=Xc(),this.Gt=new ds(bo),i}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.$t(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Ht(e).Ot()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new Wc,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new ds(bo),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||Za("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new Wc),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Xc(){return new ls(Do.comparator)}function Yc(){return new ls(Do.comparator)}var Jc={asc:"ASCENDING",desc:"DESCENDING"},Zc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},el={and:"AND",or:"OR"},tl=C((function e(t,n){T(this,e),this.databaseId=t,this.yt=n}));function nl(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function rl(e,t){return e.yt?t.toBase64():t.toUint8Array()}function il(e,t){return nl(e,t.toTimestamp())}function al(e){return io(!!e),Eo.fromTimestamp(function(e){var t=du(e);return new So(t.seconds,t.nanos)}(e))}function ol(e,t){return function(e){return new To(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ul(e){var t=To.fromString(e);return io(Nl(t)),t}function sl(e,t){return ol(e.databaseId,t.path)}function cl(e,t){var n=ul(t);if(n.get(1)!==e.databaseId.projectId)throw new uo(oo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new uo(oo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Do(dl(n))}function ll(e,t){return ol(e.databaseId,t)}function fl(e){var t=ul(e);return 4===t.length?To.emptyPath():dl(t)}function hl(e){return new To(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dl(e){return io(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vl(e,t,n){return{name:sl(e,t),fields:n.value.mapValue.fields}}function pl(e,t,n){var r=cl(e,t.name),i=al(t.updateTime),a=t.createTime?al(t.createTime):Eo.min(),o=new ms({mapValue:{fields:t.fields}}),u=ks.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function yl(e,t){return"found"in t?function(e,t){io(!!t.found),t.found.name,t.found.updateTime;var n=cl(e,t.found.name),r=al(t.found.updateTime),i=t.found.createTime?al(t.found.createTime):Eo.min(),a=new ms({mapValue:{fields:t.found.fields}});return ks.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){io(!!t.missing),io(!!t.readTime);var n=cl(e,t.missing),r=al(t.readTime);return ks.newNoDocument(n,r)}(e,t):ro()}function ml(e,t){var n;if(t instanceof mc)n={update:vl(e,t.key,t.value)};else if(t instanceof Ec)n={delete:sl(e,t.key)};else if(t instanceof gc)n={update:vl(e,t.key,t.data),updateMask:Dl(t.fieldMask)};else{if(!(t instanceof _c))return ro();n={verify:sl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Zs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ec)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ic)return{fieldPath:t.field.canonicalString(),increment:n.It};throw ro()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:il(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ro()}(e,t.precondition)),n}function gl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?cc.updateTime(al(e.updateTime)):void 0!==e.exists?cc.exists(e.exists):cc.none()}(t.currentDocument):cc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)io("REQUEST_TIME"===t.setToServerValue),n=new Zs;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ec(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nc(i)}else"increment"in t?n=new ic(e,t.increment):ro();var a=Co.fromServerFormat(t.fieldPath);return new uc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=cl(e,t.update.name),a=new ms({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ys(t.map((function(e){return Co.fromServerFormat(e)})))}(t.updateMask);return new gc(i,a,o,n,r)}return new mc(i,a,n,r)}if(t.delete){var u=cl(e,t.delete);return new Ec(u,n)}if(t.verify){var s=cl(e,t.verify);return new _c(s,n)}return ro()}function kl(e,t){return{documents:[ll(e,t.path)]}}function bl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ll(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ll(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Cl(Gu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Tl(e.field),direction:Sl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.yt||uu(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function wl(e){var t=fl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){io(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=xl(e);return t instanceof Gu&&Wu(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new ss(Il(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return uu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Bu(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Bu(n,t)}(n.endAt)),Ds(t,i,u,o,s,"F",c,l)}function xl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Il(e.unaryFilter.field);return Ku.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Il(e.unaryFilter.field);return Ku.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Il(e.unaryFilter.field);return Ku.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Il(e.unaryFilter.field);return Ku.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ro()}}(e):void 0!==e.fieldFilter?function(e){return Ku.create(Il(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ro()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Gu.create(e.compositeFilter.filters.map((function(e){return xl(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ro()}}(e.compositeFilter.op))}(e):ro()}function Sl(e){return Jc[e]}function El(e){return Zc[e]}function _l(e){return el[e]}function Tl(e){return{fieldPath:e.canonicalString()}}function Il(e){return Co.fromServerFormat(e.fieldPath)}function Cl(e){return e instanceof Ku?function(e){if("=="===e.op){if(Ou(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NAN"}};if(Au(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ou(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NOT_NAN"}};if(Au(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(e.field),op:El(e.op),value:e.value}}}(e):e instanceof Gu?function(e){var t=e.getFilters().map((function(e){return Cl(e)}));return 1===t.length?t[0]:{compositeFilter:{op:_l(e.op),filters:t}}}(e):ro()}function Dl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Nl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Al(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Pl(t)),t=Ol(e.get(n),t);return Pl(t)}function Ol(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Pl(e){return e+"\x01\x01"}function Ll(e){var t=e.length;if(io(t>=2),2===t)return io("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),To.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ro(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ro()}a=o+2}return new To(r)}var Rl=["userId","batchId"];function Ml(e,t){return[e,Al(t)]}function Fl(e,t,n){return[e,Al(t),n]}var Vl={},Ul=["prefixPath","collectionGroup","readTime","documentId"],Bl=["prefixPath","collectionGroup","documentId"],jl=["collectionGroup","readTime","prefixPath","documentId"],zl=["canonicalId","targetId"],ql=["targetId","path"],Kl=["path","targetId"],Gl=["collectionId","parent"],Ql=["indexId","uid"],Hl=["uid","sequenceNumber"],Wl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$l=["indexId","uid","orderedDocumentKey"],Xl=["userId","collectionPath","documentId"],Yl=["userId","collectionPath","largestBatchId"],Jl=["userId","collectionGroup","largestBatchId"],Zl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ef=[].concat(ce(Zl),["documentOverlays"]),tf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nf=tf,rf=[].concat(nf,["indexConfiguration","indexState","indexEntries"]),af=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).re=e,i.currentSequenceNumber=r,i}return C(n)}(Bo);function of(e,t){var n=ao(e);return Go.M(n.re,t)}var uf=function(){function e(t,n,r,i){T(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return C(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&dc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=D(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=vc(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=D(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=vc(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Mc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=hc(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Eo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Bc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(function(e,t){return yc(e,t)}))&&wo(this.baseMutations,e.baseMutations,(function(e,t){return yc(e,t)}))}}]),e}(),sf=function(){function e(t,n,r,i){T(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return C(e,null,[{key:"from",value:function(t,n,r){io(t.mutations.length===r.length);for(var i=Vc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),cf=function(){function e(t,n){T(this,e),this.largestBatchId=t,this.mutation=n}return C(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),lf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Eo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Eo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fu.EMPTY_BYTE_STRING;T(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return C(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ff=C((function e(t){T(this,e),this.oe=t}));function hf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:df(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:sl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:nl(e,t.version.toTimestamp()),createTime:nl(e,t.createTime.toTimestamp())}}(e.oe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:vf(t.version)};else{if(!t.isUnknownDocument())return ro();r.unknownDocument={path:n.path.toArray(),version:vf(t.version)}}return r}function df(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function vf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function pf(e){var t=new So(e.seconds,e.nanoseconds);return Eo.fromTimestamp(t)}function yf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return gl(e.oe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return gl(e.oe,t)})),u=So.fromMillis(t.localWriteTimeMs);return new uf(t.batchId,u,n,o)}function mf(e){var t,n,r=pf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?pf(e.lastLimboFreeSnapshotVersion):Eo.min();return void 0!==e.query.documents?(io(1===(n=e.query).documents.length),t=Ms(Ns(fl(n.documents[0])))):t=function(e){return Ms(wl(e))}(e.query),new lf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,fu.fromBase64String(e.resumeToken))}function gf(e,t){var n,r=vf(t.snapshotVersion),i=vf(t.lastLimboFreeSnapshotVersion);n=Es(t.target)?kl(e.oe,t.target):bl(e.oe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:xs(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function kf(e){var t=wl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vs(t,t.limit,"L"):t}function bf(e,t){return new cf(t.largestBatchId,gl(e.oe,t.overlayMutation))}function wf(e,t){var n=t.path.lastSegment();return[e,Al(t.path.popLast()),n]}function xf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:vf(r.readTime),documentKey:Al(r.documentKey.path),largestBatchId:r.largestBatchId}}var Sf=function(){function e(){T(this,e)}return C(e,[{key:"getBundleMetadata",value:function(e,t){return Ef(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:pf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Ef(e).put({bundleId:(n=t).id,createTime:vf(al(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return _f(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:kf(t.bundledQuery),readTime:pf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return _f(e).put(function(e){return{name:e.name,readTime:vf(al(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ef(e){return of(e,"bundles")}function _f(e){return of(e,"namedQueries")}var Tf=function(){function e(t,n){T(this,e),this.Tt=t,this.userId=n}return C(e,[{key:"getOverlay",value:function(e,t){var n=this;return If(e).get(wf(this.userId,t)).next((function(e){return e?bf(n.Tt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Rc();return qo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new cf(t,a);i.push(r.ce(e,o))})),qo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Al(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(If(e).Y("collectionPathOverlayIndex",i))})),qo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Rc(),a=Al(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return If(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=bf(r.Tt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Rc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return If(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=bf(a.Tt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ce",value:function(e,t){return If(e).put(function(e,t,n){var r=f(wf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ml(e.oe,n.mutation)}}(this.Tt,this.userId,t))}}],[{key:"ue",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function If(e){return of(e,"documentOverlays")}var Cf=function(){function e(){T(this,e)}return C(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(vu(e.integerValue));else if("doubleValue"in e){var n=vu(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),su(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(pu(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?Ru(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):ro()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.we(a,t),this.he(n[a],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.he(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),Do.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();function Df(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Nf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Df(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Cf.Ee=new Cf;var Af=function(){function e(){T(this,e),this.buffer=new Uint8Array(1024),this.position=0}return C(e,[{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Ve()}},{key:"Se",value:function(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"De",value:function(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ve()}},{key:"Ce",value:function(e){var t=this.xe(e),n=Nf(t);this.Ne(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"ke",value:function(e){var t=this.xe(e),n=Nf(t);this.Ne(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$e",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Be",value:function(){return this.buffer.slice(0,this.position)}},{key:"xe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"Ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.Ne(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.Ne(1),this.buffer[this.position++]=~e}},{key:"Ne",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Of=function(){function e(t){T(this,e),this.Le=t}return C(e,[{key:"ge",value:function(e){this.Le.Ae(e)}},{key:"_e",value:function(e){this.Le.Se(e)}},{key:"de",value:function(e){this.Le.Ce(e)}},{key:"le",value:function(){this.Le.$e()}}]),e}(),Pf=function(){function e(t){T(this,e),this.Le=t}return C(e,[{key:"ge",value:function(e){this.Le.ve(e)}},{key:"_e",value:function(e){this.Le.De(e)}},{key:"de",value:function(e){this.Le.ke(e)}},{key:"le",value:function(){this.Le.Oe()}}]),e}(),Lf=function(){function e(){T(this,e),this.Le=new Af,this.qe=new Of(this.Le),this.Ue=new Pf(this.Le)}return C(e,[{key:"seed",value:function(e){this.Le.seed(e)}},{key:"Ke",value:function(e){return 0===e?this.qe:this.Ue}},{key:"Be",value:function(){return this.Le.Be()}},{key:"reset",value:function(){this.Le.reset()}}]),e}(),Rf=function(){function e(t,n,r,i){T(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return C(e,[{key:"Ge",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Mf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ff(e.arrayValue,t.arrayValue))?n:0!==(n=Ff(e.directionalValue,t.directionalValue))?n:Do.comparator(e.documentKey,t.documentKey)}function Ff(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Vf=function(){function e(t){T(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Qe=t.orderBy,this.je=[];var n,r=D(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.ze=i:this.je.push(i)}}catch(a){r.e(a)}finally{r.f()}}return C(e,[{key:"We",value:function(e){io(e.collectionGroup===this.collectionId);var t=Ao(e);if(void 0!==t&&!this.He(t))return!1;for(var n=Oo(e),r=0,i=0;r<n.length&&this.He(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.ze){var a=n[r];if(!this.Je(this.ze,a)||!this.Ye(this.Qe[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Qe.length||!this.Ye(this.Qe[i++],o))return!1}return!0}},{key:"He",value:function(e){var t,n=D(this.je);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ye",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Uf(e){var t,n;if(io(e instanceof Ku||e instanceof Gu),e instanceof Ku){if(e instanceof as){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ku.create(e.field,"==",t)})))||[];return Gu.create(r,"or")}return e}var i=e.filters.map((function(e){return Uf(e)}));return Gu.create(i,e.op)}function Bf(e){if(0===e.getFilters().length)return[];var t=Kf(Uf(e));return io(qf(t)),jf(t)||zf(t)?[t]:t.getFilters()}function jf(e){return e instanceof Ku}function zf(e){return e instanceof Gu&&Wu(e)}function qf(e){return jf(e)||zf(e)||function(e){if(e instanceof Gu&&Hu(e)){var t,n=D(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!jf(r)&&!zf(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Kf(e){if(io(e instanceof Ku||e instanceof Gu),e instanceof Ku)return e;if(1===e.filters.length)return Kf(e.filters[0]);var t=e.filters.map((function(e){return Kf(e)})),n=Gu.create(t,e.op);return qf(n=Hf(n))?n:(io(n instanceof Gu),io(Qu(n)),io(n.filters.length>1),n.filters.reduce((function(e,t){return Gf(e,t)})))}function Gf(e,t){var n;return io(e instanceof Ku||e instanceof Gu),io(t instanceof Ku||t instanceof Gu),n=e instanceof Ku?t instanceof Ku?function(e,t){return Gu.create([e,t],"and")}(e,t):Qf(e,t):t instanceof Ku?Qf(t,e):function(e,t){if(io(e.filters.length>0&&t.filters.length>0),Qu(e)&&Qu(t))return Ju(e,t.getFilters());var n=Hu(e)?e:t,r=Hu(e)?t:e,i=n.filters.map((function(e){return Gf(e,r)}));return Gu.create(i,"or")}(e,t),Hf(n)}function Qf(e,t){if(Qu(t))return Ju(t,e.getFilters());var n=t.filters.map((function(t){return Gf(e,t)}));return Gu.create(n,"or")}function Hf(e){if(io(e instanceof Ku||e instanceof Gu),e instanceof Ku)return e;var t=e.getFilters();if(1===t.length)return Hf(t[0]);if($u(e))return e;var n=t.map((function(e){return Hf(e)})),r=[];return n.forEach((function(t){t instanceof Ku?r.push(t):t instanceof Gu&&(t.op===e.op?r.push.apply(r,ce(t.filters)):r.push(t))})),1===r.length?r[0]:Gu.create(r,e.op)}var Wf=function(){function e(){T(this,e),this.Ze=new $f}return C(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),qo.resolve()}},{key:"getCollectionParents",value:function(e,t){return qo.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return qo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return qo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return qo.resolve(null)}},{key:"getIndexType",value:function(e,t){return qo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return qo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return qo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return qo.resolve(Fo.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return qo.resolve(Fo.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return qo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return qo.resolve()}}]),e}(),$f=function(){function e(){T(this,e),this.index={}}return C(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ds(To.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ds(To.comparator)).toArray()}}]),e}(),Xf=new Uint8Array(0),Yf=function(){function e(t,n){T(this,e),this.user=t,this.databaseId=n,this.Xe=new $f,this.tn=new Dc((function(e){return xs(e)}),(function(e,t){return Ss(e,t)})),this.uid=t.uid||""}return C(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:Al(i)};return Jf(e).put(a)}return qo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[xo(t),""],!1,!0);return Jf(e).W(r).next((function(e){var r,i=D(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ll(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=eh(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=th(e);return a.next((function(e){o.put(xf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=eh(e),r=th(e),i=Zf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Zf(e),i=!0,a=new Map;return qo.forEach(this.en(t),(function(t){return n.nn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Bc(),o=[];return qo.forEach(a,(function(i,a){var u;Za("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(xs(t)));var s=function(e,t){var n=Ao(t);if(void 0===n)return null;var r,i=D(_s(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=D(Oo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=D(_s(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=D(Oo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ts(e,o.fieldPath,e.startAt):Is(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Bu(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=D(Oo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Is(e,o.fieldPath,e.endAt):Ts(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Bu(r,i)}(a,i),h=n.sn(i,a,l),d=n.sn(i,a,f),v=n.rn(i,a,c),p=n.on(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return qo.forEach(p,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Do.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return qo.resolve(null)}))}},{key:"en",value:function(e){var t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Bf(Gu.create(e.filters,"and")).map((function(t){return ws(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.tn.set(e,t),t)}},{key:"on",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.un(t[h/c]):Xf,f=u.cn(e,s,n[h%c],r),d=u.an(e,s,i[h%c],a),v=o.map((function(t){return u.cn(e,s,t,!0)}));l.push.apply(l,ce(u.createRange(f,d,v)))},h=0;h<s;++h)f();return l}},{key:"cn",value:function(e,t,n,r){var i=new Rf(e,Do.empty(),t,n);return r?i:i.Ge()}},{key:"an",value:function(e,t,n,r){var i=new Rf(e,Do.empty(),t,n);return r?i.Ge():i}},{key:"nn",value:function(e,t){var n=new Vf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=D(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.en(t);return qo.forEach(i,(function(t){return n.nn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new ds(Co.comparator),r=!1,i=D(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=D(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=D(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"hn",value:function(e,t){var n,r=new Lf,i=D(Oo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ke(a.kind);Cf.Ee.ae(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Be()}},{key:"un",value:function(e){var t=new Lf;return Cf.Ee.ae(e,t.Ke(0)),t.Be()}},{key:"ln",value:function(e,t){var n=new Lf;return Cf.Ee.ae(Cu(this.databaseId,t),n.Ke(function(e){var t=Oo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Be()}},{key:"rn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Lf);var i,a=0,o=D(Oo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=D(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.fn(t,s.fieldPath)&&Nu(c))r=this.dn(r,s,c);else{var h=f.Ke(s.kind);Cf.Ee.ae(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this._n(r)}},{key:"sn",value:function(e,t,n){return this.rn(e,t,n.position)}},{key:"_n",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Be();return t}},{key:"dn",value:function(e,t,n){var r,i=ce(e),a=[],o=D(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=D(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Lf;f.seed(l.Be()),Cf.Ee.ae(s,f.Ke(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"fn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ku&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=eh(e),i=th(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return qo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Lo(t.sequenceNumber,new Fo(pf(t.readTime),new Do(Ll(t.documentKey)),t.largestBatchId)):Lo.empty(),r=e.fields.map((function(e){var t=f(e,2),n=t[0],r=t[1];return new Po(Co.fromServerFormat(n),r)}));return new No(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:bo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=eh(e),a=th(e);return this.wn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return qo.forEach(t,(function(t){return a.put(xf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return qo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?qo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),qo.forEach(a,(function(r){return n.mn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?qo.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"pn",value:function(e,t,n,r){return Zf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.ln(n,t.key),documentKey:t.key.path.toArray()})}},{key:"In",value:function(e,t,n,r){return Zf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.ln(n,t.key),t.key.path.toArray()])}},{key:"mn",value:function(e,t,n){var r=Zf(e),i=new ds(Mf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.ln(n,t)])},(function(e,r){i=i.add(new Rf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new ds(Mf),r=this.hn(t,e);if(null==r)return n;var i=Ao(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Nu(a)){var o,u=D(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Rf(t.indexId,e.key,this.un(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Rf(t.indexId,e.key,Xf,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;Za("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ps(a),s=ps(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ps(o)):l?(i(u),u=ps(a)):(u=ps(a),s=ps(o))}}(r,i,Mf,(function(r){o.push(a.pn(e,t,n,r))}),(function(r){o.push(a.In(e,t,n,r))})),qo.waitFor(o)}},{key:"wn",value:function(e){var t=1;return th(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Mf(e,t)})).filter((function(e,t,n){return!t||0!==Mf(e,n[t-1])}));var r=[];r.push(e);var i,a=D(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Mf(o,e),s=Mf(o,t);if(0===u)r[0]=e.Ge();else if(u>0&&s<0)r.push(o),r.push(o.Ge());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Tn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Xf,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Xf,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Tn",value:function(e,t){return Mf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(nh)}},{key:"getMinOffset",value:function(e,t){var n=this;return qo.mapArray(this.en(t),(function(t){return n.nn(e,t).next((function(e){return e||ro()}))})).next(nh)}}]),e}();function Jf(e){return of(e,"collectionParents")}function Zf(e){return of(e,"indexEntries")}function eh(e){return of(e,"indexConfiguration")}function th(e){return of(e,"indexState")}function nh(e){io(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Vo(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Fo(t.readTime,t.documentKey,n)}var rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ih=function(){function e(t,n,r){T(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return C(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ah(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){io(1===u)})));var c,l=[],f=D(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Fl(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return qo.waitFor(a).next((function(){return l}))}function oh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ro();t=e.noDocument}return JSON.stringify(t).length}ih.DEFAULT_COLLECTION_PERCENTILE=10,ih.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ih.DEFAULT=new ih(41943040,ih.DEFAULT_COLLECTION_PERCENTILE,ih.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ih.DISABLED=new ih(-1,0,0);var uh=function(){function e(t,n,r,i){T(this,e),this.userId=t,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}return C(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=lh(e),o=ch(e);return o.add({}).next((function(u){io("number"==typeof u);var s,c=new uf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ml(e.oe,t)})),i=n.mutations.map((function(t){return ml(e.oe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.Tt,i.userId,c),f=[],h=new ds((function(e,t){return bo(e.canonicalString(),t.canonicalString())})),d=D(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=Fl(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,Vl))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.En[u]=c.keys()})),qo.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return ch(e).get(t).next((function(e){return e?(io(e.userId===n.userId),yf(n.Tt,e)):null}))}},{key:"An",value:function(e,t){var n=this;return this.En[t]?qo.resolve(this.En[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.En[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return ch(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(io(t.batchId>=r),a=yf(n.Tt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ch(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return yf(t.Tt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ml(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return lh(e).X({range:i},(function(r,i,o){var u=f(r,3),s=u[0],c=u[1],l=u[2],h=Ll(c);if(s===n.userId&&t.path.isEqual(h))return ch(e).get(l).next((function(e){if(!e)throw ro();io(e.userId===n.userId),a.push(yf(n.Tt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ds(bo),i=[];return t.forEach((function(t){var a=Ml(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=lh(e).X({range:o},(function(e,i,a){var o=f(e,3),u=o[0],s=o[1],c=o[2],l=Ll(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),qo.waitFor(i).next((function(){return n.Rn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ml(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new ds(bo);return lh(e).X({range:o},(function(e,t,a){var o=f(e,3),s=o[0],c=o[1],l=o[2],h=Ll(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Rn(e,u)}))}},{key:"Rn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ch(e).get(t).next((function(e){if(null===e)throw ro();io(e.userId===n.userId),r.push(yf(n.Tt,e))})))})),qo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ah(e.re,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Pn(t.batchId)})),qo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Pn",value:function(e){delete this.En[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return qo.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return lh(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ll(e[1]);i.push(a)}else r.done()})).next((function(){io(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return sh(e,this.userId,t)}},{key:"vn",value:function(e){var t=this;return fh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ue",value:function(t,n,r,i){return io(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function sh(e,t,n){var r=Ml(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return lh(e).X({range:a,Z:!0},(function(e,n,r){var a=f(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function ch(e){return of(e,"mutations")}function lh(e){return of(e,"documentMutations")}function fh(e){return of(e,"mutationQueues")}var hh=function(){function e(t){T(this,e),this.bn=t}return C(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}(),dh=function(){function e(t,n){T(this,e),this.referenceDelegate=t,this.Tt=n}return C(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Dn(e).next((function(n){var r=new hh(n.highestTargetId);return n.highestTargetId=r.next(),t.Cn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Dn(e).next((function(e){return Eo.fromTimestamp(new So(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Dn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Dn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Cn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.xn(e,t).next((function(){return n.Dn(e).next((function(r){return r.targetCount+=1,n.Nn(t,r),n.Cn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.xn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return vh(e).delete(t.targetId)})).next((function(){return n.Dn(e)})).next((function(t){return io(t.targetCount>0),t.targetCount-=1,n.Cn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return vh(e).X((function(o,u){var s=mf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return qo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return vh(e).X((function(e,n){var r=mf(n);t(r)}))}},{key:"Dn",value:function(e){return ph(e).get("targetGlobalKey").next((function(e){return io(null!==e),e}))}},{key:"Cn",value:function(e,t){return ph(e).put("targetGlobalKey",t)}},{key:"xn",value:function(e,t){return vh(e).put(gf(this.Tt,t))}},{key:"Nn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Dn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=xs(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vh(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=mf(n);Ss(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=yh(e);return t.forEach((function(t){var o=Al(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),qo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=yh(e);return qo.forEach(t,(function(t){var a=Al(t.path);return qo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=yh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=yh(e),i=Bc();return r.X({range:n,Z:!0},(function(e,t,n){var r=Ll(e[1]),a=new Do(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Al(t.path),r=IDBKeyRange.bound([n],[xo(n)],!1,!0),i=0;return yh(e).X({index:"documentTargetsIndex",Z:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ie",value:function(e,t){return vh(e).get(t).next((function(e){return e?mf(e):null}))}}]),e}();function vh(e){return of(e,"targets")}function ph(e){return of(e,"targetGlobal")}function yh(e){return of(e,"targetDocuments")}function mh(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],u=a[1],s=bo(r,o);return 0===s?bo(i,u):s}var gh=function(){function e(t){T(this,e),this.kn=t,this.buffer=new ds(mh),this.$n=0}return C(e,[{key:"Mn",value:function(){return++this.$n}},{key:"On",value:function(e){var t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();mh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),kh=function(){function e(t,n,r){T(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Fn=null}return C(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}},{key:"stop",value:function(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}},{key:"started",get:function(){return null!==this.Fn}},{key:"Bn",value:function(e){var t=this;Za("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Wo(e.t0)){e.next=12;break}Za("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,jo(e.t0);case 14:return e.next=16,t.Bn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),bh=function(){function e(t,n){T(this,e),this.Ln=t,this.params=n}return C(e,[{key:"calculateTargetCount",value:function(e,t){return this.Ln.qn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return qo.resolve(tu.at);var r=new gh(t);return this.Ln.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.Ln.Un(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Ln.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Ln.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Za("LruGarbageCollector","Garbage collection skipped; disabled"),qo.resolve(rh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Za("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),rh):n.Kn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Ln.getCacheSize(e)}},{key:"Kn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Za("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ja()<=ye.DEBUG&&Za("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),qo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),wh=function(){function e(t,n){T(this,e),this.db=t,this.garbageCollector=function(e,t){return new bh(e,t)}(this,n)}return C(e,[{key:"qn",value:function(e){var t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Gn",value:function(e){var t=0;return this.Un(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Un",value:function(e,t){return this.Qn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return xh(e,n)}},{key:"removeReference",value:function(e,t,n){return xh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return xh(e,t)}},{key:"jn",value:function(e,t){return function(e,t){var n=!1;return fh(e).tt((function(r){return sh(e,r,t).next((function(e){return e&&(n=!0),qo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Qn(e,(function(o,u){if(u<=t){var s=n.jn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Eo.min()),yh(e).delete([0,Al(o.path)])}))}));i.push(s)}})).next((function(){return qo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return xh(e,t)}},{key:"Qn",value:function(e,t){var n,r=yh(e),i=tu.at;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=f(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==tu.at&&t(new Do(Ll(n)),i),i=s,n=u):i=tu.at})).next((function(){i!==tu.at&&t(new Do(Ll(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function xh(e,t){return yh(e).put(function(e,t){return{targetId:0,path:Al(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Sh=function(){function e(){T(this,e),this.changes=new Dc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return C(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ks.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?qo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Eh=function(){function e(t){T(this,e),this.Tt=t}return C(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Ch(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Ch(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],df(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=ks.newInvalidDocument(t);return Ch(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Dh(t))},(function(e,i){r=n.Wn(t,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r={size:0,document:ks.newInvalidDocument(t)};return Ch(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Dh(t))},(function(e,i){r={document:n.Wn(t,i),size:oh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ac();return this.Jn(e,t,(function(e,t){var i=n.Wn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Yn",value:function(e,t){var n=this,r=Ac(),i=new ls(Do.comparator);return this.Jn(e,t,(function(e,t){var a=n.Wn(e,t);r=r.insert(e,a),i=i.insert(e,oh(t))})).next((function(){return{documents:r,Zn:i}}))}},{key:"Jn",value:function(e,t,n){if(t.isEmpty())return qo.resolve();var r=new ds(Ah);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Dh(r.first()),Dh(r.last())),a=r.getIterator(),o=a.getNext();return Ch(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Do.fromSegments([].concat(ce(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Ah(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Dh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),df(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ch(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Ac(),o=D(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Wn(Do.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(zs(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ac(),o=Nh(t,n),u=Nh(t,Fo.max());return Ch(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Wn(Do.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Th(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Ih(e).get("remoteDocumentGlobalKey").next((function(e){return io(!!e),e}))}},{key:"zn",value:function(e,t){return Ih(e).put("remoteDocumentGlobalKey",t)}},{key:"Wn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=pl(e.oe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Do.fromSegments(t.noDocument.path),i=pf(t.noDocument.readTime);n=ks.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ro();var a=Do.fromSegments(t.unknownDocument.path),o=pf(t.unknownDocument.version);n=ks.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new So(e[0],e[1]);return Eo.fromTimestamp(t)}(t.readTime)),n}(this.Tt,t);if(!n.isNoDocument()||!n.version.isEqual(Eo.min()))return n}return ks.newInvalidDocument(e)}}]),e}();function _h(e){return new Eh(e)}var Th=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).Xn=e,i.trackRemovals=r,i.ts=new Dc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return C(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new ds((function(e,t){return bo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ts.get(a);if(n.push(t.Xn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=hf(t.Xn.Tt,o);i=i.add(a.path.popLast());var c=oh(s);r+=c-u.size,n.push(t.Xn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=hf(t.Xn.Tt,o.convertToNoDocument(Eo.min()));n.push(t.Xn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Xn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Xn.updateMetadata(e,r)),qo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Xn.Hn(e,t).next((function(e){return n.ts.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Xn.Yn(e,t).next((function(e){var t=e.documents;return e.Zn.forEach((function(e,r){n.ts.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Sh);function Ih(e){return of(e,"remoteDocumentGlobal")}function Ch(e){return of(e,"remoteDocumentsV14")}function Dh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Nh(e,t){var n=t.documentKey.path.toArray();return[e,df(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ah(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=bo(n[a],r[a]))return i;return(i=bo(n.length,r.length))||((i=bo(n[n.length-2],r[r.length-2]))||bo(n[n.length-1],r[r.length-1]))}var Oh=C((function e(t,n){T(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Ph=function(){function e(t,n,r,i){T(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return C(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&vc(r.mutation,e,ys.empty(),So.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Bc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc(),i=Rc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Pc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Rc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Bc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ac(),a=Fc(),o=Fc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof gc)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),vc(o.mutation,t,o.mutation.getFieldMask(),So.now())):a.set(t.key,ys.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Oh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Fc(),i=new ls((function(e,t){return e-t})),a=Bc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=D(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ys.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Bc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Mc();c.forEach((function(e){if(!a.has(e)){var n=hc(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return qo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ls(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):qo.resolve(Rc()),u=-1,s=a;return o.next((function(t){return qo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?qo.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Bc())})).next((function(e){return{batchId:u,changes:Lc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Do(t)).next((function(e){var t=Pc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Pc();return this.indexManager.getCollectionParents(e,i).next((function(o){return qo.forEach(o,(function(o){var u=function(e,t){return new Cs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,ks.newInvalidDocument(r)))}));var n=Pc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&vc(a.mutation,i,ys.empty(),So.now()),zs(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Lh=function(){function e(t){T(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return C(e,[{key:"getBundleMetadata",value:function(e,t){return qo.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:al(n.createTime)}),qo.resolve()}},{key:"getNamedQuery",value:function(e,t){return qo.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:kf(e.bundledQuery),readTime:al(e.readTime)}}(t)),qo.resolve()}}]),e}(),Rh=function(){function e(){T(this,e),this.overlays=new ls(Do.comparator),this.ss=new Map}return C(e,[{key:"getOverlay",value:function(e,t){return qo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Rc();return qo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ce(e,t,i)})),qo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ss.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),qo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Rc(),i=t.length+1,a=new Do(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return qo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ls((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Rc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Rc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return qo.resolve(s)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new cf(t,n));var a=this.ss.get(t);void 0===a&&(a=Bc(),this.ss.set(t,a)),this.ss.set(t,a.add(n.key))}}]),e}(),Mh=function(){function e(){T(this,e),this.rs=new ds(Fh.os),this.us=new ds(Fh.cs)}return C(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Fh(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new Fh(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new Do(new To([])),r=new Fh(n,e),i=new Fh(n,e+1),a=[];return this.us.forEachInRange([r,i],(function(e){t.ls(e),a.push(e.key)})),a}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new Do(new To([])),n=new Fh(t,e),r=new Fh(t,e+1),i=Bc();return this.us.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Fh(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Fh=function(){function e(t,n){T(this,e),this.key=t,this.gs=n}return C(e,null,[{key:"os",value:function(e,t){return Do.comparator(e.key,t.key)||bo(e.gs,t.gs)}},{key:"cs",value:function(e,t){return bo(e.gs,t.gs)||Do.comparator(e.key,t.key)}}]),e}(),Vh=function(){function e(t,n){T(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new ds(Fh.os)}return C(e,[{key:"checkEmpty",value:function(e){return qo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new uf(i,t,n,r);this.mutationQueue.push(a);var o,u=D(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ps=this.ps.add(new Fh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return qo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return qo.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),i=r<0?0:r;return qo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return qo.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return qo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Fh(t,0),i=new Fh(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],(function(e){var t=n.Is(e.gs);a.push(t)})),qo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ds(bo);return t.forEach((function(e){var t=new Fh(e,0),i=new Fh(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,i],(function(e){r=r.add(e.gs)}))})),qo.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Do.isDocumentKey(i)||(i=i.child(""));var a=new Fh(new Do(i),0),o=new ds(bo);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gs)),!0)}),a),qo.resolve(this.Es(o))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;io(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return qo.forEach(t.mutations,(function(i){var a=new Fh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ps=r}))}},{key:"Pn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Fh(t,0),r=this.ps.firstAfterOrEqual(n);return qo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,qo.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Uh=function(){function e(t){T(this,e),this.Rs=t,this.docs=new ls(Do.comparator),this.size=0}return C(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return qo.resolve(n?n.document.mutableCopy():ks.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ac();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ks.newInvalidDocument(e))})),qo.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Ac(),a=t.path,o=new Do(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Vo(Mo(l),n)<=0||(r.has(l.key)||zs(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return qo.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ro()}},{key:"Ps",value:function(e,t){return qo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Bh(this)}},{key:"getSize",value:function(e){return qo.resolve(this.size)}}]),e}(),Bh=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this)).Xn=e,r}return C(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Xn.addEntry(e,i)):t.Xn.removeEntry(r)})),qo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(Sh),jh=function(){function e(t){T(this,e),this.persistence=t,this.vs=new Dc((function(e){return xs(e)}),Ss),this.lastRemoteSnapshotVersion=Eo.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Mh,this.targetCount=0,this.Ss=hh.Vn()}return C(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),qo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return qo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return qo.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),qo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),qo.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new hh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,qo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),qo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,qo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.vs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.vs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),qo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return qo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return qo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),qo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),qo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),qo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return qo.resolve(n)}},{key:"containsKey",value:function(e,t){return qo.resolve(this.Vs.containsKey(t))}}]),e}(),zh=function(){function e(t,n){var r=this;T(this,e),this.Ds={},this.overlays={},this.Cs=new tu(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new jh(this),this.indexManager=new Wf,this.remoteDocumentCache=new Uh((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new ff(n),this.$s=new Lh(this.Tt)}return C(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Rh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new Vh(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;Za("MemoryPersistence","Starting transaction:",e);var i=new qh(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e,t){return qo.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),qh=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return C(n)}(Bo),Kh=function(){function e(t){T(this,e),this.persistence=t,this.Bs=new Mh,this.Ls=null}return C(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw ro()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),qo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),qo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),qo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qo.forEach(this.Us,(function(r){var i=Do.fromPath(r);return t.Ks(e,i).next((function(e){e||n.removeEntry(i,Eo.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return qo.or([function(){return qo.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Fs(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}(),Gh=function(){function e(t){T(this,e),this.Tt=t}return C(e,[{key:"F",value:function(e,t,n,r){var i=this,a=new Ko("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rl,{unique:!0}),e.createObjectStore("documentMutations")}(e),Qh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=qo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Qh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Eo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rl,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return qo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.js(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ws(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Xl});t.createIndex("collectionPathOverlayIndex",Yl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Jl,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ul});t.createIndex("documentKeyIndex",Bl),t.createIndex("collectionGroupIndex",jl)}(e)})).next((function(){return i.Hs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ql}).createIndex("sequenceNumberIndex",Hl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Wl}).createIndex("documentKeyIndex",$l,{unique:!1})}(e)}))),o}},{key:"Qs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=oh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return qo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return qo.forEach(r,(function(r){io(r.userId===n.userId);var i=yf(t.Tt,r);return ah(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"js",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new To(n),o=function(e){return[0,Al(e)]}(a);r.push(t.get(o).next((function(n){return n?qo.resolve():function(n){return t.put({targetId:0,path:Al(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return qo.waitFor(r)}))}))}},{key:"zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Gl});var n=t.store("collectionParents"),r=new $f,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Al(i)})}};return t.store("remoteDocuments").X({Z:!0},(function(e,t){var n=new To(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Z:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],Ll(r));return i(a.popLast())}))}))}},{key:"Ws",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=mf(r),a=gf(t.Tt,i);return n.put(a)}))}},{key:"Hs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Do(To.fromString(i.document.name).popFirst(5)):i.noDocument?Do.fromSegments(i.noDocument.path):i.unknownDocument?Do.fromSegments(i.unknownDocument.path):ro()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return qo.waitFor(r)}))}},{key:"Js",value:function(e,t){var n=this,r=t.store("mutations"),i=_h(this.Tt),a=new zh(Kh.qs,this.Tt.oe);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Bc();yf(n.Tt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),qo.forEach(r,(function(e,r){var o=new $a(r),u=Tf.ue(n.Tt,o),s=a.getIndexManager(o),c=uh.ue(o,n.Tt,s,a.referenceDelegate);return new Ph(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new af(t,tu.at),e).next()}))}))}}]),e}();function Qh(e){e.createObjectStore("targetDocuments",{keyPath:ql}).createIndex("documentTargetsIndex",Kl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zl,{unique:!0}),e.createObjectStore("targetGlobal")}var Hh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Wh=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(T(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=o,this.document=u,this.Zs=c,this.Xs=l,this.ti=f,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=function(e){return Promise.resolve()},!e.C())throw new uo(oo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wh(this,i),this.oi=n+"main",this.Tt=new ff(s),this.ui=new Go(this.oi,this.ti,new Gh(this.Tt)),this.Ns=new dh(this.referenceDelegate,this.Tt),this.remoteDocumentCache=_h(this.Tt),this.$s=new Sf,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===l&&eo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return C(e,[{key:"start",value:function(){var e=this;return this.ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new uo(oo.FAILED_PRECONDITION,Hh);return e.hi(),e.li(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ns.getHighestSequenceNumber(t)}))})).then((function(t){e.Cs=new tu(t,e.Zs)})).then((function(){e.xs=!0})).catch((function(t){return e.ui&&e.ui.close(),Promise.reject(t)}))}},{key:"di",value:function(e){var t=this;return this.ri=function(){var n=fe(se().mark((function n(r){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ui.L(function(){var t=fe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Xh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e._i(t).next((function(t){t||(e.isPrimary=!1,e.Ys.enqueueRetryable((function(){return e.ri(!1)})))}))})).next((function(){return e.wi(t)})).next((function(n){return e.isPrimary&&!n?e.mi(t).next((function(){return!1})):!!n&&e.gi(t).next((function(){return!0}))}))})).catch((function(t){if(Wo(t))return Za("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Za("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ys.enqueueRetryable((function(){return e.ri(t)})),e.isPrimary=t}))}},{key:"_i",value:function(e){var t=this;return $h(e).get("owner").next((function(e){return qo.resolve(t.yi(e))}))}},{key:"pi",value:function(e){return Xh(e).delete(this.clientId)}},{key:"Ii",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ti(this.ii,18e5)){e.next=6;break}return this.ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=of(e,"clientMetadata");return t.W().next((function(e){var n=a.Ei(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return qo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ci){n=D(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ci.removeItem(this.Ai(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ai().then((function(){return e.Ii()})).then((function(){return e.fi()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"wi",value:function(e){var t=this;return this.Xs?qo.resolve(!0):$h(e).get("owner").next((function(n){if(null!==n&&t.Ti(n.leaseTimestampMs,5e3)&&!t.Ri(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new uo(oo.FAILED_PRECONDITION,Hh);return!1}}return!(!t.networkEnabled||!t.inForeground)||Xh(e).W().next((function(e){return void 0===t.Ei(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Za("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=fe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),e.next=7,this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new af(e,tu.at);return t.mi(n).next((function(){return t.pi(n)}))}));case 7:this.ui.close(),this.Vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ei",value:function(e,t){var n=this;return e.filter((function(e){return n.Ti(e.updateTimeMs,t)&&!n.Ri(e.clientId)}))}},{key:"Si",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Xh(t).W().next((function(t){return e.Ei(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xs}},{key:"getMutationQueue",value:function(e,t){return uh.ue(e,this.Tt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Yf(e,this.Tt.oe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Tf.ue(this.Tt,e)}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;Za("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ti)?rf:14===i?nf:13===i?tf:12===i?ef:11===i?Zl:void ro();return this.ui.runTransaction(e,o,u,(function(i){return a=new af(i,r.Cs?r.Cs.next():tu.at),"readwrite-primary"===t?r._i(a).next((function(e){return!!e||r.wi(a)})).next((function(t){if(!t)throw eo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ys.enqueueRetryable((function(){return r.ri(!1)})),new uo(oo.FAILED_PRECONDITION,Uo);return n(a)})).next((function(e){return r.gi(a).next((function(){return e}))})):r.Di(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Di",value:function(e){var t=this;return $h(e).get("owner").next((function(e){if(null!==e&&t.Ti(e.leaseTimestampMs,5e3)&&!t.Ri(e.ownerId)&&!t.yi(e)&&!(t.Xs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new uo(oo.FAILED_PRECONDITION,Hh)}))}},{key:"gi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $h(e).put("owner",t)}},{key:"mi",value:function(e){var t=this,n=$h(e);return n.get("owner").next((function(e){return t.yi(e)?(Za("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):qo.resolve()}))}},{key:"Ti",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(eo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"hi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=function(){e.Ys.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ai()}))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}},{key:"vi",value:function(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}},{key:"li",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=function(){t.Pi();var e=/(?:Version|Mobile)\/1[456]/;X()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ys.enterRestrictedMode(!0),t.Ys.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ei))}},{key:"bi",value:function(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}},{key:"Ri",value:function(e){var t;try{var n=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Za("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return eo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Pi",value:function(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(rn){eo("Failed to set zombie client id.",rn)}}},{key:"Vi",value:function(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(rn){}}},{key:"Ai",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Go.C()}}]),e}();function $h(e){return of(e,"owner")}function Xh(e){return of(e,"clientMetadata")}function Yh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Jh=function(){function e(t,n,r,i){T(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=i}return C(e,null,[{key:"Ni",value:function(t,n){var r,i=Bc(),a=Bc(),o=D(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Zh=function(){function e(){T(this,e),this.ki=!1}return C(e,[{key:"initialize",value:function(e,t){this.$i=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Mi(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Fi(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(As(t))return qo.resolve(null);var r=Ms(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Vs(t,null,"F"),r=Ms(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Bc.apply(void 0,ce(i));return n.$i.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Bi(t,i);return n.Li(t,o,a,r.readTime)?n.Mi(e,Vs(t,null,"F")):n.qi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return As(t)||r.isEqual(Eo.min())?this.Fi(e,t):this.$i.getDocuments(e,n).next((function(a){var o=i.Bi(t,a);return i.Li(t,o,n,r)?i.Fi(e,t):(Ja()<=ye.DEBUG&&Za("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),js(t)),i.qi(e,o,t,Ro(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new ds(Ks(e));return t.forEach((function(t,r){zs(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fi",value:function(e,t){return Ja()<=ye.DEBUG&&Za("QueryEngine","Using full collection scan to execute query:",js(t)),this.$i.getDocumentsMatchingQuery(e,t,Fo.min())}},{key:"qi",value:function(e,t,n,r){return this.$i.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),ed=function(){function e(t,n,r,i){T(this,e),this.persistence=t,this.Ui=n,this.Tt=i,this.Ki=new ls(bo),this.Gi=new Dc((function(e){return xs(e)}),Ss),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.$s=t.getBundleCache(),this.zi(r)}return C(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ph(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function td(e,t,n,r){return new ed(e,t,n,r)}function nd(e,t){return rd.apply(this,arguments)}function rd(){return rd=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Bc(),s=D(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=D(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=D(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=D(p.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Wi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),rd.apply(this,arguments)}function id(e,t){var n=ao(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=qo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);io(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Bc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function ad(e){var t=ao(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function od(e,t){var n=ao(e),r=t.snapshotVersion,i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ns.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ns.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(fu.EMPTY_BYTE_STRING,Eo.min()).withLastLimboFreeSnapshotVersion(Eo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ns.updateTargetData(e,c))}}));var u=Ac(),s=Bc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ud(e,a,t.documentUpdates).next((function(e){u=e.Hi,s=e.Ji}))),!r.isEqual(Eo.min())){var c=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return qo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ki=i,e}))}function ud(e,t,n){var r=Bc(),i=Bc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ac();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Eo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Za("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Hi:r,Ji:i}}))}function sd(e,t){var n=ao(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function cd(e,t){var n=ao(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(i){return i?(r=i,qo.resolve(r)):n.Ns.allocateTargetId(e).next((function(i){return r=new lf(t,i,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function ld(e,t,n){return fd.apply(this,arguments)}function fd(){return fd=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ao(t),a=i.Ki.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Wo(e.t1)){e.next=12;break}throw e.t1;case 12:Za("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ki=i.Ki.remove(n),i.Gi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),fd.apply(this,arguments)}function hd(e,t,n){var r=ao(e),i=Eo.min(),a=Bc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ao(e),i=r.Gi.get(n);return void 0!==i?qo.resolve(r.Ki.get(i)):r.Ns.getTargetData(t,n)}(r,e,Ms(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?i:Eo.min(),n?a:Bc())})).next((function(e){return pd(r,qs(t),e),{documents:e,Yi:a}}))}))}function dd(e,t){var n=ao(e),r=ao(n.Ns),i=n.Ki.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ie(e,t).next((function(e){return e?e.target:null}))}))}function vd(e,t){var n=ao(e),r=n.Qi.get(t)||Eo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ji.getAllFromCollectionGroup(e,t,Ro(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return pd(n,t,e),e}))}function pd(e,t,n){var r=e.Qi.get(t)||Eo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}function yd(e,t,n,r){return md.apply(this,arguments)}function md(){return md=fe(se().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ao(t),o=Bc(),u=Ac(),s=D(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Zi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Xi(l)).setReadTime(n.tr(l.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.ji.newChangeBuffer({trackRemovals:!0}),e.next=7,cd(a,function(e){return Ms(Ns(To.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ud(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ns.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Ns.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Hi,t.Ji)})).next((function(){return t.Hi}))}))})));case 9:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function gd(e,t){return kd.apply(this,arguments)}function kd(){return kd=fe(se().mark((function e(t,n){var r,i,a,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Bc(),e.next=3,cd(t,Ms(kf(n.bundledQuery)));case 3:return i=e.sent,a=ao(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=al(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$s.saveNamedQuery(e,n);var o=i.withResumeToken(fu.EMPTY_BYTE_STRING,t);return a.Ki=a.Ki.insert(o.targetId,o),a.Ns.updateTargetData(e,o).next((function(){return a.Ns.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ns.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),kd.apply(this,arguments)}function bd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function wd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function xd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Sd=function(){function e(t,n,r,i){T(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return C(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new uo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(eo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ed=function(){function e(t,n,r){T(this,e),this.targetId=t,this.state=n,this.error=r}return C(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new uo(i.error.code,i.error.message))),a?new e(t,i.state,r):(eo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),_d=function(){function e(t,n){T(this,e),this.clientId=t,this.activeTargetIds=n}return C(e,null,[{key:"er",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=zc(),o=0;i&&o<r.activeTargetIds.length;++o)i=cu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(eo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Td=function(){function e(t,n){T(this,e),this.clientId=t,this.onlineState=n}return C(e,null,[{key:"er",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(eo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Id=function(){function e(){T(this,e),this.activeTargetIds=zc()}return C(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Cd=function(){function e(t,n,r,i,a){T(this,e),this.window=t,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ls(bo),this.started=!1,this.hr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=bd(this.persistenceKey,this.rr),this.dr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new Id),this._r=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.wr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.mr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.gr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.yr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}return C(e,[{key:"start",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Si();case 2:t=e.sent,n=D(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.rr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(bd(this.persistenceKey,i)))&&(o=_d.er(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.pr(),(u=this.storage.getItem(this.gr))&&(s=this.Ir(u))&&this.Tr(s),c=D(this.hr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.cr(f)}catch(d){c.e(d)}finally{c.f()}this.hr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.dr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Er(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ar(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ar(e,t,n),this.Rr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(xd(this.persistenceKey,e));if(n){var r=Ed.er(e,n);r&&(t=r.state)}}return this.Pr.sr(e),this.pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Pr.ir(e),this.pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Pr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(xd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.vr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Rr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Za("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Za("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Za("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"cr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Za("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void eo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(fe(se().mark((function e(){var r,i,a,o,u,s,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t._r.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Sr(n.key),e.abrupt("return",t.Dr(r,null));case 6:if(!(i=t.Cr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Dr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.wr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Nr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.kr(a));case 16:e.next=41;break;case 18:if(!t.mr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.$r(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.gr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Ir(n.newValue))){e.next=30;break}return e.abrupt("return",t.Tr(u));case 30:e.next=41;break;case 32:if(n.key!==t.dr){e.next=37;break}s=function(e){var t=tu.at;if(null!=e)try{var n=JSON.parse(e);io("number"==typeof n),t=n}catch(e){eo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==tu.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.yr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.hr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Pr",get:function(){return this.ar.get(this.rr)}},{key:"pr",value:function(){this.setItem(this.lr,this.Pr.nr())}},{key:"Ar",value:function(e,t,n){var r=new Sd(this.currentUser,e,t,n),i=wd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.nr())}},{key:"Rr",value:function(e){var t=wd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(t))}},{key:"vr",value:function(e,t,n){var r=xd(this.persistenceKey,e),i=new Ed(e,t,n);this.setItem(r,i.nr())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}},{key:"Sr",value:function(e){var t=this._r.exec(e);return t?t[1]:null}},{key:"Cr",value:function(e,t){var n=this.Sr(e);return _d.er(n,t)}},{key:"Nr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sd.er(new $a(i),r,t)}},{key:"$r",value:function(e,t){var n=this.mr.exec(e),r=Number(n[1]);return Ed.er(r,t)}},{key:"Ir",value:function(e){return Td.er(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"kr",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Br(t.batchId,t.state,t.error));case 2:Za("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}},{key:"Dr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.qr(o,u).then((function(){n.ar=r}))}},{key:"Tr",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Er",value:function(e){var t=zc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Dd=function(){function e(){T(this,e),this.Ur=new Id,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return C(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Id,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Nd=function(){function e(){T(this,e)}return C(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ad=function(){function e(){var t=this;T(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return C(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){Za("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=D(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){Za("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=D(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Od=null;function Pd(){return null===Od?Od=268435456+Math.round(2147483648*Math.random()):Od++,"0x"+Od.toString(16)}var Ld={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Rd=function(){function e(t){T(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return C(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),Md="WebChannelConnection",Fd=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return C(n,[{key:"wo",value:function(e,t,n,r){var i=Pd();return new Promise((function(a,o){var u=new Ha;u.setWithCredentials(!0),u.listenOnce(za.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case ja.NO_ERROR:var t=u.getResponseJson();Za(Md,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case ja.TIMEOUT:Za(Md,"RPC '".concat(e,"' ").concat(i," timed out")),o(new uo(oo.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:var n=u.getStatus();if(Za(Md,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(oo).indexOf(t)>=0?t:oo.UNKNOWN}(s.status);o(new uo(c,s.message))}else o(new uo(oo.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new uo(oo.UNAVAILABLE,"Connection failed."));break;default:ro()}}finally{Za(Md,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Za(Md,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=Pd(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ua(),o=Ba(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Ga({})),this._o(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Za(Md,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new Rd({Yr:function(t){f?Za(Md,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Za(Md,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Za(Md,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Qa.EventType.OPEN,(function(){f||Za(Md,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Qa.EventType.CLOSE,(function(){f||(f=!0,Za(Md,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.oo())})),d(c,Qa.EventType.ERROR,(function(t){f||(f=!0,to(Md,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.oo(new uo(oo.UNAVAILABLE,"The operation could not be completed")))})),d(c,Qa.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];io(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Za(Md,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=xc[e];if(void 0!==t)return Cc(t)}(u),l=o.message;void 0===s&&(s=oo.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.oo(new uo(s,l)),c.close()}else Za(Md,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.uo(i)}})),d(o,qa.STAT_EVENT,(function(t){t.stat===Ka.PROXY?Za(Md,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ka.NOPROXY&&Za(Md,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.ro()}),0),h}}]),n}(function(){function e(t){T(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return C(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,i){var a=Pd(),o=this.fo(e,t);Za("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this._o(u,r,i),this.wo(e,o,u,n).then((function(t){return Za("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw to("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,i,a){return this.lo(e,t,n,r,i)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=Ld[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function Vd(){return"undefined"!=typeof window?window:null}function Ud(){return"undefined"!=typeof document?document:null}function Bd(e){return new tl(e,!0)}var jd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;T(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return C(e,[{key:"reset",value:function(){this.Eo=0}},{key:"Po",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&Za("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),zd=function(){function e(t,n,r,i,a,o,u,s){T(this,e),this.Ys=t,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new jd(t,n)}return C(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===oo.RESOURCE_EXHAUSTED?(eo(n.toString()),eo("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===oo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.Co===n&&e.jo(i,a)}),(function(n){t((function(){var t=new uo(oo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.ko.vo(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return Za("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(Za("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),qd=function(e){O(n,e);var t=R(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s}return C(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ro()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.yt?(io(void 0===t||"string"==typeof t),fu.fromBase64String(t||"")):(io(void 0===t||t instanceof Uint8Array),fu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?oo.UNKNOWN:Cc(e.code);return new uo(t,e.message||"")}(o);n=new Hc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=cl(e,s.document.name),l=al(s.document.updateTime),f=s.document.createTime?al(s.document.createTime):Eo.min(),h=new ms({mapValue:{fields:s.document.fields}}),d=ks.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new Gc(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=cl(e,y.document),g=y.readTime?al(y.readTime):Eo.min(),k=ks.newNoDocument(m,g),b=y.removedTargetIds||[];n=new Gc([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=cl(e,w.document),S=w.removedTargetIds||[];n=new Gc([],S,x,null)}else{if(!("filter"in t))return ro();t.filter;var E=t.filter;E.targetId;var _=E.count||0,T=new Tc(_),I=E.targetId;n=new Qc(I,T)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return Eo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Eo.min():t.readTime?al(t.readTime):Eo.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=hl(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=Es(r)?{documents:kl(e,r)}:{query:bl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=rl(e,t.resumeToken):t.snapshotVersion.compareTo(Eo.min())>0&&(n.readTime=nl(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ro()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=hl(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(zd),Kd=function(e){O(n,e);var t=R(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s.Zo=!1,s}return C(n,[{key:"Xo",get:function(){return this.Zo}},{key:"start",value:function(){this.Zo=!1,this.lastStreamToken=void 0,zt(P(n.prototype),"start",this).call(this)}},{key:"Go",value:function(){this.Zo&&this.tu([])}},{key:"Wo",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(io(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();var t=function(e,t){return e&&e.length>0?(io(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?al(e.updateTime):al(t);return n.isEqual(Eo.min())&&(n=al(t)),new sc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=al(e.commitTime);return this.listener.eu(n,t)}return io(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}},{key:"su",value:function(){var e={};e.database=hl(this.Tt),this.qo(e)}},{key:"tu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ml(t.Tt,e)}))};this.qo(n)}}]),n}(zd),Gd=function(e){O(n,e);var t=R(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.Tt=a,o.iu=!1,o}return C(n,[{key:"ru",value:function(){if(this.iu)throw new uo(oo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],u=a[1];return r.connection.lo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===oo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new uo(oo.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var i=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=f(a,2),u=o[0],s=o[1];return i.connection.mo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===oo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new uo(oo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return C((function e(){T(this,e)}))}());var Qd=function(){function e(t,n){T(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return C(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(eo(t),this.cu=!1):Za("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),Hd=C((function e(t,n,r,i,a){var o=this;T(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr((function(e){r.enqueueAndForget(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=iv(o),!e.t0){e.next=5;break}return Za("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ao(t)).mu.add(4),e.next=4,Xd(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,Wd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new Qd(r,i)}));function Wd(e){return $d.apply(this,arguments)}function $d(){return $d=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!iv(t)){e.next=18;break}n=D(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),$d.apply(this,arguments)}function Xd(e){return Yd.apply(this,arguments)}function Yd(){return Yd=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=D(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Yd.apply(this,arguments)}function Jd(e,t){var n=ao(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),rv(n)?nv(n):Pv(n).Mo()&&ev(n,t))}function Zd(e,t){var n=ao(e),r=Pv(n);n.wu.delete(t),r.Mo()&&tv(n,t),0===n.wu.size&&(r.Mo()?r.Bo():iv(n)&&n.pu.set("Unknown"))}function ev(e,t){e.Iu.Ot(t.targetId),Pv(e).Jo(t)}function tv(e,t){e.Iu.Ot(t),Pv(e).Yo(t)}function nv(e){e.Iu=new $c({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),Pv(e).start(),e.pu.au()}function rv(e){return iv(e)&&!Pv(e).$o()&&e.wu.size>0}function iv(e){return 0===ao(e).mu.size}function av(e){e.Iu=void 0}function ov(e){return uv.apply(this,arguments)}function uv(){return uv=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){ev(t,e)}));case 1:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function sv(e,t){return cv.apply(this,arguments)}function cv(){return cv=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:av(t),rv(t)?(t.pu.fu(n),nv(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t,n){return fv.apply(this,arguments)}function fv(){return fv=fe(se().mark((function e(t,n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof Hc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=D(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.wu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.wu.delete(o),t.Iu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Za("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,hv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gc?t.Iu.Qt(n):n instanceof Qc?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(Eo.min())){e.next=29;break}return e.prev=14,e.next=17,ad(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.wu.get(r);i&&e.wu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(fu.EMPTY_BYTE_STRING,n.snapshotVersion)),tv(e,t);var r=new lf(n.target,t,1,n.sequenceNumber);ev(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Za("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,hv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),fv.apply(this,arguments)}function hv(e,t,n){return dv.apply(this,arguments)}function dv(){return dv=fe(se().mark((function e(t,n,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wo(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,Xd(t);case 5:t.pu.set("Offline"),r||(r=function(){return ad(t.localStore)}),t.asyncQueue.enqueueRetryable(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Za("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,Wd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function vv(e,t){return t().catch((function(n){return hv(e,n,t)}))}function pv(e){return yv.apply(this,arguments)}function yv(){return yv=fe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ao(t),r=Lv(n),i=n._u.length>0?n._u[n._u.length-1].batchId:-1;case 2:if(!mv(n)){e.next=19;break}return e.prev=3,e.next=6,sd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n._u.length&&r.Bo(),e.abrupt("break",19);case 10:i=a.batchId,gv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,hv(n,e.t0);case 17:e.next=2;break;case 19:kv(n)&&bv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),yv.apply(this,arguments)}function mv(e){return iv(e)&&e._u.length<10}function gv(e,t){e._u.push(t);var n=Lv(e);n.Mo()&&n.Xo&&n.tu(t.mutations)}function kv(e){return iv(e)&&!Lv(e).$o()&&e._u.length>0}function bv(e){Lv(e).start()}function wv(e){return xv.apply(this,arguments)}function xv(){return xv=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lv(t).su();case 1:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function Sv(e){return Ev.apply(this,arguments)}function Ev(){return Ev=fe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Lv(t),r=D(t._u);try{for(r.s();!(i=r.n()).done;)a=i.value,n.tu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}function _v(e,t,n){return Tv.apply(this,arguments)}function Tv(){return Tv=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._u.shift(),a=sf.from(i,n,r),e.next=3,vv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,pv(t);case 5:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function Iv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Lv(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ic(i=n.code)||i===oo.ABORTED){e.next=7;break}return r=t._u.shift(),Lv(t).Fo(),e.next=5,vv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,pv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:kv(t)&&bv(t);case 5:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Dv(e,t){return Nv.apply(this,arguments)}function Nv(){return Nv=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ao(t)).asyncQueue.verifyOperationInProgress(),Za("RemoteStore","RemoteStore received new credentials"),i=iv(r),r.mu.add(3),e.next=6,Xd(r);case 6:return i&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,Wd(r);case 12:case"end":return e.stop()}}),e)}))),Nv.apply(this,arguments)}function Av(e,t){return Ov.apply(this,arguments)}function Ov(){return Ov=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ao(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,Wd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,Xd(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Ov.apply(this,arguments)}function Pv(e){return e.Tu||(e.Tu=function(e,t,n){var r=ao(e);return r.ru(),new qd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:ov.bind(null,e),no:sv.bind(null,e),Ho:lv.bind(null,e)}),e.gu.push(function(){var t=fe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.Fo(),rv(e)?nv(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:av(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}function Lv(e){return e.Eu||(e.Eu=function(e,t,n){var r=ao(e);return r.ru(),new Kd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:wv.bind(null,e),no:Iv.bind(null,e),nu:Sv.bind(null,e),eu:_v.bind(null,e)}),e.gu.push(function(){var t=fe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Eu.Fo(),t.next=4,pv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Eu.stop();case 8:e._u.length>0&&(Za("RemoteStore","Stopping write stream with ".concat(e._u.length," pending writes")),e._u=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Eu}var Rv=function(){function e(t,n,r,i,a){T(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return C(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uo(oo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Mv(e,t){if(eo("AsyncQueue","".concat(t,": ").concat(e)),Wo(e))return new uo(oo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Fv=function(){function e(t){T(this,e),this.comparator=t?function(e,n){return t(e,n)||Do.comparator(e.key,n.key)}:function(e,t){return Do.comparator(e.key,t.key)},this.keyedMap=Pc(),this.sortedSet=new ls(this.comparator)}return C(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Vv=function(){function e(){T(this,e),this.Au=new ls(Do.comparator)}return C(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):ro():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Uv=function(){function e(t,n,r,i,a,o,u,s,c){T(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return C(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Us(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Fv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Bv=C((function e(){T(this,e),this.Pu=void 0,this.listeners=[]})),jv=C((function e(){T(this,e),this.queries=new Dc((function(e){return Bs(e)}),Us),this.onlineState="Unknown",this.vu=new Set}));function zv(e,t){return qv.apply(this,arguments)}function qv(){return qv=fe(se().mark((function e(t,n){var r,i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ao(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Bv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Pu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Mv(e.t0,"Initialization of query '".concat(js(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Pu&&n.Vu(o.Pu)&&Wv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),qv.apply(this,arguments)}function Kv(e,t){return Gv.apply(this,arguments)}function Gv(){return Gv=fe(se().mark((function e(t,n){var r,i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ao(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Gv.apply(this,arguments)}function Qv(e,t){var n,r=ao(e),i=!1,a=D(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=D(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Pu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Wv(r)}function Hv(e,t,n){var r=ao(e),i=r.queries.get(t);if(i){var a,o=D(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Wv(e){e.vu.forEach((function(e){e.next()}))}var $v=function(){function e(t,n,r){T(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return C(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=D(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Uv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Du?this.xu(e)&&(this.Su.next(e),a=!0):this.Nu(e,this.onlineState)&&(this.ku(e),a=!0),this.Cu=e,a}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.$u||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=Uv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}(),Xv=function(){function e(t,n){T(this,e),this.Mu=t,this.byteLength=n}return C(e,[{key:"Ou",value:function(){return"metadata"in this.Mu}}]),e}(),Yv=function(){function e(t){T(this,e),this.Tt=t}return C(e,[{key:"Zi",value:function(e){return cl(this.Tt,e)}},{key:"Xi",value:function(e){return e.metadata.exists?pl(this.Tt,e.document,!1):ks.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}},{key:"tr",value:function(e){return al(e)}}]),e}(),Jv=function(){function e(t,n,r){T(this,e),this.Fu=t,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zv(t)}return C(e,[{key:"Bu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;var n=To.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Lu",value:function(e){var t,n=new Map,r=new Yv(this.Tt),i=D(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Zi(a.metadata.name),s=D(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Bc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yd(this.localStore,new Yv(this.Tt),this.documents,this.Fu.id);case 2:t=e.sent,n=this.Lu(this.documents),r=D(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,gd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Zv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ep=C((function e(t){T(this,e),this.key=t})),tp=C((function e(t){T(this,e),this.key=t})),np=function(){function e(t,n){T(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Bc(),this.mutatedKeys=Bc(),this.ju=Ks(t),this.zu=new Fv(this.ju)}return C(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new Vv,i=t?t.zu:this.zu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=zs(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Yu(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.ju(f,s)>0||c&&n.ju(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:u,mutatedKeys:a}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var a=e.Ju.Ru();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ro()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var o=t?this.Xu():[],u=0===this.Qu.size&&this.current?1:0,s=u!==this.Gu;return this.Gu=u,0!==a.length||s?{snapshot:new Uv(this.query,e.zu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Vv,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=Bc(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new tp(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new ep(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=Bc();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return Uv.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),rp=C((function e(t,n,r){T(this,e),this.query=t,this.targetId=n,this.view=r})),ip=C((function e(t){T(this,e),this.key=t,this.ic=!1})),ap=function(){function e(t,n,r,i,a,o){T(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Dc((function(e){return Bs(e)}),Us),this.uc=new Map,this.cc=new Set,this.ac=new ls(Do.comparator),this.hc=new Map,this.lc=new Mh,this.fc={},this.dc=new Map,this._c=hh.Sn(),this.onlineState="Unknown",this.wc=void 0}return C(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function op(e,t){return up.apply(this,arguments)}function up(){return up=fe(se().mark((function e(t,n){var r,i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zp(t),!(o=r.oc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.sc(),e.next=15;break;case 6:return e.next=8,cd(r.localStore,Ms(n));case 8:return u=e.sent,r.isPrimaryClient&&Jd(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,sp(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),up.apply(this,arguments)}function sp(e,t,n,r,i){return cp.apply(this,arguments)}function cp(){return cp=fe(se().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=fe(se().mark((function e(t,n,r,i){var a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Hu(r),e.t0=a.Li,!e.t0){e.next=6;break}return e.next=5,hd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Dp(t,n.targetId,u.tc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,hd(t.localStore,n,!0);case 3:return o=e.sent,u=new np(n,o.Yi),s=u.Hu(o.documents),c=Kc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Dp(t,r,l.tc),f=new rp(n,r,u),e.abrupt("return",(t.oc.set(n,f),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function lp(e,t){return fp.apply(this,arguments)}function fp(){return fp=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ao(t),i=r.oc.get(n),!((a=r.uc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(i.targetId,a.filter((function(e){return!Us(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ld(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Zd(r.remoteStore,i.targetId),Ip(r,i.targetId)})).catch(jo);case 9:e.next=14;break;case 11:return Ip(r,i.targetId),e.next=14,ld(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),fp.apply(this,arguments)}function hp(e,t,n){return dp.apply(this,arguments)}function dp(){return dp=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ey(t),e.prev=1,e.next=4,function(e,t){var n,r,i=ao(e),a=So.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Bc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ac(),s=Bc();return i.ji.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=D(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=pc(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new gc(c.key,l,gs(l.value.mapValue),cc.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Lc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fc[e.currentUser.toKey()];r||(r=new ls(bo)),r=r.insert(t,n),e.fc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Op(i,a.changes);case 9:return e.next=11,pv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Mv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),dp.apply(this,arguments)}function vp(e,t){return pp.apply(this,arguments)}function pp(){return pp=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),e.prev=1,e.next=4,od(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(io(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?io(n.ic):e.removedDocuments.size>0&&(io(n.ic),n.ic=!1))})),e.next=8,Op(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,jo(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),pp.apply(this,arguments)}function yp(e,t,n){var r=ao(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.oc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ao(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=D(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Wv(n)}(r.eventManager,t),i.length&&r.rc.Ho(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function mp(e,t,n){return gp.apply(this,arguments)}function gp(){return gp=fe(se().mark((function e(t,n,r){var i,a,o,u,s,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ao(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.hc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new ls(Do.comparator)).insert(o,ks.newNoDocument(o,Eo.min())),s=Bc().add(o),c=new qc(Eo.min(),new Map,new ds(bo),u,s),e.next=9,vp(i,c);case 9:i.ac=i.ac.remove(o),i.hc.delete(n),Ap(i),e.next=16;break;case 14:return e.next=16,ld(i.localStore,n,!1).then((function(){return Ip(i,n,r)})).catch(jo);case 16:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function kp(e,t){return bp.apply(this,arguments)}function bp(){return bp=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),i=n.batch.batchId,e.prev=1,e.next=4,id(r.localStore,n);case 4:return a=e.sent,Tp(r,i,null),_p(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Op(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,jo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bp.apply(this,arguments)}function wp(e,t,n){return xp.apply(this,arguments)}function xp(){return xp=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ao(t),e.prev=1,e.next=4,function(e,t){var n=ao(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return io(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Tp(i,n,r),_p(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Op(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,jo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),xp.apply(this,arguments)}function Sp(e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return iv((r=ao(t)).remoteStore)||Za("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ao(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.dc.get(i)||[]).push(n),r.dc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Mv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Ep.apply(this,arguments)}function _p(e,t){(e.dc.get(t)||[]).forEach((function(e){e.resolve()})),e.dc.delete(t)}function Tp(e,t,n){var r=ao(e),i=r.fc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fc[r.currentUser.toKey()]=i}}function Ip(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=D(e.uc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.oc.delete(a),n&&e.rc.gc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||Cp(e,t)}))}function Cp(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(Zd(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),Ap(e))}function Dp(e,t,n){var r,i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof ep?(e.lc.addReference(a.key,t),Np(e,a)):a instanceof tp?(Za("SyncEngine","Document no longer in limbo: "+a.key),e.lc.removeReference(a.key,t),e.lc.containsKey(a.key)||Cp(e,a.key)):ro()}}catch(o){i.e(o)}finally{i.f()}}function Np(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(Za("SyncEngine","New document in limbo: "+n),e.cc.add(r),Ap(e))}function Ap(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new Do(To.fromString(t)),r=e._c.next();e.hc.set(r,new ip(n)),e.ac=e.ac.insert(n,r),Jd(e.remoteStore,new lf(Ms(Ns(n.path)),r,2,tu.at))}}function Op(e,t,n){return Pp.apply(this,arguments)}function Pp(){return Pp=fe(se().mark((function e(t,n,r){var i,a,o,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ao(t),a=[],o=[],u=[],e.t0=i.oc.isEmpty(),e.t0){e.next=9;break}return i.oc.forEach((function(e,t){u.push(i.mc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Jh.Ni(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.rc.Ho(a),e.next=9,function(){var e=fe(se().mark((function e(t,n){var r,i,a,o,u,s,c,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return qo.forEach(n,(function(t){return qo.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return qo.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Wo(e.t0)){e.next=10;break}throw e.t0;case 10:Za("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=D(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ki.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ki=r.Ki.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Lp(e,t){return Rp.apply(this,arguments)}function Rp(){return Rp=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ao(t)).currentUser.isEqual(n)){e.next=11;break}return Za("SyncEngine","User change. New user:",n.toKey()),e.next=5,nd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new uo(oo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Op(r,i.Wi);case 11:case"end":return e.stop()}}),e)}))),Rp.apply(this,arguments)}function Mp(e,t){var n=ao(e),r=n.hc.get(t);if(r&&r.ic)return Bc().add(r.key);var i=Bc(),a=n.uc.get(t);if(!a)return i;var o,u=D(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.oc.get(s);i=i.unionWith(c.view.Wu)}}catch(l){u.e(l)}finally{u.f()}return i}function Fp(e,t){return Vp.apply(this,arguments)}function Vp(){return Vp=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),e.next=3,hd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.nc(i),e.abrupt("return",(r.isPrimaryClient&&Dp(r,n.targetId,a.tc),a));case 6:case"end":return e.stop()}}),e)}))),Vp.apply(this,arguments)}function Up(e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),e.abrupt("return",vd(r.localStore,n).then((function(e){return Op(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function jp(e,t,n,r){return zp.apply(this,arguments)}function zp(){return zp=fe(se().mark((function e(t,n,r,i){var a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ao(t),e.next=3,function(e,t){var n=ao(e),r=ao(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.An(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):qo.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,pv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Tp(a,n,i||null),_p(a,n),function(e,t){ao(ao(e).mutationQueue).Pn(t)}(a.localStore,n)):ro();case 11:return e.next=13,Op(a,o);case 13:e.next=16;break;case 15:Za("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function qp(e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=fe(se().mark((function e(t,n){var r,i,a,o,u,s,c,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zp(r=ao(t)),ey(r),!0!==n||!0===r.wc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Gp(r,i.toArray());case 5:return a=e.sent,r.wc=!0,e.next=9,Av(r.remoteStore,!0);case 9:o=D(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Jd(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.wc){e.next=25;break}return c=[],l=Promise.resolve(),r.uc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ip(r,t),ld(r.localStore,t,!0)})),Zd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Gp(r,c);case 21:return function(e){var t=ao(e);t.hc.forEach((function(e,n){Zd(t.remoteStore,n)})),t.lc._s(),t.hc=new Map,t.ac=new ls(Do.comparator)}(r),r.wc=!1,e.next=25,Av(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Gp(e,t,n){return Qp.apply(this,arguments)}function Qp(){return Qp=fe(se().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,p,y,m;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ao(t),a=[],o=[],u=D(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.uc.get(c))||0===f.length){e.next=34;break}return e.next=11,cd(i.localStore,Ms(f[0]));case 11:l=e.sent,h=D(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.oc.get(v),e.next=20,Fp(i,p);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,dd(i.localStore,c);case 36:return m=e.sent,e.next=39,cd(i.localStore,m);case 39:return l=e.sent,e.next=42,sp(i,Hp(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.rc.Ho(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Qp.apply(this,arguments)}function Hp(e){return Ds(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Wp(e){var t=ao(e);return ao(ao(t.localStore).persistence).Si()}function $p(e,t,n,r){return Xp.apply(this,arguments)}function Xp(){return Xp=fe(se().mark((function e(t,n,r,i){var a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ao(t)).wc){e.next=3;break}return e.abrupt("return",void Za("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.uc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,vd(a.localStore,qs(o[0]));case 10:return u=e.sent,s=qc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,fu.EMPTY_BYTE_STRING),e.next=14,Op(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,ld(a.localStore,n,!0);case 17:return Ip(a,n,i),e.abrupt("break",20);case 19:ro();case 20:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}function Yp(e,t,n){return Jp.apply(this,arguments)}function Jp(){return Jp=fe(se().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Zp(t)).wc){e.next=45;break}a=D(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.uc.has(u)){e.next=10;break}return Za("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,dd(i.localStore,u);case 12:return s=e.sent,e.next=15,cd(i.localStore,s);case 15:return c=e.sent,e.next=18,sp(i,Hp(s),c.targetId,!1,c.resumeToken);case 18:Jd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=D(r),e.prev=30,h=se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.uc.has(t),!e.t0){e.next=5;break}return e.next=5,ld(i.localStore,t,!1).then((function(){Zd(i.remoteStore,t),Ip(i,t)})).catch(jo);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Jp.apply(this,arguments)}function Zp(e){var t=ao(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mp.bind(null,t),t.rc.Ho=Qv.bind(null,t.eventManager),t.rc.gc=Hv.bind(null,t.eventManager),t}function ey(e){var t=ao(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wp.bind(null,t),t}function ty(e,t,n){var r=ao(e);(function(){var e=fe(se().mark((function e(t,n,r){var i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ao(e),r=al(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Zv(i)),a=new Jv(i,t.localStore,n.Tt),e.next=15,n.yc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Bu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.yc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Op(t,s.Uu,void 0);case 31:return e.next=33,function(e,t){var n=ao(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.qu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(to("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ny=function(){function e(){T(this,e),this.synchronizeTabs=!1}return C(e,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=Bd(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return td(this.persistence,new Zh,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new zh(Kh.qs,this.Tt)}},{key:"Ic",value:function(e){return new Dd}},{key:"terminate",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ry=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).Pc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return C(n,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt(P(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Pc.initialize(this,t);case 4:return e.next=6,ey(this.Pc.syncEngine);case 6:return e.next=8,pv(this.Pc.remoteStore);case 8:return e.next=10,this.persistence.di((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ec",value:function(e){return td(this.persistence,new Zh,e.initialUser,this.Tt)}},{key:"Ac",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new kh(n,e.asyncQueue,t)}},{key:"Rc",value:function(e,t){var n=new eu(t,this.persistence);return new Zo(e.asyncQueue,n)}},{key:"Tc",value:function(e){var t=Yh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ih.withCacheSize(this.cacheSizeBytes):ih.DEFAULT;return new Wh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Vd(),Ud(),this.Tt,this.sharedClientState,!!this.forceOwnership)}},{key:"Ic",value:function(e){return new Dd}}]),n}(ny),iy=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r,!1)).Pc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return C(n,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t){var r,i=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt(P(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Pc.syncEngine,e.t0=this.sharedClientState instanceof Cd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Br:jp.bind(null,r),Lr:$p.bind(null,r),qr:Yp.bind(null,r),Si:Wp.bind(null,r),Fr:Up.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.di(function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qp(i.Pc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){var t=Vd();if(!Cd.C(t))throw new uo(oo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Yh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(ry),ay=function(){function e(){T(this,e)}return C(e,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t,n){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return yp(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Lp.bind(null,this.syncEngine),e.next=12,Av(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new jv}},{key:"createDatastore",value:function(e){var t,n=Bd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Fd(t));return function(e,t,n,r){return new Gd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return yp(o.syncEngine,e,0)},a=Ad.C()?new Ad:new Nd,new Hd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new ap(e,t,n,r,i,a);return o&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ao(t),Za("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,Xd(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function oy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return fe(se().mark((function r(){var i;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var uy=function(){function e(t){T(this,e),this.observer=t,this.muted=!1}return C(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):eo("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),sy=function(){function e(t,n){var r=this;T(this,e),this.Vc=t,this.Tt=n,this.metadata=new so,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.Mu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Mu))))}),(function(e){return r.metadata.reject(e)}))}return C(e,[{key:"close",value:function(){return this.Vc.cancel()}},{key:"getMetadata",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yc",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Dc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=fe(se().mark((function e(){var t,n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Sc.decode(t),r=Number(n),isNaN(r)&&this.xc("length string (".concat(n,") is not valid number")),e.next=9,this.Nc(r);case 9:return i=e.sent,e.abrupt("return",new Xv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"kc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Cc",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.kc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.kc())<0&&this.xc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.xc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Sc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xc",value:function(e){throw this.Vc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),cy=function(){function e(t){T(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return C(e,[{key:"lookup",value:function(){var e=fe(se().mark((function e(t){var n,r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new uo(oo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=fe(se().mark((function e(t,n){var r,i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),i=hl(r.Tt)+"/documents",a={documents:n.map((function(e){return sl(r.Tt,e)}))},e.next=5,r.mo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=yl(r.Tt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());io(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ec(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=fe(se().mark((function e(){var t,n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Do.fromPath(t);n.mutations.push(new _c(r,n.precondition(r)))})),e.next=7,function(){var e=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ao(t),i=hl(r.Tt)+"/documents",a={writes:n.map((function(e){return ml(r.Tt,e)}))},e.next=3,r.lo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ro();t=Eo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new uo(oo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Eo.min())?cc.exists(!1):cc.updateTime(t):cc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Eo.min()))throw new uo(oo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cc.updateTime(t)}return cc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ly=function(){function e(t,n,r,i,a){T(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new jd(this.asyncQueue,"transaction_retry")}return C(e,[{key:"run",value:function(){this.Mc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.ko.vo(fe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new cy(e.datastore),(r=e.Fc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Bc(t)}))}))})).catch((function(t){e.Bc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Fc",value:function(e){try{var t=this.updateFunction(e);return!uu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Bc",value:function(e){var t=this;this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Lc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ic(t)}return!1}}]),e}(),fy=function(){function e(t,n,r,i){var a=this;T(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$a.UNAUTHENTICATED,this.clientId=ko.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Za("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Za("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return C(e,[{key:"getConfiguration",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new uo(oo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(fe(se().mark((function n(){var r;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Mv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function hy(e,t){return dy.apply(this,arguments)}function dy(){return dy=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Za("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,nd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function vy(e,t){return py.apply(this,arguments)}function py(){return py=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,yy(t);case 3:return r=e.sent,Za("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Dv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Dv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),py.apply(this,arguments)}function yy(e){return my.apply(this,arguments)}function my(){return my=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Za("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,hy(t,new ny);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),my.apply(this,arguments)}function gy(e){return ky.apply(this,arguments)}function ky(){return ky=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Za("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,vy(t,new ay);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ky.apply(this,arguments)}function by(e){return yy(e).then((function(e){return e.persistence}))}function wy(e){return yy(e).then((function(e){return e.localStore}))}function xy(e){return gy(e).then((function(e){return e.remoteStore}))}function Sy(e){return gy(e).then((function(e){return e.syncEngine}))}function Ey(e){return gy(e).then((function(e){return e.datastore}))}function _y(e){return Ty.apply(this,arguments)}function Ty(){return Ty=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=op.bind(null,n.syncEngine),r.onUnlisten=lp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Ty.apply(this,arguments)}function Iy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new so;return e.asyncQueue.enqueueAndForget(fe(se().mark((function i(){return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new uy({next:function(a){t.enqueueAndForget((function(){return Kv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new uo(oo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new uo(oo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new $v(Ns(n.path),a,{includeMetadataChanges:!0,$u:!0});return zv(e,o)},i.next=3,_y(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Cy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new so;return e.asyncQueue.enqueueAndForget(fe(se().mark((function i(){return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new uy({next:function(n){t.enqueueAndForget((function(){return Kv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new uo(oo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new $v(n,a,{includeMetadataChanges:!0,$u:!0});return zv(e,o)},i.next=3,_y(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Dy=new Map;function Ny(e,t,n){if(!n)throw new uo(oo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ay(e,t,n,r){if(!0===t&&!0===r)throw new uo(oo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Oy(e){if(!Do.isDocumentKey(e))throw new uo(oo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Py(e){if(Do.isDocumentKey(e))throw new uo(oo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ly(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ro()}function Ry(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new uo(oo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ly(e);throw new uo(oo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function My(e,t){if(t<=0)throw new uo(oo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Fy=function(){function e(t){var n;if(T(this,e),void 0===t.host){if(void 0!==t.ssl)throw new uo(oo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uo(oo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ay("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return C(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Vy=function(){function e(t,n,r,i){T(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fy({}),this._settingsFrozen=!1}return C(e,[{key:"app",get:function(){if(!this._app)throw new uo(oo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new uo(oo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new lo;switch(e.type){case"gapi":var t=e.client;return new po(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new uo(oo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Dy.get(e);t&&(Za("ComponentProvider","Removing Datastore"),Dy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Uy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Ry(e,Vy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&to("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=$a.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[j(JSON.stringify({alg:"none",type:"JWT"})),j(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new uo(oo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $a(s)}e._authCredentials=new fo(new co(o,u))}}var By=function(){function e(t,n,r){T(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return C(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new zy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),jy=function(){function e(t,n,r){T(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return C(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),zy=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,e,r,Ns(i)))._path=i,a.type="collection",a}return C(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new By(this.firestore,null,new Do(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(jy);function qy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ue(e),Ny("collection","path",t),e instanceof Vy){var a=To.fromString.apply(To,[t].concat(r));return Py(a),new zy(e,null,a)}if(!(e instanceof By||e instanceof zy))throw new uo(oo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(To.fromString.apply(To,[t].concat(r)));return Py(o),new zy(e.firestore,null,o)}function Ky(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ue(e),1===arguments.length&&(t=ko.R()),Ny("doc","path",t),e instanceof Vy){var a=To.fromString.apply(To,[t].concat(r));return Oy(a),new By(e,null,new Do(a))}if(!(e instanceof By||e instanceof zy))throw new uo(oo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(To.fromString.apply(To,[t].concat(r)));return Oy(o),new By(e.firestore,e instanceof zy?e.converter:null,new Do(o))}function Gy(e,t){return e=ue(e),t=ue(t),(e instanceof By||e instanceof zy)&&(t instanceof By||t instanceof zy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qy(e,t){return e=ue(e),t=ue(t),e instanceof jy&&t instanceof jy&&e.firestore===t.firestore&&Us(e._query,t._query)&&e.converter===t.converter}var Hy=function(){function e(){var t=this;T(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new jd(this,"async_queue_retry"),this.Hc=function(){var e=Ud();e&&Za("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=Ud();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return C(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=Ud();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new so;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=fe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Wo(e.t0)){e.next=12;break}throw e.t0;case 12:Za("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw eo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var i=Rv.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(i),i}},{key:"Jc",value:function(){this.Qc&&ro()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=D(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=D(t.Gc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();function Wy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=D(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var $y=function(){function e(){T(this,e),this._progressObserver={},this._taskCompletionResolver=new so,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return C(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Xy=function(e){O(n,e);var t=R(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Hy,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return C(n,[{key:"_terminate",value:function(){return this._firestoreClient||Jy(this),this._firestoreClient.terminate()}}]),n}(Vy);function Yy(e){return e._firestoreClient||Jy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Jy(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new nu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new fy(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Zy(e,t,n){var r=new so;return e.asyncQueue.enqueue(fe(se().mark((function i(){var a;return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,hy(e,n);case 3:return i.next=5,vy(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===oo.FAILED_PRECONDITION||e.code===oo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:to("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function em(e){return function(e){return e.asyncQueue.enqueue(fe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,by(e);case 2:return n=t.sent,t.next=5,xy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ao(e);return t.mu.delete(0),Wd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Yy(e=Ry(e,Xy)))}function tm(e){return function(e){return e.asyncQueue.enqueue(fe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,by(e);case 2:return n=t.sent,t.next=5,xy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ao(t)).mu.add(0),e.next=4,Xd(n);case 4:n.pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Yy(e=Ry(e,Xy)))}function nm(e,t){var n=Yy(e=Ry(e,Xy)),r=new $y;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new sy(e,t)}(function(e,t){if(e instanceof Uint8Array)return oy(e,t);if(e instanceof ArrayBuffer)return oy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Bd(t));e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ty,t.next=3,Sy(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function rm(e,t){return function(e,t){return e.asyncQueue.enqueue(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ao(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$s.getNamedQuery(e,t)}))},n.next=3,wy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Yy(e=Ry(e,Xy)),t).then((function(t){return t?new jy(e,null,t.query):null}))}function im(e){if(e._initialized||e._terminated)throw new uo(oo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var am=function(){function e(t){T(this,e),this._byteString=t}return C(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(fu.fromBase64String(t))}catch(t){throw new uo(oo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(fu.fromUint8Array(t))}}]),e}(),om=function(){function e(){T(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new uo(oo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Co(n)}return C(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var um=C((function e(t){T(this,e),this._methodName=t})),sm=function(){function e(t,n){if(T(this,e),!isFinite(t)||t<-90||t>90)throw new uo(oo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new uo(oo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return C(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return bo(this._lat,e._lat)||bo(this._long,e._long)}}]),e}(),cm=/^__.*__$/,lm=function(){function e(t,n,r){T(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return C(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new gc(e,this.data,this.fieldMask,t,this.fieldTransforms):new mc(e,this.data,t,this.fieldTransforms)}}]),e}(),fm=function(){function e(t,n,r){T(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return C(e,[{key:"toMutation",value:function(e,t){return new gc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function hm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ro()}}var dm=function(){function e(t,n,r,i,a,o){T(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return C(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return Pm(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(hm(this.ra)&&cm.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),vm=function(){function e(t,n,r){T(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||Bd(t)}return C(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new dm({ra:e,methodName:t,_a:n,path:Co.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function pm(e){var t=e._freezeSettings(),n=Bd(e._databaseId);return new vm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ym(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wa(a.merge||a.mergeFields?2:0,t,n,i);Dm("Data must be an object, but it was:",o,r);var u,s,c=Im(r,o);if(a.merge)u=new ys(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=D(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Nm(t,l.value,n);if(!o.contains(d))throw new uo(oo.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Lm(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new ys(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new lm(new ms(c),u,s)}var mm=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ra)throw 1===e.ra?e.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(um);function gm(e,t,n){return new dm({ra:3,_a:t.settings._a,methodName:e._methodName,ca:n},t.databaseId,t.Tt,t.ignoreUndefinedProperties)}var km=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n,[{key:"_toFieldTransform",value:function(e){return new uc(e.path,new Zs)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(um),bm=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e)).ma=r,i}return C(n,[{key:"_toFieldTransform",value:function(e){var t=gm(this,e,!0),n=this.ma.map((function(e){return Tm(e,t)})),r=new ec(n);return new uc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(um),wm=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e)).ma=r,i}return C(n,[{key:"_toFieldTransform",value:function(e){var t=gm(this,e,!0),n=this.ma.map((function(e){return Tm(e,t)})),r=new nc(n);return new uc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(um),xm=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e)).ga=r,i}return C(n,[{key:"_toFieldTransform",value:function(e){var t=new ic(e.Tt,Ws(e.Tt,this.ga));return new uc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(um);function Sm(e,t,n,r){var i=e.wa(1,t,n);Dm("Data must be an object, but it was:",i,r);var a=[],o=ms.empty();au(r,(function(e,r){var u=Om(t,e,n);r=ue(r);var s=i.ha(u);if(r instanceof mm)a.push(u);else{var c=Tm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ys(a);return new fm(o,u,i.fieldTransforms)}function Em(e,t,n,r,i,a){var o=e.wa(1,t,n),u=[Nm(t,r,n)],s=[i];if(a.length%2!=0)throw new uo(oo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Nm(t,a[c])),s.push(a[c+1]);for(var l=[],f=ms.empty(),h=u.length-1;h>=0;--h)if(!Lm(l,u[h])){var d=u[h],v=s[h];v=ue(v);var p=o.ha(d);if(v instanceof mm)l.push(d);else{var y=Tm(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new ys(l);return new fm(f,m,o.fieldTransforms)}function _m(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Tm(n,e.wa(r?4:3,t))}function Tm(e,t){if(Cm(e=ue(e)))return Dm("Unsupported field value:",t,e),Im(e,t);if(e instanceof um)return function(e,t){if(!hm(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=D(e);try{for(a.s();!(n=a.n()).done;){var o=Tm(n.value,t.la(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ue(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ws(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=So.fromDate(e);return{timestampValue:nl(t.Tt,n)}}if(e instanceof So){var r=new So(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:nl(t.Tt,r)}}if(e instanceof sm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof am)return{bytesValue:rl(t.Tt,e._byteString)};if(e instanceof By){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ol(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(Ly(e)))}(e,t)}function Im(e,t){var n={};return ou(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):au(e,(function(e,r){var i=Tm(r,t.ua(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Cm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof So||e instanceof sm||e instanceof am||e instanceof By||e instanceof um)}function Dm(e,t,n){if(!Cm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ly(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}function Nm(e,t,n){if((t=ue(t))instanceof om)return t._internalPath;if("string"==typeof t)return Om(e,t);throw Pm("Field path arguments must be of type string or ",e,!1,void 0,n)}var Am=new RegExp("[~\\*/\\[\\]]");function Om(e,t,n){if(t.search(Am)>=0)throw Pm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return M(om,ce(t.split(".")))._internalPath}catch(r){throw Pm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Pm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new uo(oo.INVALID_ARGUMENT,u+e+s)}function Lm(e,t){return e.some((function(e){return e.isEqual(t)}))}var Rm=function(){function e(t,n,r,i,a){T(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return C(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new By(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Mm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Fm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Mm=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n,[{key:"data",value:function(){return zt(P(n.prototype),"data",this).call(this)}}]),n}(Rm);function Fm(e,t){return"string"==typeof t?Om(e,t):t instanceof om?t._internalPath:t._delegate._internalPath}function Vm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new uo(oo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Um=C((function e(){T(this,e)})),Bm=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n)}(Um);function jm(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Um&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof qm})).length,n=e.filter((function(e){return e instanceof zm})).length;if(t>1||t>0&&n>0)throw new uo(oo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=D(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var zm=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return C(n,[{key:"_apply",value:function(e){var t=this._parse(e);return tg(e._query,t),new jy(e.firestore,e.converter,Fs(e._query,t))}},{key:"_parse",value:function(e){var t=pm(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new uo(oo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){eg(o,a);var s,c=[],l=D(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Zm(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Zm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||eg(o,a),u=_m(n,"where",o,"in"===a||"not-in"===a);return Ku.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Bm);var qm=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return C(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Gu.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=D(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;tg(r,a),r=Fs(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new jy(e.firestore,e.converter,Fs(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Um);var Km=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return C(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new uo(oo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new uo(oo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ss(t,n);return function(e,t){if(null===Os(e)){var n=Ps(e);null!==n&&ng(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new jy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Cs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Bm);var Gm=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return C(n,[{key:"_apply",value:function(e){return new jy(e.firestore,e.converter,Vs(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Bm);var Qm=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return C(n,[{key:"_apply",value:function(e){var t=Jm(e,this.type,this._docOrFields,this._inclusive);return new jy(e.firestore,e.converter,function(e,t){return new Cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Bm);function Hm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qm._create("startAt",t,!0)}function Wm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qm._create("startAfter",t,!1)}var $m=function(e){O(n,e);var t=R(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return C(n,[{key:"_apply",value:function(e){var t=Jm(e,this.type,this._docOrFields,this._inclusive);return new jy(e.firestore,e.converter,function(e,t){return new Cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Bm);function Xm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $m._create("endBefore",t,!1)}function Ym(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $m._create("endAt",t,!0)}function Jm(e,t,n,r){if(n[0]=ue(n[0]),n[0]instanceof Rm)return function(e,t,n,r,i){if(!r)throw new uo(oo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=D(Rs(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Cu(t,r.key));else{var c=r.data.field(s.field);if(yu(c))throw new uo(oo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new uo(oo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Bu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=pm(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new uo(oo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new uo(oo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ls(e)&&-1!==c.indexOf("/"))throw new uo(oo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(To.fromString(c));if(!Do.isDocumentKey(l))throw new uo(oo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Do(l);u.push(Cu(t,f))}else{var h=_m(n,r,c);u.push(h)}}return new Bu(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Zm(e,t,n){if("string"==typeof(n=ue(n))){if(""===n)throw new uo(oo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ls(t)&&-1!==n.indexOf("/"))throw new uo(oo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(To.fromString(n));if(!Do.isDocumentKey(r))throw new uo(oo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Cu(e,new Do(r))}if(n instanceof By)return Cu(e,n._key);throw new uo(oo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ly(n),"."))}function eg(e,t){if(!Array.isArray(e)||0===e.length)throw new uo(oo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function tg(e,t){if(t.isInequality()){var n=Ps(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new uo(oo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Os(e);null!==i&&ng(e,r,i)}var a=function(e,t){var n,r=D(e);try{for(r.s();!(n=r.n()).done;){var i,a=D(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new uo(oo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new uo(oo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function ng(e,t,n){if(!n.isEqual(t))throw new uo(oo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var rg=function(){function e(){T(this,e)}return C(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ro()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return au(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new sm(vu(e.latitude),vu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=mu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(gu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=du(e);return new So(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=To.fromString(e);io(Nl(n));var r=new ru(n.get(1),n.get(3)),i=new Do(n.popFirst(5));return r.isEqual(t)||eo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ig(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var ag=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this)).firestore=e,r}return C(n,[{key:"convertBytes",value:function(e){return new am(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new By(this.firestore,null,t)}}]),n}(rg);var og=function(){function e(t,n){T(this,e),this.hasPendingWrites=t,this.fromCache=n}return C(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ug=function(e){O(n,e);var t=R(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return C(n,[{key:"exists",value:function(){return zt(P(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Fm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Rm),sg=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zt(P(n.prototype),"data",this).call(this,e)}}]),n}(ug),cg=function(){function e(t,n,r,i){T(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new og(i.hasPendingWrites,i.fromCache),this.query=r}return C(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sg(n._firestore,n._userDataWriter,r.key,r,new og(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new uo(oo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new sg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new og(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new og(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:lg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function lg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ro()}}function fg(e,t){return e instanceof ug&&t instanceof ug?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof cg&&t instanceof cg&&e._firestore===t._firestore&&Qy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var hg=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this)).firestore=e,r}return C(n,[{key:"convertBytes",value:function(e){return new am(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new By(this.firestore,null,t)}}]),n}(rg);function dg(e){e=Ry(e,By);var t=Ry(e.firestore,Xy),n=Yy(t),r=new hg(t);return function(e,t){var n=new so;return e.asyncQueue.enqueueAndForget(fe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ao(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new uo(oo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Mv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,wy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new ug(t,r,e._key,n,new og(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function vg(e){e=Ry(e,jy);var t=Ry(e.firestore,Xy),n=Yy(t),r=new hg(t);return function(e,t){var n=new so;return e.asyncQueue.enqueueAndForget(fe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fe(se().mark((function e(t,n,r){var i,a,o,u,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hd(t,n,!0);case 3:i=e.sent,a=new np(n,i.Yi),o=a.Hu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Mv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,wy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new cg(t,r,e,n)}))}function pg(e,t,n){e=Ry(e,By);var r=Ry(e.firestore,Xy),i=ig(e.converter,t,n);return kg(r,[ym(pm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cc.none())])}function yg(e,t,n){e=Ry(e,By);for(var r=Ry(e.firestore,Xy),i=pm(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return kg(r,[("string"==typeof(t=ue(t))||t instanceof om?Em(i,"updateDoc",e._key,t,n,o):Sm(i,"updateDoc",e._key,t)).toMutation(e._key,cc.exists(!0))])}function mg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ue(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Wy(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Wy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof By)l=Ry(e.firestore,Xy),f=Ns(e._key.path),c={next:function(t){n[s]&&n[s](bg(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=Ry(e,jy);l=Ry(v.firestore,Xy),f=v._query;var p=new hg(l);c={next:function(e){n[s]&&n[s](new cg(l,p,v,e))},error:n[s+1],complete:n[s+2]},Vm(e._query)}return function(e,t,n,r){var i=new uy(r),a=new $v(t,i,n);return e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zv,t.next=3,_y(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Kv,t.next=3,_y(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Yy(l),f,h,c)}function gg(e,t){return function(e,t){var n=new uy(t);return e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ao(e).vu.add(t),t.next()},t.next=3,_y(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ao(e).vu.delete(t)},t.next=3,_y(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Yy(e=Ry(e,Xy)),Wy(t)?t:{next:t})}function kg(e,t){return function(e,t){var n=new so;return e.asyncQueue.enqueueAndForget(fe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=hp,r.next=3,Sy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Yy(e),t)}function bg(e,t,n){var r=n.docs.get(t._key),i=new hg(e);return new ug(e,i,t._key,r,new og(n.hasPendingWrites,n.fromCache),t.converter)}var wg={maxAttempts:5},xg=function(){function e(t,n){T(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pm(t)}return C(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Sg(e,this._firestore),i=ig(r.converter,t,n),a=ym(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,cc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Sg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ue(t))||t instanceof om?Em(this._dataReader,"WriteBatch.update",i._key,t,n,o):Sm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,cc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Sg(e,this._firestore);return this._mutations=this._mutations.concat(new Ec(t._key,cc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new uo(oo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Sg(e,t){if((e=ue(e)).firestore!==t)throw new uo(oo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Eg=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r))._firestore=e,i}return C(n,[{key:"get",value:function(e){var t=this,r=Sg(e,this._firestore),i=new hg(this._firestore);return zt(P(n.prototype),"get",this).call(this,e).then((function(e){return new ug(t._firestore,i,r._key,e._document,new og(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){T(this,e),this._firestore=t,this._transaction=n,this._dataReader=pm(t)}return C(e,[{key:"get",value:function(e){var t=this,n=Sg(e,this._firestore),r=new ag(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ro();var i=e[0];if(i.isFoundDocument())return new Rm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Rm(t._firestore,r,n._key,null,n.converter);throw ro()}))}},{key:"set",value:function(e,t,n){var r=Sg(e,this._firestore),i=ig(r.converter,t,n),a=ym(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Sg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ue(t))||t instanceof om?Em(this._dataReader,"Transaction.update",i._key,t,n,o):Sm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Sg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function _g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bm("arrayUnion",t)}function Tg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wm("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Xa=e}(ot),Ze(new he("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Xy(new ho(e.getProvider("auth-internal")),new mo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new uo(oo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ht(Wa,"3.9.0",e),ht(Wa,"3.9.0","esm2017")}();var Ig="@firebase/firestore-compat",Cg="0.3.5";function Dg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new uo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ng(){if("undefined"===typeof Uint8Array)throw new uo("unimplemented","Uint8Arrays are not available in this environment.")}function Ag(){if("undefined"==typeof atob)throw new uo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Og=function(){function e(t){T(this,e),this._delegate=t}return C(e,[{key:"toBase64",value:function(){return Ag(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ng(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Ag(),new e(am.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ng(),new e(am.fromUint8Array(t))}}]),e}();function Pg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=D(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Lg=function(){function e(){T(this,e)}return C(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){im(e=Ry(e,Xy));var n=Yy(e),r=e._freezeSettings(),i=new ay;return Zy(n,i,new ry(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){im(e=Ry(e,Xy));var t=Yy(e),n=e._freezeSettings(),r=new ay;return Zy(t,r,new iy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new uo(oo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new so;return e._queue.enqueueAndForgetEvenWhileRestricted(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Go.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Go.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Yh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Rg=function(){function e(t,n,r){var i=this;T(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ru||(this._appCompat=t)}return C(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||to("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Uy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return em(this._delegate)}},{key:"disableNetwork",value:function(){return tm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Ay("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new so;return e.asyncQueue.enqueueAndForget(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Sp,n.next=3,Sy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Yy(e=Ry(e,Xy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return gg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new uo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new $g(this,qy(this._delegate,e))}catch(t){throw jg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Bg(this,Ky(this._delegate,e))}catch(t){throw jg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Qg(this,function(e,t){if(e=Ry(e,Vy),Ny("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new uo(oo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new jy(e,null,function(e){return new Cs(To.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw jg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Ry(e,Xy);var r=Object.assign(Object.assign({},wg),n);return function(e){if(e.maxAttempts<1)throw new uo(oo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new so;return e.asyncQueue.enqueueAndForget(fe(se().mark((function i(){var a;return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Ey(e);case 2:a=i.sent,new ly(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Yy(e),(function(n){return t(new Eg(e,n))}),r)}(this._delegate,(function(n){return e(new Fg(t,n))}))}},{key:"batch",value:function(){var e=this;return Yy(this._delegate),new Vg(new xg(this._delegate,(function(t){return kg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return nm(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return rm(this._delegate,e).then((function(e){return e?new Qg(t,e):null}))}}]),e}(),Mg=function(e){O(n,e);var t=R(n);function n(e){var r;return T(this,n),(r=t.call(this)).firestore=e,r}return C(n,[{key:"convertBytes",value:function(e){return new Og(new am(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Bg.forKey(t,this.firestore,null)}}]),n}(rg);var Fg=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Mg(t)}return C(e,[{key:"get",value:function(e){var t=this,n=Xg(e);return this._delegate.get(n).then((function(e){return new Kg(t._firestore,new ug(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Xg(e);return n?(Dg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Xg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Xg(e);return this._delegate.delete(t),this}}]),e}(),Vg=function(){function e(t){T(this,e),this._delegate=t}return C(e,[{key:"set",value:function(e,t,n){var r=Xg(e);return n?(Dg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Xg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Xg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Ug=function(){function e(t,n,r){T(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return C(e,[{key:"fromFirestore",value:function(e,t){var n=new sg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Mg(t),n),i.set(n,a)),a}}]),e}();Ug.INSTANCES=new WeakMap;var Bg=function(){function e(t,n){T(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Mg(t)}return C(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new $g(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new $g(this.firestore,qy(this._delegate,e))}catch(t){throw jg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ue(e))instanceof By&&Gy(this._delegate,e)}},{key:"set",value:function(e,t){t=Dg("DocumentReference.set",t);try{return t?pg(this._delegate,e,t):pg(this._delegate,e)}catch(n){throw jg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?yg(this._delegate,e):yg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw jg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return kg(Ry(e.firestore,Xy),[new Ec(e._key,cc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zg(n),a=qg(n,(function(t){return new Kg(e.firestore,new ug(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return mg(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?dg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ry(e,By);var t=Ry(e.firestore,Xy);return Iy(Yy(t),e._key,{source:"server"}).then((function(n){return bg(t,e,n)}))}(this._delegate):function(e){e=Ry(e,By);var t=Ry(e.firestore,Xy);return Iy(Yy(t),e._key).then((function(n){return bg(t,e,n)}))}(this._delegate),t.then((function(e){return new Kg(n.firestore,new ug(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Ug.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new uo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new By(n._delegate,r,new Do(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new By(n._delegate,r,t))}}]),e}();function jg(e,t,n){return e.message=e.message.replace(t,n),e}function zg(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Pg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function qg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Pg(e[0])?e[0]:Pg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Kg=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n}return C(e,[{key:"ref",get:function(){return new Bg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return fg(this._delegate,e._delegate)}}]),e}(),Gg=function(e){O(n,e);var t=R(n);function n(){return T(this,n),t.apply(this,arguments)}return C(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ro()}(void 0!==t),t}}]),n}(Kg),Qg=function(){function e(t,n){T(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Mg(t)}return C(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,jm(this._delegate,function(e,t,n){var r=t,i=Fm("where",e);return zm._create(i,r,n)}(t,n,r)))}catch(i){throw jg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,jm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Fm("orderBy",e);return Km._create(n,t)}(t,n)))}catch(r){throw jg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,jm(this._delegate,function(e){return My("limit",e),Gm._create("limit",e,"F")}(t)))}catch(n){throw jg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,jm(this._delegate,function(e){return My("limitToLast",e),Gm._create("limitToLast",e,"L")}(t)))}catch(n){throw jg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,jm(this._delegate,Hm.apply(void 0,arguments)))}catch(t){throw jg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,jm(this._delegate,Wm.apply(void 0,arguments)))}catch(t){throw jg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,jm(this._delegate,Xm.apply(void 0,arguments)))}catch(t){throw jg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,jm(this._delegate,Ym.apply(void 0,arguments)))}catch(t){throw jg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Qy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ry(e,jy);var t=Ry(e.firestore,Xy),n=Yy(t),r=new hg(t);return Cy(n,e._query,{source:"server"}).then((function(n){return new cg(t,r,e,n)}))}(this._delegate):function(e){e=Ry(e,jy);var t=Ry(e.firestore,Xy),n=Yy(t),r=new hg(t);return Vm(e._query),Cy(n,e._query).then((function(n){return new cg(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Wg(n.firestore,new cg(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zg(n),a=qg(n,(function(t){return new Wg(e.firestore,new cg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return mg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Ug.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Hg=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n}return C(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Gg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Wg=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n}return C(e,[{key:"query",get:function(){return new Qg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Gg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Hg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Gg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return fg(this._delegate,e._delegate)}}]),e}(),$g=function(e){O(n,e);var t=R(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return C(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Bg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Bg(this.firestore,void 0===e?Ky(this._delegate):Ky(this._delegate,e))}catch(t){throw jg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Ry(e.firestore,Xy),r=Ky(e),i=ig(e.converter,t);return kg(n,[ym(pm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Bg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Gy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Ug.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Qg);function Xg(e){return Ry(e,By)}var Yg,Jg=function(){function e(){T(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=M(om,n)}return C(e,[{key:"isEqual",value:function(e){return(e=ue(e))instanceof om&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Co.keyField().canonicalString())}}]),e}(),Zg=function(){function e(t){T(this,e),this._delegate=t}return C(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new km("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new mm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=_g.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Tg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new xm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),ek={Firestore:Rg,GeoPoint:sm,Timestamp:So,Blob:Og,Transaction:Fg,WriteBatch:Vg,DocumentReference:Bg,DocumentSnapshot:Kg,Query:Qg,QueryDocumentSnapshot:Gg,QuerySnapshot:Wg,CollectionReference:$g,FieldPath:Jg,FieldValue:Zg,setLogLevel:function(e){!function(e){Ya.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function tk(){(0,t.useContext)(uk),(0,t.useContext)(sk);var e=f((0,t.useState)(!0),2),n=e[0],r=e[1],i=(0,t.useRef)();return(0,d.jsx)("div",{className:_.addChat,children:n?(0,d.jsx)("button",{onClick:function(){r(!1)},children:"Start a new chat"}):(0,d.jsxs)("form",{children:[(0,d.jsx)("label",{htmlFor:"title",children:"Submit chat title:"}),(0,d.jsx)("input",{id:"title",type:"text",ref:i}),(0,d.jsxs)("div",{className:_.buttons,children:[(0,d.jsx)("button",{children:"Cancel"}),(0,d.jsx)("button",{onClick:function(e){e.preventDefault();var t={title:i.current.value?i.current.value:null,createdAt:jt.firestore.Timestamp.now()};fetch("https://myduck-fb785-default-rtdb.firebaseio.com/chats.json",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(){r(!0),window.location.reload(!1)}))},children:"Submit"})]})]})})}(function(e,t){e.INTERNAL.registerComponent(new he("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ek)))})(Yg=jt,(function(e,t){return new Rg(e,t,new Lg)})),Yg.registerVersion(Ig,Cg);var nk={chatHistory:"ChatHistory_chatHistory__7FJa2",chatButtons:"ChatHistory_chatButtons__Nkm0b"};function rk(){var e=(0,t.useContext)(uk),n=(0,t.useContext)(sk),r={fontWeight:"bold",color:"ivory",backgroundColor:"orange"};function i(e){if(e===n)return r}return(0,d.jsx)("div",{className:nk.chatButtons,children:e.map((function(e){return(0,d.jsx)("button",{style:i(e.id),children:e.title?e.title:"Untitled Quacks"},e.id)})).reverse()})}function ik(){var e=(0,t.useContext)(uk);(0,t.useContext)(sk);return e.length?(0,d.jsxs)("nav",{children:[(0,d.jsx)("h2",{children:"Chat history"}),(0,d.jsx)(rk,{}),(0,d.jsx)("h3",{children:"New topic?"}),(0,d.jsx)(tk,{})]}):(0,d.jsxs)("nav",{children:[(0,d.jsx)("h2",{children:"Let's quack"}),(0,d.jsx)(tk,{})]})}var ak={mainbody:"Layout_mainbody__BL9G1"};function ok(){return(0,d.jsxs)("body",{children:[(0,d.jsx)(p,{}),(0,d.jsxs)("div",{className:ak.mainbody,children:[(0,d.jsx)("nav",{children:(0,d.jsx)("h2",{children:"Loading chats..."})}),(0,d.jsx)(S,{})]})]})}var uk=t.createContext(),sk=t.createContext();function ck(){var e=f((0,t.useState)(!0),2),n=e[0],r=e[1],i=f((0,t.useState)([]),2),a=i[0],o=i[1],u=f((0,t.useState)(null),2),c=u[0],l=u[1];return(0,t.useEffect)((function(){r(!0),fetch("https://myduck-fb785-default-rtdb.firebaseio.com/chats.json").then((function(e){return e.json()})).then((function(e){var t=[];for(var n in e){var i=s({id:n},e[n]);t.push(i)}r(!1),o(t),t.length&&l(t[t.length-1].id)}))}),[]),n?(0,d.jsx)(ok,{}):(0,d.jsxs)("body",{children:[(0,d.jsx)(p,{}),(0,d.jsx)(uk.Provider,{value:a,children:(0,d.jsx)(sk.Provider,{value:c,children:(0,d.jsxs)("div",{className:ak.mainbody,children:[(0,d.jsx)(ik,{}),(0,d.jsx)(E,{})]})})})]})}var lk=function(){return(0,d.jsx)(ck,{})};function fk(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,A(e,t)}var hk=n(7),dk=n.n(hk);function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vk.apply(this,arguments)}function pk(e){return"/"===e.charAt(0)}function yk(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var mk=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&pk(e),o=t&&pk(t),u=a||o;if(e&&pk(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?yk(i,l):".."===f?(yk(i,l),c++):c&&(yk(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&pk(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h},gk=!0,kk="Invariant failed";function bk(e,t){if(!e){if(gk)throw new Error(kk);var n="function"===typeof t?t():t,r=n?"".concat(kk,": ").concat(n):kk;throw new Error(r)}}function wk(e){return"/"===e.charAt(0)?e:"/"+e}function xk(e){return"/"===e.charAt(0)?e.substr(1):e}function Sk(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Ek(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function _k(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function Tk(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=vk({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=mk(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Ik(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var Ck=!("undefined"===typeof window||!window.document||!window.document.createElement);function Dk(e,t){t(window.confirm(e))}var Nk="popstate",Ak="hashchange";function Ok(){try{return window.history.state||{}}catch(e){return{}}}function Pk(e){void 0===e&&(e={}),Ck||bk(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?Dk:u,c=i.keyLength,l=void 0===c?6:c,f=e.basename?Ek(wk(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&(a=Sk(a,f)),Tk(a,r,n)}function d(){return Math.random().toString(36).substr(2,l)}var v=Ik();function p(e){vk(I,e),I.length=t.length,v.notifyListeners(I.location,I.action)}function y(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||k(h(e.state))}function m(){k(h(Ok()))}var g=!1;function k(e){if(g)g=!1,p();else{v.confirmTransitionTo(e,"POP",s,(function(t){t?p({action:"POP",location:e}):function(e){var t=I.location,n=w.indexOf(t.key);-1===n&&(n=0);var r=w.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(g=!0,S(i))}(e)}))}}var b=h(Ok()),w=[b.key];function x(e){return f+_k(e)}function S(e){t.go(e)}var E=0;function _(e){1===(E+=e)&&1===e?(window.addEventListener(Nk,y),r&&window.addEventListener(Ak,m)):0===E&&(window.removeEventListener(Nk,y),r&&window.removeEventListener(Ak,m))}var T=!1;var I={length:t.length,action:"POP",location:b,createHref:x,push:function(e,r){var i="PUSH",a=Tk(e,r,d(),I.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=x(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=w.indexOf(I.location.key),l=w.slice(0,c+1);l.push(a.key),w=l,p({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=Tk(e,r,d(),I.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=x(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=w.indexOf(I.location.key);-1!==c&&(w[c]=a.key),p({action:i,location:a})}else window.location.replace(r)}}))},go:S,goBack:function(){S(-1)},goForward:function(){S(1)},block:function(e){void 0===e&&(e=!1);var t=v.setPrompt(e);return T||(_(1),T=!0),function(){return T&&(T=!1,_(-1)),t()}},listen:function(e){var t=v.appendListener(e);return _(1),function(){_(-1),t()}}};return I}var Lk="hashchange",Rk={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+xk(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:xk,decodePath:wk},slash:{encodePath:wk,decodePath:wk}};function Mk(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Fk(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Vk(e){window.location.replace(Mk(window.location.href)+"#"+e)}function Uk(e){void 0===e&&{},Ck||bk(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?Dk:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?Ek(wk(e.basename)):"",s=Rk[o],c=s.encodePath,l=s.decodePath;function f(){var e=l(Fk());return u&&Sk(e,u),Tk(e)}var h=Ik();function d(e){vk(_,e),_.length=t.length,h.notifyListeners(_.location,_.action)}var v=!1,p=null;function y(){var e=Fk(),t=c(e);if(e!==t)Vk(t);else{var n=f(),r=_.location;if(!v&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(p===_k(n))return;null,function(e){if(v)!1,d();else{var t="POP";h.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=_.location,n=b.lastIndexOf(_k(t));-1===n&&0;var r=b.lastIndexOf(_k(e));-1===r&&0;var i=n-r;i&&(!0,w(i))}(e)}))}}(n)}}var m=Fk(),g=c(m);m!==g&&Vk(g);var k=f(),b=[_k(k)];function w(e){t.go(e)}var x=0;function S(e){1===(x+=e)&&1===e?window.addEventListener(Lk,y):0===x&&window.removeEventListener(Lk,y)}var E=!1;var _={length:t.length,action:"POP",location:k,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&Mk(window.location.href),n+"#"+c(u+_k(e))},push:function(e,t){var n="PUSH",r=Tk(e,void 0,void 0,_.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_k(r),i=c(u+t);if(Fk()!==i){t,function(e){window.location.hash=e}(i);var a=b.lastIndexOf(_k(_.location)),o=b.slice(0,a+1);o.push(t),o,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=Tk(e,void 0,void 0,_.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_k(r),i=c(u+t);Fk()!==i&&(t,Vk(i));var a=b.indexOf(_k(_.location));-1!==a&&(b[a]=t),d({action:n,location:r})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&!1;var t=h.setPrompt(e);return E||(S(1),!0),function(){return E&&(!1,S(-1)),t()}},listen:function(e){var t=h.appendListener(e);return S(1),function(){S(-1),t()}}};return _}function Bk(e,t,n){return Math.min(Math.max(e,t),n)}var jk=n(239),zk=n.n(jk);n(228);function qk(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var Kk=1073741823,Gk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var Qk=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return Gk[e]=(Gk[e]||0)+1}()+"__",o=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}fk(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):Kk,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=dk().object.isRequired,r);var u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}fk(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?Kk:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?Kk:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=dk().object,i),{Provider:o,Consumer:u}},Hk=function(e){var t=Qk();return t.displayName=e,t},Wk=Hk("Router-History"),$k=Hk("Router"),Xk=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}fk(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement($k.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(Wk.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var Yk={},Jk=1e4,Zk=0;function eb(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Yk[n]||(Yk[n]={});if(r[e])return r[e];var i=[],a={regexp:zk()(e,i,t),keys:i};return Zk<Jk&&(r[e]=a,Zk++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}t.Component;function tb(e){return"/"===e.charAt(0)?e:"/"+e}function nb(e,t){if(!e)return t;var n=tb(e);return 0!==t.pathname.indexOf(n)?t:vk({},t,{pathname:t.pathname.substr(n.length)})}function rb(e){return"string"===typeof e?e:_k(e)}function ib(e){return function(){bk(!1)}}function ab(){}t.Component;t.Component;t.useContext;var ob=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Pk(t.props),t}return fk(n,e),n.prototype.render=function(){return t.createElement(Xk,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var ub=function(e,t){return"function"===typeof e?e(t):e},sb=function(e,t){return"string"===typeof e?Tk(e,null,null,t):e},cb=function(e){return e},lb=t.forwardRef;"undefined"===typeof lb&&(lb=cb);var fb=lb((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=qk(e,["innerRef","navigate","onClick"]),u=o.target,s=vk({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=cb!==lb&&n||r,t.createElement("a",s)}));var hb=lb((function(e,n){var r=e.component,i=void 0===r?fb:r,a=e.replace,o=e.to,u=e.innerRef,s=qk(e,["component","replace","to","innerRef"]);return t.createElement($k.Consumer,null,(function(e){e||bk(!1);var r=e.history,c=sb(ub(o,e.location),e.location),l=c?r.createHref(c):"",f=vk({},s,{href:l,navigate:function(){var t=ub(o,e.location),n=_k(e.location)===_k(sb(t));(a||n?r.replace:r.push)(t)}});return cb!==lb?f.ref=n||u:f.innerRef=u,t.createElement(i,f)}))})),db=function(e){return e},vb=t.forwardRef;"undefined"===typeof vb&&(vb=db);vb((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,f=e.location,h=e.sensitive,d=e.strict,v=e.style,p=e.to,y=e.innerRef,m=qk(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement($k.Consumer,null,(function(e){e||bk(!1);var r=f||e.location,a=sb(ub(p,r),r),g=a.pathname,k=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=k?eb(r.pathname,{path:k,exact:c,sensitive:h,strict:d}):null,w=!!(l?l(b,r):b),x="function"===typeof s?s(w):s,S="function"===typeof v?v(w):v;w&&(x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(x,o),S=vk({},S,u));var E=vk({"aria-current":w&&i||null,className:x,style:S,to:a},m);return db!==vb?E.ref=n||y:E.innerRef=y,t.createElement(hb,E)}))}));r.createRoot(document.getElementById("root")).render((0,d.jsx)(ob,{children:(0,d.jsx)(lk,{})}))}()}();
//# sourceMappingURL=main.30c9db12.js.map