/*! For license information please see main.377c627a.js.LICENSE.txt */
!function(){var e={338:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0l-3-3m3 3l3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}))}));e.exports=o},197:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}));e.exports=o},838:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}));e.exports=o},717:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"}))}));e.exports=o},910:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"}))}));e.exports=o},223:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}));e.exports=o},680:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"}))}));e.exports=o},570:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}));e.exports=o},69:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}))}));e.exports=o},602:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}));e.exports=o},448:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}));e.exports=o},841:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}));e.exports=o},779:function(e,t,n){var r=n(215).default,i=["title","titleId"],a=n(867);var o=a.forwardRef((function(e,t){var n=e.title,o=e.titleId,u=r(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}));e.exports=o},772:function(e,t,n){"use strict";var r=n(867),i=n(882);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function B(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case I:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function $(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,Se=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),xe(e.stateNode,e.type,t))}}function Te(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function _e(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return _e(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Se)&&(Ae(),Ce())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Oe=!1}function Pe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,je=null,Fe=!1,Ve=null,Be={onError:function(e){Me=!0,je=e}};function Ue(e,t,n,r,i,a,o,u,s){Me=!1,je=null,Pe.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,Et,St,It,Tt=!1,Ct=[],_t=null,At=null,Nt=null,Dt=new Map,Lt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Tt=!1,null!==_t&&Ft(_t)&&(_t=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Dt.forEach(Vt),Lt.forEach(Vt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Ut(_t,e),null!==At&&Ut(At,e),null!==Nt&&Ut(Nt,e),Dt.forEach(t),Lt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)jt(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Qt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Xt(e,t,n,r);if(null===i)Kr(e,t,r,Wt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return _t=Mt(_t,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Lt.set(a,Mt(Lt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Xt(e,t,n,r))&&Kr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Wt=null;function Xt(e,t,n,r){if(Wt=null,null!==(e=gi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=j({},cn,{view:0,detail:0}),hn=an(fn),dn=j({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(j({},dn,{dataTransfer:0})),mn=an(j({},fn,{relatedTarget:0})),yn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(j({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function In(){return Sn}var Tn=j({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Tn),_n=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Nn=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=an(Dn),On=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var Mn=l&&"TextEvent"in window&&!Pn,jn=l&&(!Rn||Pn&&8<Pn&&11>=Pn),Fn=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Hn=null;function Wn(e){Fr(e,0)}function Xn(e){if(H(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Hn=Qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Hn)){var t=[];Gn(t,Hn,e,be(e)),De(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Hn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==W(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Qr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Er={},Sr={};function Ir(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Ir("animationend"),Cr=Ir("animationiteration"),_r=Ir("animationstart"),Ar=Ir("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Rr=Dr[Or];Lr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(Cr,"onAnimationIteration"),Lr(_r,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=je;Me=!1,je=null,Fe||(Fe=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;jr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;jr(i,u,c),a=s}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=be(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Cn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Tr:case Cr:case _r:s=yn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=_n}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Le(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=_n,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Hr(d))v++;for(d=0,p=h;p;p=Hr(p))d++;for(;0<v-d;)l=Hr(l),v--;for(;0<d-v;)h=Hr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Qr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Un(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Bn(e,t)?(e=en(),Zt=$t=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Le(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Le(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Le(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Le(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var xi=[],Ei=-1;function Si(e){return{current:e}}function Ii(e){0>Ei||(e.current=xi[Ei],xi[Ei]=null,Ei--)}function Ti(e,t){Ei++,xi[Ei]=e.current,e.current=t}var Ci={},_i=Si(Ci),Ai=Si(!1),Ni=Ci;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ai),Ii(_i)}function Ri(e,t,n){if(_i.current!==Ci)throw Error(a(168));Ti(_i,t),Ti(Ai,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=_i.current,Ti(_i,e),Ti(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ai),Ii(_i),Ti(_i,e)):Ii(Ai),Ti(Ai,n)}var Fi=null,Vi=!1,Bi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Ze,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Hi=[],Wi=0,Xi=null,Yi=1,Ji="";function $i(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function Zi(e,t,n){Hi[Wi++]=Yi,Hi[Wi++]=Ji,Hi[Wi++]=Xi,Xi=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Xi;)Xi=Hi[--Wi],Hi[Wi]=null,Ji=Hi[--Wi],Hi[Wi]=null,Yi=Hi[--Wi],Hi[Wi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function xa(e){var t=ya.current;Ii(ya),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ca(e){null===Ta?Ta=[e]:Ta.push(e)}function _a(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Pa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=j({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);js|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),Pa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),Pa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(rc(t,e,r,n),Pa(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Li(t)?Ni:_i.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Li(t)?Ni:_i.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ua.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===L&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Qa(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Qa(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case L:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,m=null;null!==f&&p<u.length;p++){f.index>p?(m=f,f=null):m=f.sibling;var y=d(i,f,u[p],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y,f=m}if(p===u.length)return n(i,f),ia&&$i(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&$i(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(m=v(f,i,p,u[p],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?p:m.key),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&$i(i,p),c}function m(i,u,s,c){var l=P(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,m=u=0,y=null,g=s.next();null!==p&&!g.done;m++,g=s.next()){p.index>m?(y=p,p=null):y=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=y);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,p=y}if(g.done)return n(i,p),ia&&$i(i,m),l;if(null===p){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&$i(i,m),l}for(p=r(i,p);!g.done;m++,g=s.next())null!==(g=v(p,i,m,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&$i(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=Qa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case L:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(P(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=Xa(!0),Ja=Xa(!1),$a={},Za=Si($a),eo=Si($a),to=Si($a);function no(e){if(e===$a)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Ti(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,vo=0,po=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function xo(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,vo=0,yo=mo=po=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?po.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===mo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?po.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?po.memoizedState=yo=e:yo=yo.next=e}return yo}function _o(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,js|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,js|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Lo(e,t){var n=po,r=Co(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Ko(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&vo)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&jo(e)}function Po(e,t,n){return n((function(){Mo(t)&&jo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function jo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Co().memoizedState}function Uo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}po.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Uo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Qo(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function Xo(){}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,js|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Co().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=_a(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ca(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=_a(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Fo,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&vo)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:Yo,useContext:Ia,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Jo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(_o)},useDebugValue:Xo,useDeferredValue:function(e){return $o(Co(),mo.memoizedState,e)},useTransition:function(){return[Ao(_o)[0],Co().memoizedState]},useMutableSource:Do,useSyncExternalStore:Lo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:Yo,useContext:Ia,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Jo,useReducer:No,useRef:Bo,useState:function(){return No(_o)},useDebugValue:Xo,useDeferredValue:function(e){var t=Co();return null===mo?t.memoizedState=e:$o(t,mo.memoizedState,e)},useTransition:function(){return[No(_o)[0],Co().memoizedState]},useMutableSource:Do,useSyncExternalStore:Lo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Qs=r),hu(0,t)},n}function pu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Io(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rs,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Rs,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Rs,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Rs,Os),Os|=r;return bu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Li(n)?Ni:_i.current;return a=Di(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Io(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(Li(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Di(t,c=Li(n)?Ni:_i.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,ja(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,La(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Di(t,s=Li(n)?Ni:_i.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,ja(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Ai.current||Na?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Na||za(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),va(i),t.flags|=256,bu(e,t,n,r),t.child}var Lu,Ou,Ru,Pu,Mu={dehydrated:null,treeContext:null,retryLane:0};function ju(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=jc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=ju(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=ju(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Wi++]=Yi,Hi[Wi++]=Ji,Hi[Wi++]=Xi,Yi=e.id,Ji=e.overflow,Xi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?ju(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&va(r),Ya(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uu(e,n,t);else if(19===e.tag)Uu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),js|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Li(t.type)&&Oi(),Hu(t),null;case 3:return r=t.stateNode,io(),Ii(Ai),Ii(_i),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Vr(Pr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":Q(r),Z(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Lu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Vr(Pr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Pu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ps&&(Ps=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ou(e,t),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Qu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Qu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xu(e,t){switch(ta(t),t.tag){case 1:return Li(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ai),Ii(_i),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Lu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Ju=!1,$u="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ic(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==v?(v.return=d,Zu=v):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=Yu;var c=Ju;if(Yu=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?Es(i):null!==s?(s.return=o,Zu=s):Es(i);for(;null!==a;)Zu=a,ws(a,t,n),a=a.sibling;Zu=i,Yu=u,Ju=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function Es(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Is=Math.ceil,Ts=w.ReactCurrentDispatcher,Cs=w.ReactCurrentOwner,_s=w.ReactCurrentBatchConfig,As=0,Ns=null,Ds=null,Ls=0,Os=0,Rs=Si(0),Ps=0,Ms=null,js=0,Fs=0,Vs=0,Bs=null,Us=null,zs=0,qs=1/0,Ks=null,Gs=!1,Qs=null,Hs=null,Ws=!1,Xs=null,Ys=0,Js=0,$s=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Ls?Ls&-Ls:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,$s=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(Fs|=n),4===Ps&&sc(e,Ls)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=Je()+500,Vi&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ls:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Vi=!0,Ui(e)}(cc.bind(null,e)):Ui(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ls:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=pc();for(Ns===e&&Ls===t||(Ks=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}ba(),Ts.current=o,As=i,null!==Ds?t=0:(Ns=null,Ls=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Us,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Us,Ks),t);break}xc(e,Us,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Us,Ks),r);break}xc(e,Us,Ks);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Us,Us=n,null!==t&&uc(t)),e}function uc(e){null===Us?Us=e:Us.push.apply(Us,e)}function sc(e,t){for(t&=~Vs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Us,Ks),ic(e,Je()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=Je()+500,Vi&&zi())}}function fc(e){null!==Xs&&0===Xs.tag&&0===(6&As)&&Ec();var t=As;As|=1;var n=_s.transition,r=kt;try{if(_s.transition=null,kt=1,e)return e()}finally{kt=r,_s.transition=n,0===(6&(As=t))&&zi()}}function hc(){Os=Rs.current,Ii(Rs)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ii(Ai),Ii(_i),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Ds=e=Rc(e.current,null),Ls=Os=t,Ps=0,Ms=null,Vs=Fs=js=0,Us=Bs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function vc(e,t){for(;;){var n=Ds;try{if(ba(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,yo=mo=po=null,ko=!1,wo=0,Cs.current=null,null===n||null===n.return){Ps=1,Ms=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ls,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=yu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&mu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ps&&(Ps=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function pc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function mc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Ns||0===(268435455&js)&&0===(268435455&Fs)||sc(Ns,Ls)}function yc(e,t){var n=As;As|=2;var r=pc();for(Ns===e&&Ls===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(ba(),As=n,Ts.current=r,null!==Ds)throw Error(a(261));return Ns=null,Ls=0,Ps}function gc(){for(;null!==Ds;)wc(Ds)}function kc(){for(;null!==Ds&&!Xe();)wc(Ds)}function wc(e){var t=Ss(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?bc(e):Ds=t,Cs.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Os)))return void(Ds=n)}else{if(null!==(n=Xu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Ps=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ps&&(Ps=5)}function xc(e,t,n){var r=kt,i=_s.transition;try{_s.transition=null,kt=1,function(e,t,n,r){do{Ec()}while(null!==Xs);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ds=Ns=null,Ls=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=_s.transition,_s.transition=null;var u=kt;kt=1;var s=As;As|=4,Cs.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ys(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,_s.transition=o}else e.current=n;if(Ws&&(Ws=!1,Xs=e,Ys=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Qs,Qs=null,e;0!==(1&Ys)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===$s?Js++:(Js=0,$s=e):Js=0,zi()}(e,t,n,r)}finally{_s.transition=i,kt=r}return null}function Ec(){if(null!==Xs){var e=wt(Ys),t=_s.transition,n=kt;try{if(_s.transition=null,kt=16>e?16:e,null===Xs)var r=!1;else{if(e=Xs,Xs=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,_s.transition=t}}return!1}function Sc(e,t,n){e=Ra(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Ra(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ls&n)===n&&(4===Ps||3===Ps&&(130023424&Ls)===Ls&&500>Je()-zs?dc(e,0):Vs|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return He(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case S:u=8,i|=8;break;case I:return(e=Lc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=Lc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Lc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case _:u=11;break e;case D:u=14;break e;case L:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Lc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Lc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function zc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Li(n))return Pi(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Uc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(rc(e,i,o,a),Pa(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Li(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Gu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Di(t,_i.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ua,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===D)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=_u(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,La(e,t),ja(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ea(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ia(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Eu(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Li(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[vi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&As)&&(qs=Je()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},St=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));H(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Te,Ce,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},192:function(e,t,n){"use strict";var r=n(544);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},544:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(772)},482:function(e,t,n){"use strict";var r=n(867),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},285:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,p(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+_(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+_(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+_(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},O={transition:null},R={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.2.0"},867:function(e,t,n){"use strict";e.exports=n(285)},834:function(e,t,n){"use strict";e.exports=n(482)},73:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!p)if(null!==r(c))p=!0,O(x);else{var t=r(l);null!==t&&R(b,t.startTime-e)}}function x(e,n){p=!1,m&&(m=!1,g(T),T=-1),v=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,I=null,T=-1,C=5,_=-1;function A(){return!(t.unstable_now()-_<C)}function N(){if(null!==I){var e=t.unstable_now();_=e;var n=!0;try{n=I(!0,e)}finally{n?E():(S=!1,I=null)}}else S=!1}if("function"===typeof k)E=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,L=D.port2;D.port1.onmessage=N,E=function(){L.postMessage(null)}}else E=function(){y(N,0)};function O(e){I=e,S||(S=!0,E())}function R(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,R(b,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,O(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},882:function(e,t,n){"use strict";e.exports=n(73)},215:function(e,t,n){var r=n(71);e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},71:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/myduck/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ft},SDK_VERSION:function(){return Qn},_DEFAULT_ENTRY_NAME:function(){return On},_addComponent:function(){return jn},_addOrOverwriteComponent:function(){return Fn},_apps:function(){return Pn},_clearComponents:function(){return zn},_components:function(){return Mn},_getProvider:function(){return Bn},_registerComponent:function(){return Vn},_removeServiceInstance:function(){return Un},deleteApp:function(){return Yn},getApp:function(){return Wn},getApps:function(){return Xn},initializeApp:function(){return Hn},onLog:function(){return Zn},registerVersion:function(){return $n},setLogLevel:function(){return er}});var t,r=n(867),i=n.t(r,2),a=n(192);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||f(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){var t=b();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function S(e,t,n){return S=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},S.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},I(e)}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var _,A="popstate";function N(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function D(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function L(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?P(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function R(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function P(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function M(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=v();function v(){return(l.state||{idx:null}).idx}function p(){f=t.Pop;var e=v(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:R(e);return N(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(A,p),h=e,function(){u.removeEventListener(A,p),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(y.location,e,n);r&&r(i,e);var a=L(i,d=v()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(s){u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=O(y.location,e,n);r&&r(i,e);var a=L(i,d=v()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(_||(_={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function j(e,t,n){void 0===n&&(n="/");var r=J(("string"===typeof t?P(t):t).pathname||"/",n);if(null==r)return null;var i=F(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=W(i[o],Y(r));return a}function F(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(N(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=te([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(N(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),F(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:H(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=T(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n,r=o(n=t)||f(n)||s(n)||c(),i=r[0],a=r.slice(1),u=i.endsWith("?"),l=i.replace(/\?$/,"");if(0===a.length)return u?[l,""]:[l];var d=V(a.join("/")),v=[];return v.push.apply(v,h(d.map((function(e){return""===e?l:[l,e].join("/")})))),u&&v.push.apply(v,h(d)),v.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var B=/^:\w+$/,U=3,z=2,q=1,K=10,G=-2,Q=function(e){return"*"===e};function H(e,t){var n=e.split("/"),r=n.length;return n.some(Q)&&(r+=G),t&&(r+=z),n.filter((function(e){return!Q(e)})).reduce((function(e,t){return e+(B.test(t)?U:""===t?q:K)}),r)}function W(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=X({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:te([i,l.pathname]),pathnameBase:ne(te([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=te([i,l.pathnameBase]))}return a}function X(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);D("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return D(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function Y(e){try{return decodeURI(e)}catch(t){return D(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function J(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Z(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ee(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=P(e):(N(!(i=C({},e)).pathname||!i.pathname.includes("?"),$("?","pathname","search",i)),N(!i.pathname||!i.pathname.includes("#"),$("#","pathname","hash",i)),N(!i.search||!i.search.includes("#"),$("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?P(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:re(a),hash:ie(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var te=function(e){return e.join("/").replace(/\/\/+/g,"/")},ne=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},re=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ie=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ae=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(I(Error));function oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ue=["post","put","patch","delete"],se=(new Set(ue),["get"].concat(ue));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var ce="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},le=r.useState,fe=r.useEffect,he=r.useLayoutEffect,de=r.useDebugValue;function ve(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ce(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var pe=r.createContext(null);var me=r.createContext(null);var ye=r.createContext(null);var ge=r.createContext(null);var ke=r.createContext(null);var we=r.createContext({outlet:null,matches:[]});var be=r.createContext(null);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Ee(){return null!=r.useContext(ke)}function Se(){return Ee()||N(!1),r.useContext(ke).location}function Ie(){Ee()||N(!1);var e=r.useContext(ge),t=e.basename,n=e.navigator,i=r.useContext(we).matches,a=Se().pathname,o=JSON.stringify(Z(i).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);r.useEffect((function(){u.current=!0}));var s=r.useCallback((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=ee(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:te([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return s}function Te(){var e=function(){var e,t=r.useContext(be),n=Le(_e.UseRouteError),i=Oe(_e.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=oe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ce,_e,Ae=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(we.Provider,{value:this.props.routeContext},r.createElement(be.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function Ne(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(pe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(we.Provider,{value:t},i)}function De(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||N(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;n&&(c=o.route.ErrorBoundary?r.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:r.createElement(Te,null));var l=t.concat(i.slice(0,u+1)),f=function(){var t=e;return s?t=c:o.route.Component?t=r.createElement(o.route.Component,null):o.route.element&&(t=o.route.element),r.createElement(Ne,{match:o,routeContext:{outlet:e,matches:l},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===u)?r.createElement(Ae,{location:n.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function Le(e){var t=r.useContext(me);return t||N(!1),t}function Oe(e){var t=function(e){var t=r.useContext(we);return t||N(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||N(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Ce||(Ce={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(_e||(_e={}));var Re;function Pe(e){N(!1)}function Me(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;Ee()&&N(!1);var d=i.replace(/^\/*/,"/"),v=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=P(u));var p=u,m=p.pathname,y=void 0===m?"/":m,g=p.search,k=void 0===g?"":g,w=p.hash,b=void 0===w?"":w,x=p.state,E=void 0===x?null:x,S=p.key,I=void 0===S?"default":S,T=r.useMemo((function(){var e=J(y,d);return null==e?null:{location:{pathname:e,search:k,hash:b,state:E,key:I},navigationType:c}}),[d,y,k,b,E,I,c]);return null==T?null:r.createElement(ge.Provider,{value:v},r.createElement(ke.Provider,{children:o,value:T}))}function je(e){var n=e.children,i=e.location,a=r.useContext(pe);return function(e,n){Ee()||N(!1);var i,a=r.useContext(ge).navigator,o=r.useContext(me),u=r.useContext(we).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,Se());if(n){var h,d="string"===typeof n?P(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||N(!1),i=d}else i=f;var v=i.pathname||"/",p=j(e,{pathname:"/"===l?v:v.slice(l.length)||"/"}),m=De(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:te([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:te([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,o||void 0);return n&&m?r.createElement(ke.Provider,{value:{location:xe({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},m):m}(a&&!n?a.router.routes:Ve(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Re||(Re={}));var Fe=new Promise((function(){}));r.Component;function Ve(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(h(t),[i]);if(e.type!==r.Fragment){e.type!==Pe&&N(!1),e.props.index&&e.props.children&&N(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),n.push(o)}else n.push.apply(n,Ve(e.props.children,a))}})),n}function Be(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),M((function(e,t){var n=e.location;return O("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:R(t)}),null,t)));var u=o.current,s=l(r.useState({action:u.action,location:u.location}),2),c=s[0],f=s[1];return r.useLayoutEffect((function(){return u.listen(f)}),[u]),r.createElement(Me,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ue,ze;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ue||(Ue={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ze||(ze={}));var qe=n(834);function Ke(){return(0,qe.jsx)("div",{className:"absolute -z-10 h-screen w-screen bg-gradient-to-br from-vincent-400/80 via-vincent-400 to-vincent-800"})}var Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAZQTFRFAAAA++2ZfvWDvwAAAAJ0Uk5TAP9bkSK1AAAIIklEQVR4nO2cTXLlKAyA4/LCSx+Bo3A0fDSO4iP0MotUPJNnDJIQAsHr7qkptEr4+SwkAf4R7+NjypQpU6ZMmTJlypQpU6ZMmTJlypQpU5Cs13WM9N+uf8X3919++l/f/QDzAly/xhQYUGEPgG4ruAfw2df/GUH3GLYI6IwFmwBnF8AlQJcRkgk6jQBM0GeEHQJ8B8BCQE80OwjosCK0YZcVVwS49IANAw41YMcArwYYDDjVAIsBejc4DPhSA3B/vR8XAlD7cR0FbBRwKAE7BfhRwKkEGArQTmhLAdpIGgY4CtCGYuj23b3DpvBZuwAL8J2JLD3g9ffaE4ortLzrAGww+kxHLG/woojWKDs0/NILiLHTMRl21MXqAQYpbfSTwSC773qARZ7f9LPJouBd9QCHps/SBwA99NORAJwaQMyOTdIKAJFjRgG7dj4vZPYMA7YugE//r9oVZRiwEpUpsA9wagGwQAvY3g5wHQA0eZxyUcwA9k8D9rQcuM8xwHJrYpTLcgJsd0D1A/Y7hHsAd3tz+39XAtIF7W28foC7/wBu6QNsHYDb7aHj3wMsIab/OMBSwKrcHN8COCfgNwA0e1sGeO1tChUcC1BsLWkjCiGsfT3r4ogRoF2FBAgLyvP0OAxo3VwSICyq8Y2IGhCW9QhoXJoTIGws6Z3MoQSErS0B2lRIgLC5grdCXgcI2zsANKng6JUAoCkcJUCTGUWA5/u0A85RQEs4OzpUCGhxQ26rdwJa9sgc4N4IaImkHGBHAWYUsI8C4DvWLsAyCoBu6ANso4CkQp8RgQq9gBhL3YB1FPCo0A9QvJ7lAWFC9E3nlyyjgFuFEcDHMODHEX2LahA3CrjeAWjZmUqAhQDAIpELB14xIPuaVQW8pvSJ/1UBdgzIviVVAeanwuN/VQCLAVYNcBjg1IBXxdEPWAlA7M8BNlKhBhhcIccRB3iN+bsfQJ+81IA78L76Aa8RgOVACwiR3w1wobx1NlPA078ZQDaw1PjsA6S1w/cB0tpx9AHMKMDGCs4unJAd0DHgPsBXK4BsYFx5H+BXKwDvgFwcVQBnAeBbAb4AOFoBRwHAFjJSmkvfrYDPAuCLFn60ycqBuwDnKMCPAo5BAHJODwA5pweAZkgPwGeAQwfApXoAWab0gHMUQErVAPqsogb4QUD2sKQFZKVKQP7E+t8A+BGAm4A/Csg+hUfA2Q7I3xv8fYD9XwEs+1rCxdIy4G6ysO+3QGkNsJaedFsBOxuSoJT/eG8iwLDWBKU1gGVf7oBSPv/gLQCUZUAElNYA7Ahh6W8C7HXAE0lGBiwXt94sTYCvtwHyWKaA3NHDgO0dgPQ986DV6zsBtgHgfzvgzADxzonPnFMA+MS3TQnIhggBrhfwTDEBcDz1WajvVcCCANl8pgA/AmD9DACWm8+mDeBFwGMYHpCKDTcdrRZwlAGlB7wYgIa7QgMgenfnAC5FVxvgZPRrALyabFwsgzKa+MoDuNcmJwDk/dM6wz2UtQI+S4AVALLEVwrgEp7gCdMSwCAAaUEB3H1cmi5XbmaYp10HuDySYHjvAuA7AU5UaQmA+8yYwDaPJAfM0gjAkQQBRgBcsQUZJSwpAZJ798yPKDRsph8AHAlw0LrnqnXA/fLe0+HVAGmW3u9IoBsMNKu72HthkDSITg/Fi1YBaV3Pk/ccVEkEnK8/L2LFBY0pj9MM4IgV8RGkEgAse45YcYfAcu5/6vSyGYg2mwF83h1+CTcXjkVkk3KKp4uA8BXn0RO/vZMBMT8dOh4rVD4DYing6XKhuJAB31DnMIaAgw88PMBEAM6hdHhAad3gABdU+u5kLgwwMuCAF/3RKP75CzTj01fA4OyVy5mZigX4pAwRXwWA7YvLJThCM3fxayrKaOCyGZ5mVxEAciqyw71Aa+iRIoD55vNcdCkDYJXLAJ+wFZ99Ak+82Qzw9FnLAGgekwHO0Igkj2SAYKvcj74B4JK3cjccHwDtq4DcDU8jIwAsuBLt/4UAhwDw4G8gn6hRAWCAfagbouPAOEUAnQ1x1JcAgMdRqRsepcW8fXSbjvvHLnUAvA9hbCgeEV0hHccieh0qA9AOlttQPCa7IHMhQGxjJAC+TYdGIDt9MRkNaQuNcMYmDv9LBNXyyeWXCMD6OWYECzYpC4gWSmNIV6R5VEQMvlzugzBFigB0OjzNSHpItvxxl9ymM4c9DL4EFXqbjm8wf8TKgJV22KnPiFN4gJD0eA+qnFZZq69f4ZKHGIwiAJzspeDYs9zAynGC77rLDcpXoFOroGJxjEsWWFRovhyRrQrYZDfsNS/VfmPCVgIxDtIXqq9aoD1NClZcxVoIKChJnoRYcZKZrDxA2OYQ1JO/0BtBSz57hEiW+JjXybnym3AVJ1qYqOnzqmeJldO8hUNze7kKylUcaBhB7cuuLY2BzaNixJQUfSpqiRpxRyXlbDYcJ/EG8ywoUDsuEIeKzdh+nI/NPYQ3TNVkfcepAO6cz1JH6VrwnvGoAUx+MfT4UuvP3N2hm976uRV8i/tJH57qJyYqicsNJyacCPB1gBUBRx0gHmRoOfsjHqVoOXUiWrHpeK8E8C0AKwBa+ktWbPvJAMGKbSecBSv6JoAQi0cbwIyZQDBC6yHvohF8I6BkhPaj8oVIaJkItzDv4lQjKE2H9v68I9tHUBiDYgTsGHS/bMX44VQB8ljS/tKdHVMgN6P+1zuJCl4NwFbQxMAj0BEdPz/6oT1SLBI6+z+G7Bn/lClTpkyZMmXKlClTpkyZMmXKlClTpvDyD34uaxa5iFlrAAAAAElFTkSuQmCC",Qe=(0,r.createContext)();function He(e){var t=e.children,n=l((0,r.useState)(!1),2),i=n[0],a=n[1];var o={isFlapOpen:i,setIsFlapOpen:a,handleCloseFlap:function(){console.log("Handle Close Flap"),a(!1)}};return(0,qe.jsx)(Qe.Provider,{value:o,children:t})}var We=Qe;function Xe(){var e=(0,r.useContext)(We).setIsFlapOpen,t=Ie();return function(n){e(!1),t(n)}}var Ye=n(910),Je=n(838),$e=n(680),Ze=n(197),et=n(779),tt=n(223),nt=n(841),rt=n(448),it=n(338),at=n(602),ot=n(69),ut=n(570),st=n(717),ct={about:Ye,sandbox:Je,toggleMode:$e,navMenu:Ze,navClose:et,chatSubmit:tt,chatCancel:nt,chatDelete:rt,archiveItem:it,editItem:at,editChatTitle:ot,messageSubmit:ut,messageEdit:at,messageDelete:rt,customHooks:st};function lt(e){var t=Xe(),n=ct[e.page||e.task];return(0,qe.jsx)("button",{onClick:function(n){return function(n){"routing"===e.type?t("/myduck/".concat(e.page)):e.onClick&&e.onClick(n)}(n)},className:"blush-button  ".concat(e.addButtonClass),children:n&&(0,qe.jsx)(n,{className:"".concat(e.addIconClass)})})}function ft(){var e=(0,r.useContext)(We),t=e.isFlapOpen,n=e.setIsFlapOpen,i=Ie(),a=Se();return{handleNavMenu:function(){"/myduck"!==a.pathname&&(i("/myduck"),n(!0)),n(!t)},handleNavClose:function(){n(!1)}}}function ht(){var e=ft().handleNavMenu,t=Xe();return(0,qe.jsx)("div",{className:"w-effective heading-fade-in flex-none px-2",children:(0,qe.jsxs)("div",{className:"flex items-center h-10 justify-between px-2 ",children:[(0,qe.jsxs)("div",{className:"flex-row-center flex-1 gap-1 items-center",children:[(0,qe.jsx)("div",{className:"min-w-12 leading-none",children:(0,qe.jsx)(lt,{onClick:e,task:"navMenu",addButtonClass:"lg:nonactive-button h-6 w-6",addIconClass:"lg:nonactive-button "})}),(0,qe.jsx)("div",{className:"flex-none",children:(0,qe.jsx)("button",{onClick:function(){return t("/myduck")},className:"blush-button flex items-center rounded-full px-2 text-lg font-bold uppercase tracking-wide text-daffodil ",children:(0,qe.jsx)("div",{children:"MyDuck"})})})]}),(0,qe.jsx)("div",{className:" flex justify-center text-xs font-bold uppercase text-vincent-700",children:(0,qe.jsx)("img",{className:"h-8 pr-1",src:Ge,alt:"rubber duck",width:"32",height:"32"})}),(0,qe.jsxs)("div",{className:"flex flex-1 justify-end items-start gap-2",children:[(0,qe.jsx)(lt,{type:"routing",page:"about",addButtonClass:"h-6 w-6"}),(0,qe.jsx)(lt,{type:"routing",page:"customHooks",addButtonClass:"h-6 w-6"}),(0,qe.jsx)(lt,{type:"routing",page:"sandbox",addButtonClass:"h-6 w-6"})]})]})})}function dt(){return(0,qe.jsxs)("footer",{className:"w-effective flex-row-center h-7 flex-none justify-between px-4 text-xs font-bold text-petal",children:[(0,qe.jsx)("div",{children:"\xa9 2023 Codeyluwak "}),(0,qe.jsx)("div",{className:"text-sprig-400",children:"Dev 1.1.0"}),(0,qe.jsx)("div",{children:"I'm talking to my duck!"})]})}function vt(e){return(0,qe.jsx)(He,{children:(0,qe.jsxs)("div",{className:"flex-col-center absolute z-0 h-screen w-screen",children:[(0,qe.jsx)(Ke,{}),(0,qe.jsx)(ht,{}),e.children,(0,qe.jsx)(dt,{})]})})}function pt(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt="https://myduck-fb785-default-rtdb.firebaseio.com/chats",kt=(0,r.createContext)({isPageLoading:!0,isNewUser:!1,setIsNewUser:function(){},chatList:[],setChatList:function(){},mainChatId:null,updateMainChatId:function(){},findLastActiveId:function(){}});function wt(e){var t=l((0,r.useState)(!0),2),n=t[0],i=t[1],a=l((0,r.useState)(!1),2),o=a[0],u=a[1],s=l((0,r.useState)([]),2),c=s[0],f=s[1],h=l((0,r.useState)(null),2),d=h[0],v=h[1];function p(e){for(var t=e.length-1;t>=0;t--)if(!1===e[t].archived)return e[t].id}function m(e){v(e),localStorage.setItem("storageChatId",e)}(0,r.useEffect)((function(){i(!0);var e=new AbortController;return fetch("".concat(gt,"/chatMeta.json"),{signal:e.signal}).then((function(e){if(!e)throw new Error("Chat list response not ok");return e.json()})).then((function(e){var t=[];if(e){for(var n in e){var r=yt({id:n},e[n]);t.push(r)}console.log("Active user with ".concat(t.length," chat").concat(t.length>1?"s":"")),f(t);var a=localStorage.getItem("storageChatId");if(t.some((function(e){return e.id===a&&!1===e.archived})))v(a);else m(p(t))}else console.log("New user"),u(!0),localStorage.setItem("storageChatId",null);i(!1)})).catch((function(e){console.log(e),i(!1)})),function(){e.abort()}}),[]);var y={isPageLoading:n,isNewUser:o,setIsNewUser:u,chatList:c,setChatList:f,mainChatId:d,updateMainChatId:m,findLastActiveId:p};return(0,qe.jsx)(kt.Provider,{value:y,children:e.children})}var bt=kt;function xt(){var e=l((0,r.useState)({width:window.innerWidth,height:window.innerHeight}),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=function(){n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),t}function Et(){var e=(0,r.useContext)(bt).chatList,t=l((0,r.useState)(!1),2),n=t[0],i=t[1];return(0,r.useEffect)((function(){i(function(t){for(var n=e.length-1;n>=0;n--)if(!0===t[n].archived)return!0;return!1}(e))}),[e]),n?(0,qe.jsxs)(qe.Fragment,{children:[(0,qe.jsx)("hr",{className:"thin-separator"}),(0,qe.jsx)("div",{className:"items-left px-2 text-blossom-200 font-bold",children:"Archive"})]}):(0,qe.jsx)(qe.Fragment,{})}function St(e){var t=e.isActiveOnly,n=(e.setIsActiveOnly,Ie()),i=xt(),a=(0,r.useContext)(We).setIsFlapOpen,o=(0,r.useContext)(bt),u=o.isPageLoading,s=o.isNewUser,c=o.chatList,l=o.mainChatId,f=o.updateMainChatId;return(0,qe.jsx)("div",{className:"items-left pass-overflow flex w-full flex-col gap-2 p-2",children:(0,qe.jsxs)("ul",{className:"skyscroll flex flex-col items-start  gap-1 overflow-y-auto pr-4",children:[u||s?(0,qe.jsx)("li",{children:(0,qe.jsx)("button",{className:"chat-button pointer-events-none bg-vincent-950/20 opacity-50","aria-label":u?"Loading chats":"Welcome message",children:u?"Loading...":"Hello Duckies!"})},u?"id-loading":"id-newUser"):c.filter((function(e){return!t||!e.archived})).map((function(e){return(0,qe.jsx)("li",{children:(0,qe.jsx)("button",{onClick:function(){f(e.id),i.width<480&&a(!1),n("/myduck")},className:"chat-button smooth break-words transition hover:bg-petal/20 focus:bg-vincent-950/20 active:bg-none ".concat(l===e.id&&"bg-vincent-950/20"," ").concat(!0===e.archived&&"text-opacity-50","\n                            \n                            "),"aria-label":"Open chat: ".concat(e.title||"Untitled chat"),children:e.title||"Untitled Chat"})},e.id)})).reverse(),(0,qe.jsx)(Et,{})]})})}var It=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(It(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Ct;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ct=function(e){k(n,e);var t=E(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(I(Error)),_t=function(e){return function(e){var t=It(e);return Tt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},At=function(e){try{return Tt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Nt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Nt(e[n],t[n]));return e}var Dt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Lt=function(){try{return Dt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/myduck",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&At(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ot=function(){var e;return null===(e=Lt())||void 0===e?void 0:e.config},Rt=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Pt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Mt(){return!function(){var e,t=null===(e=Lt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ft=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(x(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(x(a),Vt.prototype.create),a}return y(n)}(I(Error)),Vt=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Bt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ft(n,a,t)}}]),e}();var Bt=/\{\$([^}]+)}/g;function Ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(qt(u)&&qt(s)){if(!zt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function qt(e){return null!==e&&"object"===typeof e}function Kt(e,t){var n=new Gt(e,t);return n.subscribe.bind(n)}var Gt=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Qt),void 0===r.error&&(r.error=Qt),void 0===r.complete&&(r.complete=Qt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Qt(){}function Ht(e){return e&&e._delegate?e._delegate:e}function Wt(){Wt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return _()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Xt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Yt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Xt(a,r,i,o,u,"next",e)}function u(e){Xt(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Jt=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),$t="[DEFAULT]",Zt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Rt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$t})}catch(s){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Yt(Wt().mark((function e(){var t;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Gy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===$t?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Gy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;return this.component?this.component.multipleInstances?e:$t:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var en,tn,nn=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Zt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),rn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(tn||(tn={}));var an={debug:tn.DEBUG,verbose:tn.VERBOSE,info:tn.INFO,warn:tn.WARN,error:tn.ERROR,silent:tn.SILENT},on=tn.INFO,un=(pt(en={},tn.DEBUG,"log"),pt(en,tn.VERBOSE,"log"),pt(en,tn.INFO,"info"),pt(en,tn.WARN,"warn"),pt(en,tn.ERROR,"error"),en),sn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=un[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},cn=function(){function e(t){d(this,e),this.name=t,this._logLevel=on,this._logHandler=sn,this._userLogHandler=null,rn.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in tn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?an[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tn.DEBUG].concat(t)),this._logHandler.apply(this,[this,tn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,tn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tn.INFO].concat(t)),this._logHandler.apply(this,[this,tn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tn.WARN].concat(t)),this._logHandler.apply(this,[this,tn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tn.ERROR].concat(t)),this._logHandler.apply(this,[this,tn.ERROR].concat(t))}}]),e}();var ln,fn,hn=function(e,t){return t.some((function(t){return e instanceof t}))};var dn=new WeakMap,vn=new WeakMap,pn=new WeakMap,mn=new WeakMap,yn=new WeakMap;var gn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function kn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fn||(fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(xn(this),n),bn(dn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bn(e.apply(xn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[xn(this),t].concat(r));return pn.set(a,t.sort?t.sort():[t]),bn(a)}}function wn(e){return"function"===typeof e?kn(e):(e instanceof IDBTransaction&&function(e){if(!vn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));vn.set(e,t)}}(e),hn(e,ln||(ln=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,gn):e)}function bn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(bn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&dn.set(t,e)})).catch((function(){})),yn.set(t,e),t}(e);if(mn.has(e))return mn.get(e);var t=wn(e);return t!==e&&(mn.set(e,t),yn.set(t,e)),t}var xn=function(e){return yn.get(e)};var En,Sn,In=["get","getKey","getAll","getAllKeys","count"],Tn=["put","add","delete","clear"],Cn=new Map;function _n(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Cn.get(t))return Cn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Tn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||In.includes(n))){var a=function(){var e=Yt(Wt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Cn.set(t,a),a}}}gn=function(e){return yt(yt({},e),{},{get:function(t,n,r){return _n(t,n)||e.get(t,n,r)},has:function(t,n){return!!_n(t,n)||e.has(t,n)}})}(gn);var An=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Nn="@firebase/app",Dn="0.9.5",Ln=new cn("@firebase/app"),On="[DEFAULT]",Rn=(pt(En={},Nn,"fire-core"),pt(En,"@firebase/app-compat","fire-core-compat"),pt(En,"@firebase/analytics","fire-analytics"),pt(En,"@firebase/analytics-compat","fire-analytics-compat"),pt(En,"@firebase/app-check","fire-app-check"),pt(En,"@firebase/app-check-compat","fire-app-check-compat"),pt(En,"@firebase/auth","fire-auth"),pt(En,"@firebase/auth-compat","fire-auth-compat"),pt(En,"@firebase/database","fire-rtdb"),pt(En,"@firebase/database-compat","fire-rtdb-compat"),pt(En,"@firebase/functions","fire-fn"),pt(En,"@firebase/functions-compat","fire-fn-compat"),pt(En,"@firebase/installations","fire-iid"),pt(En,"@firebase/installations-compat","fire-iid-compat"),pt(En,"@firebase/messaging","fire-fcm"),pt(En,"@firebase/messaging-compat","fire-fcm-compat"),pt(En,"@firebase/performance","fire-perf"),pt(En,"@firebase/performance-compat","fire-perf-compat"),pt(En,"@firebase/remote-config","fire-rc"),pt(En,"@firebase/remote-config-compat","fire-rc-compat"),pt(En,"@firebase/storage","fire-gcs"),pt(En,"@firebase/storage-compat","fire-gcs-compat"),pt(En,"@firebase/firestore","fire-fst"),pt(En,"@firebase/firestore-compat","fire-fst-compat"),pt(En,"fire-js","fire-js"),pt(En,"firebase","fire-js-all"),En),Pn=new Map,Mn=new Map;function jn(e,t){try{e.container.addComponent(t)}catch(n){Ln.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Fn(e,t){e.container.addOrOverwriteComponent(t)}function Vn(e){var t=e.name;if(Mn.has(t))return Ln.debug("There were multiple attempts to register component ".concat(t,".")),!1;Mn.set(t,e);var n,r=T(Pn.values());try{for(r.s();!(n=r.n()).done;){jn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Bn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Un(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:On;Bn(e,t).clearInstance(n)}function zn(){Mn.clear()}var qn=(pt(Sn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),pt(Sn,"bad-app-name","Illegal App name: '{$appName}"),pt(Sn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),pt(Sn,"app-deleted","Firebase App named '{$appName}' already deleted"),pt(Sn,"no-options","Need to provide options, when not being deployed to hosting via source."),pt(Sn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),pt(Sn,"invalid-log-argument","First argument to `onLog` must be null or a function."),pt(Sn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),pt(Sn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),pt(Sn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),pt(Sn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Sn),Kn=new Vt("app","Firebase",qn),Gn=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jt("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}]),e}(),Qn="9.18.0";function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:On,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Kn.create("bad-app-name",{appName:String(i)});if(n||(n=Ot()),!n)throw Kn.create("no-options");var a=Pn.get(i);if(a){if(zt(n,a.options)&&zt(r,a.config))return a;throw Kn.create("duplicate-app",{appName:i})}var o,u=new nn(i),s=T(Mn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Gn(n,r,u);return Pn.set(i,l),l}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On,t=Pn.get(e);if(!t&&e===On)return Hn();if(!t)throw Kn.create("no-app",{appName:e});return t}function Xn(){return Array.from(Pn.values())}function Yn(e){return Jn.apply(this,arguments)}function Jn(){return(Jn=Yt(Wt().mark((function e(t){var n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Pn.has(n)){e.next=6;break}return Pn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e,t,n){var r,i=null!==(r=Rn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ln.warn(u.join(" "))}Vn(new Jt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Zn(e,t){if(null!==e&&"function"!==typeof e)throw Kn.create("invalid-log-argument");!function(e,t){var n,r=T(rn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=an[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:tn[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function er(e){var t;t=e,rn.forEach((function(e){e.setLogLevel(t)}))}var tr="firebase-heartbeat-database",nr=1,rr="firebase-heartbeat-store",ir=null;function ar(){return ir||(ir=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=bn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(bn(u.result),e.oldVersion,e.newVersion,bn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(tr,nr,{upgrade:function(e,t){if(0===t)e.createObjectStore(rr)}}).catch((function(e){throw Kn.create("idb-open",{originalErrorMessage:e.message})}))),ir}function or(e){return ur.apply(this,arguments)}function ur(){return ur=Yt(Wt().mark((function e(t){var n,r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar();case 3:return n=e.sent,e.abrupt("return",n.transaction(rr).objectStore(rr).get(lr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Ft?Ln.warn(e.t0.message):(r=Kn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ln.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ur.apply(this,arguments)}function sr(e,t){return cr.apply(this,arguments)}function cr(){return cr=Yt(Wt().mark((function e(t,n){var r,i,a,o;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar();case 3:return r=e.sent,i=r.transaction(rr,"readwrite"),a=i.objectStore(rr),e.next=8,a.put(n,lr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Ft?Ln.warn(e.t0.message):(o=Kn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ln.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),cr.apply(this,arguments)}function lr(e){return"".concat(e.name,"!").concat(e.options.appId)}var fr=1024,hr=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new yr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Yt(Wt().mark((function e(){var t,n,r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=dr(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Yt(Wt().mark((function e(){var t,n,r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=dr(),n=vr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=_t(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function dr(){return(new Date).toISOString().substring(0,10)}function vr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),gr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),gr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var pr,mr,yr=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Yt(Wt().mark((function e(){var t;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,or(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Yt(Wt().mark((function e(t){var n,r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",sr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Yt(Wt().mark((function e(t){var n,r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",sr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function gr(e){return _t(JSON.stringify({version:2,heartbeats:e})).length}pr="",Vn(new Jt("platform-logger",(function(e){return new An(e)}),"PRIVATE")),Vn(new Jt("heartbeat",(function(e){return new hr(e)}),"PRIVATE")),$n(Nn,Dn,pr),$n(Nn,Dn,"esm2017"),$n("fire-js","");var kr=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,jn(t,new Jt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Yn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:On;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:On;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){jn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Fn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),wr=(pt(mr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),pt(mr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),mr),br=new Vt("app-compat","Firebase",wr);var xr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ut(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:$n,setLogLevel:er,onLog:Zn,apps:null,SDK_VERSION:Qn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Vn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw br.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Nt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ut(n,e=e||On))throw br.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(kr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Nt(n,e)},createSubscribe:Kt,ErrorFactory:Vt,deepExtend:Nt}),n}(),Er=new cn("@firebase/app-compat"),Sr="@firebase/app-compat",Ir="0.2.5";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Er.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Tr=self.firebase.SDK_VERSION;Tr&&Tr.indexOf("LITE")>=0&&Er.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Cr=xr;!function(e){$n(Sr,Ir,e)}();function _r(){return _r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_r.apply(this,arguments)}Cr.registerVersion("firebase","9.18.0","app-compat");var Ar,Nr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Dr={},Lr=Lr||{},Or=Nr||self;function Rr(){}function Pr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Mr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var jr="closure_uid_"+(1e9*Math.random()>>>0),Fr=0;function Vr(e,t,n){return e.call.apply(e.bind,arguments)}function Br(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ur(e,t,n){return(Ur=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vr:Br).apply(null,arguments)}function zr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qr(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Kr(){this.s=this.s,this.o=this.o}Kr.prototype.s=!1,Kr.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,jr)&&e[jr]||(e[jr]=++Fr))},Kr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Gr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Qr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Hr(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Pr(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Wr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Wr.prototype.h=function(){this.defaultPrevented=!0};var Xr=function(){if(!Or.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Or.addEventListener("test",Rr,t),Or.removeEventListener("test",Rr,t)}catch(n){}return e}();function Yr(e){return/^[\s\xa0]*$/.test(e)}var Jr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function $r(e,t){return e<t?-1:e>t?1:0}function Zr(){var e=Or.navigator;return e&&(e=e.userAgent)?e:""}function ei(e){return-1!=Zr().indexOf(e)}function ti(e){return ti[" "](e),e}ti[" "]=Rr;var ni,ri=ei("Opera"),ii=ei("Trident")||ei("MSIE"),ai=ei("Edge"),oi=ai||ii,ui=ei("Gecko")&&!(-1!=Zr().toLowerCase().indexOf("webkit")&&!ei("Edge"))&&!(ei("Trident")||ei("MSIE"))&&!ei("Edge"),si=-1!=Zr().toLowerCase().indexOf("webkit")&&!ei("Edge");function ci(){var e=Or.document;return e?e.documentMode:void 0}e:{var li="",fi=function(){var e=Zr();return ui?/rv:([^\);]+)(\)|;)/.exec(e):ai?/Edge\/([\d\.]+)/.exec(e):ii?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):si?/WebKit\/(\S+)/.exec(e):ri?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fi&&(li=fi?fi[1]:""),ii){var hi=ci();if(null!=hi&&hi>parseFloat(li)){ni=String(hi);break e}}ni=li}var di,vi={};function pi(){return function(e){var t=vi;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Jr(String(ni)).split("."),n=Jr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=$r(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||$r(0==a[2].length,0==o[2].length)||$r(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Or.document&&ii){var mi=ci();di=mi||(parseInt(ni,10)||void 0)}else di=void 0;var yi=di;function gi(e,t){if(Wr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ui){e:{try{ti(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ki[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&gi.X.h.call(this)}}qr(gi,Wr);var ki={2:"touch",3:"pen",4:"mouse"};gi.prototype.h=function(){gi.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var wi="closure_listenable_"+(1e6*Math.random()|0),bi=0;function xi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++bi,this.ba=this.ea=!1}function Ei(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Si(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ii(e){var t={};for(var n in e)t[n]=e[n];return t}var Ti="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ci(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ti.length;a++)n=Ti[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _i(e){this.src=e,this.g={},this.h=0}function Ai(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Gr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ei(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ni(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}_i.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ni(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new xi(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Di="closure_lm_"+(1e6*Math.random()|0),Li={};function Oi(e,t,n,r,i){if(r&&r.once)return Pi(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Oi(e,t[a],n,r,i);return null}return n=zi(n),e&&e[wi]?e.N(t,n,Mr(r)?!!r.capture:!!r,i):Ri(e,t,n,!1,r,i)}function Ri(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Mr(i)?!!i.capture:!!i,u=Bi(e);if(u||(e[Di]=u=new _i(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Vi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Fi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Pi(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Pi(e,t[a],n,r,i);return null}return n=zi(n),e&&e[wi]?e.O(t,n,Mr(r)?!!r.capture:!!r,i):Ri(e,t,n,!0,r,i)}function Mi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Mi(e,t[a],n,r,i);else r=Mr(r)?!!r.capture:!!r,n=zi(n),e&&e[wi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ni(a=e.g[t],n,r,i))&&(Ei(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Bi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ni(t,n,r,i)),(n=-1<e?t[e]:null)&&ji(n))}function ji(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[wi])Ai(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Fi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Bi(t))?(Ai(n,e),0==n.h&&(n.src=null,t[Di]=null)):Ei(e)}}}function Fi(e){return e in Li?Li[e]:Li[e]="on"+e}function Vi(e,t){if(e.ba)e=!0;else{t=new gi(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ji(e),e=n.call(r,t)}return e}function Bi(e){return(e=e[Di])instanceof _i?e:null}var Ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function zi(e){return"function"===typeof e?e:(e[Ui]||(e[Ui]=function(t){return e.handleEvent(t)}),e[Ui])}function qi(){Kr.call(this),this.i=new _i(this),this.P=this,this.I=null}function Ki(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Wr(t,e);else if(t instanceof Wr)t.target=t.target||e;else{var i=t;Ci(t=new Wr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Gi(o,r,!0,t)&&i}if(i=Gi(o=t.g=e,r,!0,t)&&i,i=Gi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Gi(o=t.g=n[a],r,!1,t)&&i}function Gi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Ai(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}qr(qi,Kr),qi.prototype[wi]=!0,qi.prototype.removeEventListener=function(e,t,n,r){Mi(this,e,t,n,r)},qi.prototype.M=function(){if(qi.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ei(n[r]);delete t.g[e],t.h--}}this.I=null},qi.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},qi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Qi=Or.JSON.stringify;function Hi(){var e=ta,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Wi,Xi=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=Yi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Yi=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ji}),(function(e){return e.reset()})),Ji=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function $i(e){Or.setTimeout((function(){throw e}),0)}function Zi(e,t){Wi||function(){var e=Or.Promise.resolve(void 0);Wi=function(){e.then(na)}}(),ea||(Wi(),ea=!0),ta.add(e,t)}var ea=!1,ta=new Xi;function na(){for(var e;e=Hi();){try{e.h.call(e.g)}catch(n){$i(n)}var t=Yi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ea=!1}function ra(e,t){qi.call(this),this.h=e||1,this.g=t||Or,this.j=Ur(this.lb,this),this.l=Date.now()}function ia(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function aa(e,t,n){if("function"===typeof e)n&&(e=Ur(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ur(e.handleEvent,e)}return 2147483647<Number(t)?-1:Or.setTimeout(e,t||0)}function oa(e){e.g=aa((function(){e.g=null,e.i&&(e.i=!1,oa(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}qr(ra,qi),(Ar=ra.prototype).ca=!1,Ar.R=null,Ar.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ki(this,"tick"),this.ca&&(ia(this),this.start()))}},Ar.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ar.M=function(){ra.X.M.call(this),ia(this),delete this.g};var ua=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:oa(this)}},{key:"M",value:function(){_r(w(n.prototype),"M",this).call(this),this.g&&(Or.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Kr);function sa(e){Kr.call(this),this.h=e,this.g={}}qr(sa,Kr);var ca=[];function la(e,t,n,r){Array.isArray(n)||(n&&(ca[0]=n.toString()),n=ca);for(var i=0;i<n.length;i++){var a=Oi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function fa(e){Si(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ji(e)}),e),e.g={}}function ha(){this.g=!0}function da(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Qi(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}sa.prototype.M=function(){sa.X.M.call(this),fa(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ha.prototype.Aa=function(){this.g=!1},ha.prototype.info=function(){};var va={},pa=null;function ma(){return pa=pa||new qi}function ya(e){Wr.call(this,va.Pa,e)}function ga(e){var t=ma();Ki(t,new ya(t))}function ka(e,t){Wr.call(this,va.STAT_EVENT,e),this.stat=t}function wa(e){var t=ma();Ki(t,new ka(t,e))}function ba(e,t){Wr.call(this,va.Qa,e),this.size=t}function xa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Or.setTimeout((function(){e()}),t)}va.Pa="serverreachability",qr(ya,Wr),va.STAT_EVENT="statevent",qr(ka,Wr),va.Qa="timingevent",qr(ba,Wr);var Ea={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Sa={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ia(){}function Ta(e){return e.h||(e.h=e.i())}function Ca(){}Ia.prototype.h=null;var _a,Aa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Na(){Wr.call(this,"d")}function Da(){Wr.call(this,"c")}function La(){}function Oa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new sa(this),this.O=Pa,e=oi?125:void 0,this.T=new ra(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ra}function Ra(){this.i=null,this.g="",this.h=!1}qr(Na,Wr),qr(Da,Wr),qr(La,Ia),La.prototype.g=function(){return new XMLHttpRequest},La.prototype.i=function(){return{}},_a=new La;var Pa=45e3,Ma={},ja={};function Fa(e,t,n){e.K=1,e.v=ro($a(t)),e.s=n,e.P=!0,Va(e,null)}function Va(e,t){e.F=Date.now(),qa(e),e.A=$a(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),yo(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Ra,e.g=gu(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ua(Ur(e.La,e,e.g),e.N)),la(e.S,e.g,"readystatechange",e.ib),t=e.H?Ii(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),ga(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Ba(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Ua(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=za(e,n))==ja){4==t&&(e.o=4,wa(14),i=!1),da(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ma){e.o=4,wa(15),da(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}da(e.j,e.m,r,null),Wa(e,r)}Ba(e)&&r!=ja&&r!=Ma&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,wa(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),lu(t),t.K=!0,wa(11))):(da(e.j,e.m,n,"[Invalid Chunked Response]"),Ha(e),Qa(e))}function za(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ja:(n=Number(t.substring(n,r)),isNaN(n)?Ma:(r+=1)+n>t.length?ja:(t=t.substr(r,n),e.C=r+n,t))}function qa(e){e.V=Date.now()+e.O,Ka(e,e.O)}function Ka(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xa(Ur(e.gb,e),t)}function Ga(e){e.B&&(Or.clearTimeout(e.B),e.B=null)}function Qa(e){0==e.l.G||e.I||du(e.l,e)}function Ha(e){Ga(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ia(e.T),fa(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Wa(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Io(n.h,e)))if(!e.J&&Io(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hu(n),nu(n)}cu(n),wa(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=xa(Ur(n.cb,n),6e3));if(1>=So(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else pu(n,11)}else if((e.J||n.g==e)&&hu(n),!Yr(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(To(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,no(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=yu(r,r.H?r.ka:null,r.V),d.J){Co(r.h,d);var v=d,p=r.J;p&&v.setTimeout(p),v.B&&(Ga(v),qa(v)),r.g=d}else su(r);0<n.i.length&&iu(n)}else"stop"!=a[0]&&"close"!=a[0]||pu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?pu(n,7):tu(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}ga()}catch(a){}}function Xa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Pr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Pr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Pr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ar=Oa.prototype).setTimeout=function(e){this.O=e},Ar.ib=function(e){e=e.target;var t=this.L;t&&3==Xo(e)?t.l():this.La(e)},Ar.La=function(e){try{if(e==this.g)e:{var t=Xo(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||oi||this.g&&(this.h.h||this.g.fa()||Yo(this.g)))){this.I||4!=t||7==n||ga(),Ga(this);var r=this.g.aa();this.Y=r;t:if(Ba(this)){var i=Yo(this.g);e="";var a=i.length,o=4==Xo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ha(this),Qa(this);var u="";break t}this.h.i=new Or.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yr(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,wa(12),Ha(this),Qa(this);break e}da(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wa(this,r)}this.P?(Ua(this,t,u),oi&&this.i&&3==t&&(la(this.S,this.T,"tick",this.hb),this.T.start())):(da(this.j,this.m,u,null),Wa(this,u)),4==t&&Ha(this),this.i&&!this.I&&(4==t?du(this.l,this):(this.i=!1,qa(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,wa(12)):(this.o=0,wa(13)),Ha(this),Qa(this)}}}catch(t){}},Ar.hb=function(){if(this.g){var e=Xo(this.g),t=this.g.fa();this.C<t.length&&(Ga(this),Ua(this,e,t),this.i&&4!=e&&qa(this))}},Ar.cancel=function(){this.I=!0,Ha(this)},Ar.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ga(),wa(17)),Ha(this),this.o=2,Qa(this)):Ka(this,this.V-e)};var Ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ja(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ja){this.h=void 0!==t?t:e.h,Za(this,e.j),this.s=e.s,this.g=e.g,eo(this,e.m),this.l=e.l,t=e.i;var n=new ho;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),to(this,n),this.o=e.o}else e&&(n=String(e).match(Ya))?(this.h=!!t,Za(this,n[1]||"",!0),this.s=io(n[2]||""),this.g=io(n[3]||"",!0),eo(this,n[4]),this.l=io(n[5]||"",!0),to(this,n[6]||"",!0),this.o=io(n[7]||"")):(this.h=!!t,this.i=new ho(null,this.h))}function $a(e){return new Ja(e)}function Za(e,t,n){e.j=n?io(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function eo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function to(e,t,n){t instanceof ho?(e.i=t,function(e,t){t&&!e.j&&(vo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(po(this,t),yo(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ao(t,lo)),e.i=new ho(t,e.h))}function no(e,t,n){e.i.set(t,n)}function ro(e){return no(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function io(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ao(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,oo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ja.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ao(t,uo,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ao(t,uo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ao(n,"/"==n.charAt(0)?co:so,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ao(n,fo)),e.join("")};var uo=/[#\/\?@]/g,so=/[#\?:]/g,co=/[#\?]/g,lo=/[#\?@]/g,fo=/#/g;function ho(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function po(e,t){vo(e),t=go(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function mo(e,t){return vo(e),t=go(e,t),e.g.has(t)}function yo(e,t,n){po(e,t),0<n.length&&(e.i=null,e.g.set(go(e,t),Qr(n)),e.h+=n.length)}function go(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ar=ho.prototype).add=function(e,t){vo(this),this.i=null,e=go(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ar.forEach=function(e,t){vo(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ar.oa=function(){vo(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ar.W=function(e){vo(this);var t=[];if("string"===typeof e)mo(this,e)&&(t=t.concat(this.g.get(go(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ar.set=function(e,t){return vo(this),this.i=null,mo(this,e=go(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ar.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Ar.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var ko=y((function e(t,n){d(this,e),this.h=t,this.g=n}));function wo(e){this.l=e||xo,Or.PerformanceNavigationTiming?e=0<(e=Or.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Or.g&&Or.g.Ga&&Or.g.Ga()&&Or.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bo,xo=10;function Eo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function So(e){return e.h?1:e.g?e.g.size:0}function Io(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function To(e,t){e.g?e.g.add(t):e.h=t}function Co(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function _o(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Qr(e.i)}function Ao(){}function No(){this.g=new Ao}function Do(e,t,n){var r=n||"";try{Xa(e,(function(e,n){var i=e;Mr(e)&&(i=Qi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Lo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Oo(e){this.l=e.ac||null,this.j=e.jb||!1}function Ro(e,t){qi.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Po,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wo.prototype.cancel=function(){if(this.i=_o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ao.prototype.stringify=function(e){return Or.JSON.stringify(e,void 0)},Ao.prototype.parse=function(e){return Or.JSON.parse(e,void 0)},qr(Oo,Ia),Oo.prototype.g=function(){return new Ro(this.l,this.j)},Oo.prototype.i=(bo={},function(){return bo}),qr(Ro,qi);var Po=0;function Mo(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function jo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Fo(e)}function Fo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ar=Ro.prototype).open=function(e,t){if(this.readyState!=Po)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Fo(this)},Ar.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Or).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Ar.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jo(this)),this.readyState=Po},Ar.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Or.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mo(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Ar.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jo(this):Fo(this),3==this.readyState&&Mo(this)}},Ar.Va=function(e){this.g&&(this.response=this.responseText=e,jo(this))},Ar.Ua=function(e){this.g&&(this.response=e,jo(this))},Ar.ga=function(){this.g&&jo(this)},Ar.setRequestHeader=function(e,t){this.v.append(e,t)},Ar.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ar.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Vo=Or.JSON.parse;function Bo(e){qi.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uo,this.K=this.L=!1}qr(Bo,qi);var Uo="",zo=/^https?$/i,qo=["POST","PUT"];function Ko(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Go(e),Ho(e)}function Go(e){e.D||(e.D=!0,Ki(e,"complete"),Ki(e,"error"))}function Qo(e){if(e.h&&"undefined"!=typeof Lr&&(!e.C[1]||4!=Xo(e)||2!=e.aa()))if(e.v&&4==Xo(e))aa(e.Ha,0,e);else if(Ki(e,"readystatechange"),4==Xo(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ya)[1]||null;if(!a&&Or.self&&Or.self.location){var o=Or.self.location.protocol;a=o.substr(0,o.length-1)}i=!zo.test(a?a.toLowerCase():"")}t=i}if(t)Ki(e,"complete"),Ki(e,"success");else{e.m=6;try{var u=2<Xo(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Go(e)}}finally{Ho(e)}}}function Ho(e,t){if(e.g){Wo(e);var n=e.g,r=e.C[0]?Rr:null;e.g=null,e.C=null,t||Ki(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Wo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Or.clearTimeout(e.A),e.A=null)}function Xo(e){return e.g?e.g.readyState:0}function Yo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Uo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Mu){return null}}function Jo(e){var t="";return Si(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function $o(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):no(e,t,n))}function Zo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function eu(e){this.Ca=0,this.i=[],this.j=new ha,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Zo("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Zo("baseRetryDelayMs",5e3,e),this.bb=Zo("retryDelaySeedMs",1e4,e),this.$a=Zo("forwardChannelMaxRetries",2,e),this.ta=Zo("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new wo(e&&e.concurrentRequestLimit),this.Fa=new No,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function tu(e){if(ru(e),3==e.G){var t=e.U++,n=$a(e.F);no(n,"SID",e.I),no(n,"RID",t),no(n,"TYPE","terminate"),ou(e,n),(t=new Oa(e,e.j,t,void 0)).K=2,t.v=ro($a(n)),n=!1,Or.navigator&&Or.navigator.sendBeacon&&(n=Or.navigator.sendBeacon(t.v.toString(),"")),!n&&Or.Image&&((new Image).src=t.v,n=!0),n||(t.g=gu(t.l,null),t.g.da(t.v)),t.F=Date.now(),qa(t)}mu(e)}function nu(e){e.g&&(lu(e),e.g.cancel(),e.g=null)}function ru(e){nu(e),e.u&&(Or.clearTimeout(e.u),e.u=null),hu(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Or.clearTimeout(e.m),e.m=null)}function iu(e){Eo(e.h)||e.m||(e.m=!0,Zi(e.Ja,e),e.C=0)}function au(e,t){var n;n=t?t.m:e.U++;var r=$a(e.F);no(r,"SID",e.I),no(r,"RID",n),no(r,"AID",e.T),ou(e,r),e.o&&e.s&&$o(r,e.o,e.s),n=new Oa(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=uu(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),To(e.h,n),Fa(n,r,t)}function ou(e,t){e.ia&&Si(e.ia,(function(e,n){no(t,n,e)})),e.l&&Xa({},(function(e,n){no(t,n,e)}))}function uu(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Ur(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Do(l,o,"req"+c+"_")}catch(Gu){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function su(e){e.g||e.u||(e.Z=1,Zi(e.Ia,e),e.A=0)}function cu(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=xa(Ur(e.Ia,e),vu(e,e.A)),e.A++,!0)}function lu(e){null!=e.B&&(Or.clearTimeout(e.B),e.B=null)}function fu(e){e.g=new Oa(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=$a(e.sa);no(t,"RID","rpc"),no(t,"SID",e.I),no(t,"CI",e.L?"0":"1"),no(t,"AID",e.T),no(t,"TYPE","xmlhttp"),ou(e,t),e.o&&e.s&&$o(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=ro($a(t)),n.s=null,n.P=!0,Va(n,e)}function hu(e){null!=e.v&&(Or.clearTimeout(e.v),e.v=null)}function du(e,t){var n=null;if(e.g==t){hu(e),lu(e),e.g=null;var r=2}else{if(!Io(e.h,t))return;n=t.D,Co(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ki(r=ma(),new ba(r,n)),iu(e)}else su(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(So(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=xa(Ur(e.Ja,e,t),vu(e,e.C)),e.C++,!0))}(e,t)||2==r&&cu(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:pu(e,5);break;case 4:pu(e,10);break;case 3:pu(e,6);break;default:pu(e,2)}}function vu(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function pu(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Ur(e.kb,e);n||(n=new Ja("//www.google.com/images/cleardot.gif"),Or.location&&"http"==Or.location.protocol||Za(n,"https"),ro(n)),function(e,t){var n=new ha;if(Or.Image){var r=new Image;r.onload=zr(Lo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=zr(Lo,n,r,"TestLoadImage: error",!1,t),r.onabort=zr(Lo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=zr(Lo,n,r,"TestLoadImage: timeout",!1,t),Or.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else wa(2);e.G=0,e.l&&e.l.va(t),mu(e),ru(e)}function mu(e){if(e.G=0,e.la=[],e.l){var t=_o(e.h);0==t.length&&0==e.i.length||(Hr(e.la,t),Hr(e.la,e.i),e.h.i.length=0,Qr(e.i),e.i.length=0),e.l.ua()}}function yu(e,t,n){var r=n instanceof Ja?$a(n):new Ja(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),eo(r,r.m);else{var i=Or.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Ja(null,void 0);r&&Za(a,r),t&&(a.g=t),i&&eo(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&no(r,n,t),no(r,"VER",e.ma),ou(e,r),r}function gu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Bo(new Oo({jb:!0})):new Bo(e.ra)).Ka(e.H),t}function ku(){}function wu(){if(ii&&!(10<=Number(yi)))throw Error("Environmental error: no available transport.")}function bu(e,t){qi.call(this),this.g=new eu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Yr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Yr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Su(this)}function xu(e){Na.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Eu(){Da.call(this),this.status=1}function Su(e){this.g=e}(Ar=Bo.prototype).Ka=function(e){this.L=e},Ar.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_a.g(),this.C=this.u?Ta(this.u):Ta(_a),this.g.onreadystatechange=Ur(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Ko(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=T(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Or.FormData&&e instanceof Or.FormData,!(0<=Gr(qo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=T(n);try{for(c.s();!(s=c.n()).done;){var f=l(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){c.e(v)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wo(this),0<this.B&&((this.K=function(e){return ii&&pi()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ur(this.qa,this)):this.A=aa(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Ko(this,u)}},Ar.qa=function(){"undefined"!=typeof Lr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ki(this,"timeout"),this.abort(8))},Ar.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ki(this,"complete"),Ki(this,"abort"),Ho(this))},Ar.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ho(this,!0)),Bo.X.M.call(this)},Ar.Ha=function(){this.s||(this.F||this.v||this.l?Qo(this):this.fb())},Ar.fb=function(){Qo(this)},Ar.aa=function(){try{return 2<Xo(this)?this.g.status:-1}catch(bo){return-1}},Ar.fa=function(){try{return this.g?this.g.responseText:""}catch(bo){return""}},Ar.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Vo(t)}},Ar.Ea=function(){return this.m},Ar.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ar=eu.prototype).ma=8,Ar.G=1,Ar.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Oa(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Ci(n=Ii(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=uu(this,t,r),no(i=$a(this.F),"RID",e),no(i,"CVER",22),this.D&&no(i,"X-HTTP-Session-Id",this.D),ou(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Jo(n)))+"&"+r:this.o&&$o(i,this.o,n)),To(this.h,t),this.Ya&&no(i,"TYPE","init"),this.O?(no(i,"$req",r),no(i,"SID","null"),t.Z=!0,Fa(t,i,null)):Fa(t,i,r),this.G=2}}else 3==this.G&&(e?au(this,e):0==this.i.length||Eo(this.h)||au(this))},Ar.Ia=function(){if(this.u=null,fu(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=xa(Ur(this.eb,this),e)}},Ar.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wa(10),nu(this),fu(this))},Ar.cb=function(){null!=this.v&&(this.v=null,nu(this),cu(this),wa(19))},Ar.kb=function(e){e?(this.j.info("Successfully pinged google.com"),wa(2)):(this.j.info("Failed to ping google.com"),wa(1))},(Ar=ku.prototype).xa=function(){},Ar.wa=function(){},Ar.va=function(){},Ar.ua=function(){},Ar.Ra=function(){},wu.prototype.g=function(e,t){return new bu(e,t)},qr(bu,qi),bu.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;wa(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=yu(e,null,e.V),iu(e)},bu.prototype.close=function(){tu(this.g)},bu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Qi(e),e=n);t.i.push(new ko(t.ab++,e)),3==t.G&&iu(t)},bu.prototype.M=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,bu.X.M.call(this)},qr(xu,Na),qr(Eu,Da),qr(Su,ku),Su.prototype.xa=function(){Ki(this.g,"a")},Su.prototype.wa=function(e){Ki(this.g,new xu(e))},Su.prototype.va=function(e){Ki(this.g,new Eu)},Su.prototype.ua=function(){Ki(this.g,"b")},wu.prototype.createWebChannel=wu.prototype.g,bu.prototype.send=bu.prototype.u,bu.prototype.open=bu.prototype.m,bu.prototype.close=bu.prototype.close,Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Sa.COMPLETE="complete",Ca.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",qi.prototype.listen=qi.prototype.N,Bo.prototype.listenOnce=Bo.prototype.O,Bo.prototype.getLastError=Bo.prototype.Oa,Bo.prototype.getLastErrorCode=Bo.prototype.Ea,Bo.prototype.getStatus=Bo.prototype.aa,Bo.prototype.getResponseJson=Bo.prototype.Sa,Bo.prototype.getResponseText=Bo.prototype.fa,Bo.prototype.send=Bo.prototype.da,Bo.prototype.setWithCredentials=Bo.prototype.Ka;var Iu=Dr.createWebChannelTransport=function(){return new wu},Tu=Dr.getStatEventTarget=function(){return ma()},Cu=Dr.ErrorCode=Ea,_u=Dr.EventType=Sa,Au=Dr.Event=va,Nu=Dr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Du=Dr.FetchXmlHttpFactory=Oo,Lu=Dr.WebChannel=Ca,Ou=Dr.XhrIo=Bo,Ru="@firebase/firestore",Pu=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Pu.UNAUTHENTICATED=new Pu(null),Pu.GOOGLE_CREDENTIALS=new Pu("google-credentials-uid"),Pu.FIRST_PARTY=new Pu("first-party-uid"),Pu.MOCK_USER=new Pu("mock-user");var Mu="9.18.0",ju=new cn("@firebase/firestore");function Fu(){return ju.logLevel}function Vu(e){if(ju.logLevel<=tn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zu);ju.debug.apply(ju,["Firestore (".concat(Mu,"): ").concat(e)].concat(h(i)))}}function Bu(e){if(ju.logLevel<=tn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zu);ju.error.apply(ju,["Firestore (".concat(Mu,"): ").concat(e)].concat(h(i)))}}function Uu(e){if(ju.logLevel<=tn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zu);ju.warn.apply(ju,["Firestore (".concat(Mu,"): ").concat(e)].concat(h(i)))}}function zu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function qu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Mu,") INTERNAL ASSERTION FAILED: ")+e;throw Bu(t),new Error(t)}function Ku(e,t){e||qu()}function Gu(e,t){return e}var Qu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hu=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(Ft),Wu=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Xu=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Yu=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Pu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ju=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),$u=function(){function e(t){d(this,e),this.t=t,this.currentUser=Pu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Wu;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Wu,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Vu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Vu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wu)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Vu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ku("string"==typeof n.accessToken),new Xu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ku(null===e||"string"==typeof e),new Pu(e)}}]),e}(),Zu=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Pu.FIRST_PARTY,this.p=new Map}return y(e,[{key:"I",value:function(){return this.g?this.g():(Ku(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),es=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new Zu(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Pu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ts=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ns=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Vu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Vu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Vu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Vu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ku("string"==typeof t.token),e.A=t.token,new ts(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function rs(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var is=function(){function e(){d(this,e)}return y(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=rs(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function as(e,t){return e<t?-1:e>t?1:0}function os(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function us(e){return e+"\0"}var ss=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Hu(Qu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hu(Qu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Hu(Qu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hu(Qu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?as(this.nanoseconds,e.nanoseconds):as(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),cs=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ss(0,0))}},{key:"max",value:function(){return new e(new ss(253402300799,999999999))}}]),e}(),ls=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&qu(),void 0===r?r=t.length-n:r>t.length-n&&qu(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),fs=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ls),hs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ds=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hs.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Hu(Qu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Hu(Qu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Hu(Qu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ls),vs=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===fs.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(fs.fromString(t))}},{key:"fromName",value:function(t){return new e(fs.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(fs.emptyPath())}},{key:"comparator",value:function(e,t){return fs.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new fs(t.slice()))}}]),e}(),ps=y((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ms(e){return e.fields.find((function(e){return 2===e.kind}))}function ys(e){return e.fields.filter((function(e){return 2!==e.kind}))}ps.UNKNOWN_ID=-1;var gs=y((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var ks=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,xs.min())}}]),e}();function ws(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cs.fromTimestamp(1e9===r?new ss(n+1,0):new ss(n,r));return new xs(i,vs.empty(),t)}function bs(e){return new xs(e.readTime,e.key,-1)}var xs=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(cs.min(),vs.empty(),-1)}},{key:"max",value:function(){return new e(cs.max(),vs.empty(),-1)}}]),e}();function Es(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=vs.comparator(e.documentKey,t.documentKey))?n:as(e.largestBatchId,t.largestBatchId)}var Ss="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Is=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ts(e){return Cs.apply(this,arguments)}function Cs(){return Cs=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Qu.FAILED_PRECONDITION&&t.message===Ss){e.next=2;break}throw t;case 2:Vu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}var _s=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&qu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),As=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Wu,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Ls(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=js(e.target.error);r.P.reject(new Ls(t,n))}}return y(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Vu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Rs(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ls(n,t)}}}]),e}(),Ns=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Pt())&&Bu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"O",value:function(){var e=Yt(Wt().mark((function e(t){var n=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Vu("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ls(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Hu(Qu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Hu(Qu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ls(t,n))},i.onupgradeneeded=function(e){Vu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.F(t,i.transaction,e.oldVersion,n.version).next((function(){Vu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Yt(Wt().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=Wt().mark((function e(){var n,u,s,l;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=As.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),_s.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Vu("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Vu("SimpleDb","Removing database:",e),Ps(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!jt())return!1;if(e.N())return!0;var t=Pt(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/myduck",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.$)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ds=function(){function e(t){d(this,e),this.q=t,this.U=!1,this.K=null}return y(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Ps(this.q.delete())}}]),e}(),Ls=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Qu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(Hu);function Os(e){return"IndexedDbTransactionError"===e.name}var Rs=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Vu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Vu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ps(n)}},{key:"add",value:function(e){return Vu("SimpleDb","ADD",this.store.name,e,e),Ps(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ps(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Vu("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Vu("SimpleDb","DELETE",this.store.name,e),Ps(this.store.delete(e))}},{key:"count",value:function(){return Vu("SimpleDb","COUNT",this.store.name),Ps(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new _s((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new _s((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Vu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Z=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new _s((function(n,r){t.onerror=function(e){var t=js(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new _s((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ds(i),o=t(i.primaryKey,i.value,a);if(o instanceof _s){var u=o.catch((function(e){return a.done(),_s.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return _s.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ps(e){return new _s((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=js(e.target.error);n(t)}}))}var Ms=!1;function js(e){var t=Ns.D(Pt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Hu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ms||(Ms=!0,setTimeout((function(){throw r}),0)),r}}return e}var Fs=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return y(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Vu("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Vu,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Os(e.t4)){e.next=17;break}Vu("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ts(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Vs=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"st",value:function(){var e=Yt(Wt().mark((function e(){var t,n=this,r=arguments;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return _s.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Vu("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Vu("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=bs(t);Es(r,n)>0&&(n=r)})),new xs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Bs=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Bs.at=-1;var Us=y((function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),zs=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function qs(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ks(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Gs(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Qs(e){return null==e}function Hs(e){return 0===e&&1/e==-1/0}function Ws(e){return"number"==typeof e&&Number.isInteger(e)&&!Hs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Xs=function(e){k(n,e);var t=E(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(I(Error));var Ys=function(e){function t(e){d(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return as(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new Xs("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ys.EMPTY_BYTE_STRING=new Ys("");var Js=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(e){if(Ku(!!e),"string"==typeof e){var t=0,n=Js.exec(e);if(Ku(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Zs(e.seconds),nanos:Zs(e.nanos)}}function Zs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ec(e){return"string"==typeof e?Ys.fromBase64String(e):Ys.fromUint8Array(e)}function tc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nc(e){var t=e.mapValue.fields.__previous_value__;return tc(t)?nc(t):t}function rc(e){var t=$s(e.mapValue.fields.__local_write_time__.timestampValue);return new ss(t.seconds,t.nanos)}var ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ac={nullValue:"NULL_VALUE"};function oc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tc(e)?4:wc(e)?9007199254740991:10:qu()}function uc(e,t){if(e===t)return!0;var n=oc(e);if(n!==oc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rc(e).isEqual(rc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$s(e.timestampValue),r=$s(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ec(e.bytesValue).isEqual(ec(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Zs(e.geoPointValue.latitude)===Zs(t.geoPointValue.latitude)&&Zs(e.geoPointValue.longitude)===Zs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Zs(e.integerValue)===Zs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Zs(e.doubleValue),r=Zs(t.doubleValue);return n===r?Hs(n)===Hs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return os(e.arrayValue.values||[],t.arrayValue.values||[],uc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(qs(n)!==qs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!uc(n[i],r[i])))return!1;return!0}(e,t);default:return qu()}}function sc(e,t){return void 0!==(e.values||[]).find((function(e){return uc(e,t)}))}function cc(e,t){if(e===t)return 0;var n=oc(e),r=oc(t);if(n!==r)return as(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return as(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Zs(e.integerValue||e.doubleValue),r=Zs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return lc(e.timestampValue,t.timestampValue);case 4:return lc(rc(e),rc(t));case 5:return as(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ec(e),r=ec(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=as(n[i],r[i]);if(0!==a)return a}return as(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=as(Zs(e.latitude),Zs(t.latitude));return 0!==n?n:as(Zs(e.longitude),Zs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=cc(n[i],r[i]);if(a)return a}return as(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ic.mapValue&&t===ic.mapValue)return 0;if(e===ic.mapValue)return 1;if(t===ic.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=as(r[o],a[o]);if(0!==u)return u;var s=cc(n[r[o]],i[a[o]]);if(0!==s)return s}return as(r.length,a.length)}(e.mapValue,t.mapValue);default:throw qu()}}function lc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return as(e,t);var n=$s(e),r=$s(t),i=as(n.seconds,r.seconds);return 0!==i?i:as(n.nanos,r.nanos)}function fc(e){return hc(e)}function hc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$s(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ec(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,vs.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=hc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(hc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):qu();var t,n}function dc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vc(e){return!!e&&"integerValue"in e}function pc(e){return!!e&&"arrayValue"in e}function mc(e){return!!e&&"nullValue"in e}function yc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gc(e){return!!e&&"mapValue"in e}function kc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ks(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=kc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=kc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function wc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function bc(e){return"nullValue"in e?ac:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?dc(zs.empty(),vs.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:qu()}function xc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?dc(zs.empty(),vs.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ic:qu()}function Ec(e,t){var n=cc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Sc(e,t){var n=cc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ic=y((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function Tc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?vs.comparator(vs.fromName(o.referenceValue),n.key):cc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Cc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!uc(e.position[n],t.position[n]))return!1;return!0}var _c=y((function e(){d(this,e)})),Ac=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cc(t,this.value)):null!==t&&oc(this.value)===oc(t)&&this.matchesComparison(cc(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qu()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Vc(e,t,r):"array-contains"===t?new qc(e,r):"in"===t?new Kc(e,r):"not-in"===t?new Gc(e,r):"array-contains-any"===t?new Qc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Bc(e,n):new Uc(e,n)}}]),n}(_c),Nc=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ft=null,i}return y(n,[{key:"matches",value:function(e){return Dc(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(_c);function Dc(e){return"and"===e.op}function Lc(e){return"or"===e.op}function Oc(e){return Rc(e)&&Dc(e)}function Rc(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Nc)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Pc(e){if(e instanceof Ac)return e.field.canonicalString()+e.op.toString()+fc(e.value);if(Oc(e))return e.filters.map((function(e){return Pc(e)})).join(",");var t=e.filters.map((function(e){return Pc(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Mc(e,t){return e instanceof Ac?function(e,t){return t instanceof Ac&&e.op===t.op&&e.field.isEqual(t.field)&&uc(e.value,t.value)}(e,t):e instanceof Nc?function(e,t){return t instanceof Nc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Mc(n,t.filters[r])}),!0)}(e,t):void qu()}function jc(e,t){var n=e.filters.concat(t);return Nc.create(n,e.op)}function Fc(e){return e instanceof Ac?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(fc(e.value))}(e):e instanceof Nc?function(e){return e.op.toString()+" {"+e.getFilters().map(Fc).join(" ,")+"}"}(e):"Filter"}var Vc=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=vs.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=vs.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ac),Bc=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=zc("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ac),Uc=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=zc("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ac);function zc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return vs.fromName(e.referenceValue)}))}var qc=function(e){k(n,e);var t=E(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return pc(t)&&sc(t.arrayValue,this.value)}}]),n}(Ac),Kc=function(e){k(n,e);var t=E(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&sc(this.value.arrayValue,t)}}]),n}(Ac),Gc=function(e){k(n,e);var t=E(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!sc(this.value.arrayValue,t)}}]),n}(Ac),Qc=function(e){k(n,e);var t=E(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!pc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return sc(t.value.arrayValue,e)}))}}]),n}(Ac),Hc=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Wc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Xc=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Jc.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Yc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Yc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Yc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Yc(this.root,e,this.comparator,!0)}}]),e}(),Yc=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Jc=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw qu();if(this.right.isRed())throw qu();var e=this.left.check();if(e!==this.right.check())throw qu();return e+(this.isRed()?0:1)}}]),e}();Jc.EMPTY=null,Jc.RED=!0,Jc.BLACK=!1,Jc.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw qu()}},{key:"value",get:function(){throw qu()}},{key:"color",get:function(){throw qu()}},{key:"left",get:function(){throw qu()}},{key:"right",get:function(){throw qu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Jc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var $c=function(){function e(t){d(this,e),this.comparator=t,this.data=new Xc(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Zc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Zc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Zc=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function el(e){return e.hasNext()?e.getNext():void 0}var tl=function(){function e(t){d(this,e),this.fields=t,t.sort(ds.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new $c(ds.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=T(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return os(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),nl=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!gc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}},{key:"setAll",value:function(e){var t=this,n=ds.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=kc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return uc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];gc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ks(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(kc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function rl(e){var t=[];return Ks(e.fields,(function(e,n){var r=new ds([e]);if(gc(n)){var i=rl(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new tl(t)}var il=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(cs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=nl.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=nl.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=cs.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,cs.min(),cs.min(),cs.min(),nl.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,cs.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,cs.min(),cs.min(),nl.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,cs.min(),cs.min(),nl.empty(),2)}}]),e}(),al=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this._t=null}));function ol(e){return new al(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ul(e){var t=Gu(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Pc(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Qs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return fc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return fc(e)})).join(",")),t._t=n}return t._t}function sl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Wc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Mc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cc(e.startAt,t.startAt)&&Cc(e.endAt,t.endAt)}function cl(e){return vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ll(e,t){return e.filters.filter((function(e){return e instanceof Ac&&e.field.isEqual(t)}))}function fl(e,t,n){var r,i=ac,a=!0,o=T(ll(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ac,c=!0;switch(u.op){case"<":case"<=":s=bc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ac}Ec({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ec({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function hl(e,t,n){var r,i=ic,a=!0,o=T(ll(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ic,c=!0;switch(u.op){case">=":case">":s=xc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ic}Sc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Sc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var dl=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this.gt=null,this.startAt,this.endAt}));function vl(e,t,n,r,i,a,o,u){return new dl(e,t,n,r,i,a,o,u)}function pl(e){return new dl(e)}function ml(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function gl(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function kl(e){return null!==e.collectionGroup}function wl(e){var t=Gu(e);if(null===t.wt){t.wt=[];var n=gl(t),r=yl(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Hc(n)),t.wt.push(new Hc(ds.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Hc(ds.keyField(),s))}}}return t.wt}function bl(e){var t=Gu(e);if(!t.gt)if("F"===t.limitType)t.gt=ol(t.path,t.collectionGroup,wl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(wl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Hc(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ic(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ic(t.startAt.position,t.startAt.inclusive):null;t.gt=ol(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.gt}function xl(e,t){t.getFirstInequalityField(),gl(e);var n=e.filters.concat([t]);return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function El(e,t,n){return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sl(e,t){return sl(bl(e),bl(t))&&e.limitType===t.limitType}function Il(e){return"".concat(ul(bl(e)),"|lt:").concat(e.limitType)}function Tl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Fc(e)})).join(", "),"]")),Qs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return fc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return fc(e)})).join(",")),"Target(".concat(t,")")}(bl(e)),"; limitType=").concat(e.limitType,")")}function Cl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(wl(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Tc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wl(e),t))&&!(e.endAt&&!function(e,t,n){var r=Tc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wl(e),t))}(e,t)}function _l(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Al(e){return function(t,n){var r,i=!1,a=T(wl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Nl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Nl(e,t,n){var r=e.field.isKeyField()?vs.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cc(r,i):qu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qu()}}function Dl(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hs(t)?"-0":t}}function Ll(e){return{integerValue:""+e}}function Ol(e,t){return Ws(t)?Ll(t):Dl(e,t)}var Rl=y((function e(){d(this,e),this._=void 0}));function Pl(e,t,n){return e instanceof Fl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Vl?Bl(e,t):e instanceof Ul?zl(e,t):function(e,t){var n=jl(e,t),r=Kl(n)+Kl(e.It);return vc(n)&&vc(e.It)?Ll(r):Dl(e.Tt,r)}(e,t)}function Ml(e,t,n){return e instanceof Vl?Bl(e,t):e instanceof Ul?zl(e,t):n}function jl(e,t){return e instanceof ql?vc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Fl=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(Rl),Vl=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Rl);function Bl(e,t){var n,r=Gl(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return uc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ul=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Rl);function zl(e,t){var n,r=Gl(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!uc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ql=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Tt=e,i.It=r,i}return y(n)}(Rl);function Kl(e){return Zs(e.integerValue||e.doubleValue)}function Gl(e){return pc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ql=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Hl=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Wl=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Xl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Yl=y((function e(){d(this,e)}));function Jl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new lf(e.key,Wl.none()):new nf(e.key,e.data,Wl.none());var n,r=e.data,i=nl.empty(),a=new $c(ds.comparator),o=T(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new rf(e.key,i,new tl(a.toArray()),Wl.none())}function $l(e,t,n){e instanceof nf?function(e,t,n){var r=e.value.clone(),i=of(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof rf?function(e,t,n){if(Xl(e.precondition,t)){var r=of(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(af(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Zl(e,t,n,r){return e instanceof nf?function(e,t,n,r){if(!Xl(e.precondition,t))return n;var i=e.value.clone(),a=uf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof rf?function(e,t,n,r){if(!Xl(e.precondition,t))return n;var i=uf(e.fieldTransforms,r,t),a=t.data;return a.setAll(af(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Xl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ef(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=jl(a.transform,o||null);null!=u&&(null===r&&(r=nl.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function tf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&os(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Vl&&t instanceof Vl||e instanceof Ul&&t instanceof Ul?os(e.elements,t.elements,uc):e instanceof ql&&t instanceof ql?uc(e.It,t.It):e instanceof Fl&&t instanceof Fl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var nf=function(e){k(n,e);var t=E(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Yl),rf=function(e){k(n,e);var t=E(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Yl);function af(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function of(e,t,n){var r=new Map;Ku(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ml(o,u,n[i]))}return r}function uf(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Pl(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var sf,cf,lf=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Yl),ff=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Yl),hf=y((function e(t){d(this,e),this.count=t}));function df(e){switch(e){default:return qu();case Qu.CANCELLED:case Qu.UNKNOWN:case Qu.DEADLINE_EXCEEDED:case Qu.RESOURCE_EXHAUSTED:case Qu.INTERNAL:case Qu.UNAVAILABLE:case Qu.UNAUTHENTICATED:return!1;case Qu.INVALID_ARGUMENT:case Qu.NOT_FOUND:case Qu.ALREADY_EXISTS:case Qu.PERMISSION_DENIED:case Qu.FAILED_PRECONDITION:case Qu.ABORTED:case Qu.OUT_OF_RANGE:case Qu.UNIMPLEMENTED:case Qu.DATA_LOSS:return!0}}function vf(e){if(void 0===e)return Bu("GRPC error has no .code"),Qu.UNKNOWN;switch(e){case sf.OK:return Qu.OK;case sf.CANCELLED:return Qu.CANCELLED;case sf.UNKNOWN:return Qu.UNKNOWN;case sf.DEADLINE_EXCEEDED:return Qu.DEADLINE_EXCEEDED;case sf.RESOURCE_EXHAUSTED:return Qu.RESOURCE_EXHAUSTED;case sf.INTERNAL:return Qu.INTERNAL;case sf.UNAVAILABLE:return Qu.UNAVAILABLE;case sf.UNAUTHENTICATED:return Qu.UNAUTHENTICATED;case sf.INVALID_ARGUMENT:return Qu.INVALID_ARGUMENT;case sf.NOT_FOUND:return Qu.NOT_FOUND;case sf.ALREADY_EXISTS:return Qu.ALREADY_EXISTS;case sf.PERMISSION_DENIED:return Qu.PERMISSION_DENIED;case sf.FAILED_PRECONDITION:return Qu.FAILED_PRECONDITION;case sf.ABORTED:return Qu.ABORTED;case sf.OUT_OF_RANGE:return Qu.OUT_OF_RANGE;case sf.UNIMPLEMENTED:return Qu.UNIMPLEMENTED;case sf.DATA_LOSS:return Qu.DATA_LOSS;default:return qu()}}(cf=sf||(sf={}))[cf.OK=0]="OK",cf[cf.CANCELLED=1]="CANCELLED",cf[cf.UNKNOWN=2]="UNKNOWN",cf[cf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cf[cf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cf[cf.NOT_FOUND=5]="NOT_FOUND",cf[cf.ALREADY_EXISTS=6]="ALREADY_EXISTS",cf[cf.PERMISSION_DENIED=7]="PERMISSION_DENIED",cf[cf.UNAUTHENTICATED=16]="UNAUTHENTICATED",cf[cf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cf[cf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cf[cf.ABORTED=10]="ABORTED",cf[cf.OUT_OF_RANGE=11]="OUT_OF_RANGE",cf[cf.UNIMPLEMENTED=12]="UNIMPLEMENTED",cf[cf.INTERNAL=13]="INTERNAL",cf[cf.UNAVAILABLE=14]="UNAVAILABLE",cf[cf.DATA_LOSS=15]="DATA_LOSS";var pf=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ks(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Gs(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),mf=new Xc(vs.comparator);function yf(){return mf}var gf=new Xc(vs.comparator);function kf(){for(var e=gf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function wf(e){var t=gf;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function bf(){return Ef()}function xf(){return Ef()}function Ef(){return new pf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Sf=new Xc(vs.comparator),If=new $c(vs.comparator);function Tf(){for(var e=If,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Cf=new $c(as);function _f(){return Cf}var Af=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Nf.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(cs.min(),i,_f(),yf(),Tf())}}]),e}(),Nf=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Tf(),Tf(),Tf())}}]),e}(),Df=y((function e(t,n,r,i){d(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=i})),Lf=y((function e(t,n){d(this,e),this.targetId=t,this.Rt=n})),Of=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ys.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Rf=function(){function e(){d(this,e),this.Pt=0,this.vt=jf(),this.bt=Ys.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return y(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Dt",get:function(){return 0!==this.Pt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}},{key:"Nt",value:function(){var e=Tf(),t=Tf(),n=Tf();return this.vt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qu()}})),new Nf(this.bt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=jf()}},{key:"$t",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ot",value:function(){this.Pt+=1}},{key:"Ft",value:function(){this.Pt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),Pf=function(){function e(t){d(this,e),this.Lt=t,this.qt=new Map,this.Ut=yf(),this.Kt=Mf(),this.Gt=new $c(as)}return y(e,[{key:"Qt",value:function(e){var t,n=T(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(u){n.e(u)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.zt(o,e.key,e.At)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:qu()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var i=r.target;if(cl(i))if(0===n){var a=new vs(i.path);this.zt(t,a,il.newNoDocument(a,cs.min()))}else Ku(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&cl(a.target)){var o=new vs(a.target.path);null!==t.Ut.get(o)||t.ne(i,o)||t.zt(i,o,il.newNoDocument(o,e))}r.Ct&&(n.set(i,r.Nt()),r.kt())}}));var r=Tf();this.Kt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new Af(e,n,this.Gt,this.Ut,r);return this.Ut=yf(),this.Kt=Mf(),this.Gt=new $c(as),i}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.$t(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Ht(e).Ot()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new Rf,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new $c(as),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||Vu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new Rf),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Mf(){return new Xc(vs.comparator)}function jf(){return new Xc(vs.comparator)}var Ff={asc:"ASCENDING",desc:"DESCENDING"},Vf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bf={and:"AND",or:"OR"},Uf=y((function e(t,n){d(this,e),this.databaseId=t,this.yt=n}));function zf(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function qf(e,t){return e.yt?t.toBase64():t.toUint8Array()}function Kf(e,t){return zf(e,t.toTimestamp())}function Gf(e){return Ku(!!e),cs.fromTimestamp(function(e){var t=$s(e);return new ss(t.seconds,t.nanos)}(e))}function Qf(e,t){return function(e){return new fs(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hf(e){var t=fs.fromString(e);return Ku(mh(t)),t}function Wf(e,t){return Qf(e.databaseId,t.path)}function Xf(e,t){var n=Hf(t);if(n.get(1)!==e.databaseId.projectId)throw new Hu(Qu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hu(Qu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vs(Zf(n))}function Yf(e,t){return Qf(e.databaseId,t)}function Jf(e){var t=Hf(e);return 4===t.length?fs.emptyPath():Zf(t)}function $f(e){return new fs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Zf(e){return Ku(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function eh(e,t,n){return{name:Wf(e,t),fields:n.value.mapValue.fields}}function th(e,t,n){var r=Xf(e,t.name),i=Gf(t.updateTime),a=t.createTime?Gf(t.createTime):cs.min(),o=new nl({mapValue:{fields:t.fields}}),u=il.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function nh(e,t){return"found"in t?function(e,t){Ku(!!t.found),t.found.name,t.found.updateTime;var n=Xf(e,t.found.name),r=Gf(t.found.updateTime),i=t.found.createTime?Gf(t.found.createTime):cs.min(),a=new nl({mapValue:{fields:t.found.fields}});return il.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Ku(!!t.missing),Ku(!!t.readTime);var n=Xf(e,t.missing),r=Gf(t.readTime);return il.newNoDocument(n,r)}(e,t):qu()}function rh(e,t){var n;if(t instanceof nf)n={update:eh(e,t.key,t.value)};else if(t instanceof lf)n={delete:Wf(e,t.key)};else if(t instanceof rf)n={update:eh(e,t.key,t.data),updateMask:ph(t.fieldMask)};else{if(!(t instanceof ff))return qu();n={verify:Wf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Fl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ul)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ql)return{fieldPath:t.field.canonicalString(),increment:n.It};throw qu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Kf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qu()}(e,t.precondition)),n}function ih(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Wl.updateTime(Gf(e.updateTime)):void 0!==e.exists?Wl.exists(e.exists):Wl.none()}(t.currentDocument):Wl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ku("REQUEST_TIME"===t.setToServerValue),n=new Fl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Vl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ul(i)}else"increment"in t?n=new ql(e,t.increment):qu();var a=ds.fromServerFormat(t.fieldPath);return new Ql(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Xf(e,t.update.name),a=new nl({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new tl(t.map((function(e){return ds.fromServerFormat(e)})))}(t.updateMask);return new rf(i,a,o,n,r)}return new nf(i,a,n,r)}if(t.delete){var u=Xf(e,t.delete);return new lf(u,n)}if(t.verify){var s=Xf(e,t.verify);return new ff(s,n)}return qu()}function ah(e,t){return{documents:[Yf(e,t.path)]}}function oh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Yf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Yf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return vh(Nc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:hh(e.field),direction:ch(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.yt||Qs(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function uh(e){var t=Jf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ku(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=sh(e);return t instanceof Nc&&Oc(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Hc(dh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Qs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ic(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ic(n,t)}(n.endAt)),vl(t,i,u,o,s,"F",c,l)}function sh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=dh(e.unaryFilter.field);return Ac.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=dh(e.unaryFilter.field);return Ac.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=dh(e.unaryFilter.field);return Ac.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=dh(e.unaryFilter.field);return Ac.create(i,"!=",{nullValue:"NULL_VALUE"});default:return qu()}}(e):void 0!==e.fieldFilter?function(e){return Ac.create(dh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Nc.create(e.compositeFilter.filters.map((function(e){return sh(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qu()}}(e.compositeFilter.op))}(e):qu()}function ch(e){return Ff[e]}function lh(e){return Vf[e]}function fh(e){return Bf[e]}function hh(e){return{fieldPath:e.canonicalString()}}function dh(e){return ds.fromServerFormat(e.fieldPath)}function vh(e){return e instanceof Ac?function(e){if("=="===e.op){if(yc(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NAN"}};if(mc(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yc(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NOT_NAN"}};if(mc(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hh(e.field),op:lh(e.op),value:e.value}}}(e):e instanceof Nc?function(e){var t=e.getFilters().map((function(e){return vh(e)}));return 1===t.length?t[0]:{compositeFilter:{op:fh(e.op),filters:t}}}(e):qu()}function ph(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function mh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function yh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=kh(t)),t=gh(e.get(n),t);return kh(t)}function gh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function kh(e){return e+"\x01\x01"}function wh(e){var t=e.length;if(Ku(t>=2),2===t)return Ku("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fs.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&qu(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:qu()}a=o+2}return new fs(r)}var bh=["userId","batchId"];function xh(e,t){return[e,yh(t)]}function Eh(e,t,n){return[e,yh(t),n]}var Sh={},Ih=["prefixPath","collectionGroup","readTime","documentId"],Th=["prefixPath","collectionGroup","documentId"],Ch=["collectionGroup","readTime","prefixPath","documentId"],_h=["canonicalId","targetId"],Ah=["targetId","path"],Nh=["path","targetId"],Dh=["collectionId","parent"],Lh=["indexId","uid"],Oh=["uid","sequenceNumber"],Rh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ph=["indexId","uid","orderedDocumentKey"],Mh=["userId","collectionPath","documentId"],jh=["userId","collectionPath","largestBatchId"],Fh=["userId","collectionGroup","largestBatchId"],Vh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Bh=[].concat(h(Vh),["documentOverlays"]),Uh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zh=Uh,qh=[].concat(zh,["indexConfiguration","indexState","indexEntries"]),Kh=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).re=e,i.currentSequenceNumber=r,i}return y(n)}(Is);function Gh(e,t){var n=Gu(e);return Ns.M(n.re,t)}var Qh=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&$l(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Zl(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=T(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Zl(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=xf();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Jl(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(cs.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Tf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&os(this.mutations,e.mutations,(function(e,t){return tf(e,t)}))&&os(this.baseMutations,e.baseMutations,(function(e,t){return tf(e,t)}))}}]),e}(),Hh=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Ku(t.mutations.length===r.length);for(var i=Sf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Wh=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Xh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cs.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cs.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ys.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Yh=y((function e(t){d(this,e),this.oe=t}));function Jh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$h(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Wf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:zf(e,t.version.toTimestamp()),createTime:zf(e,t.createTime.toTimestamp())}}(e.oe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zh(t.version)};else{if(!t.isUnknownDocument())return qu();r.unknownDocument={path:n.path.toArray(),version:Zh(t.version)}}return r}function $h(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Zh(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ed(e){var t=new ss(e.seconds,e.nanoseconds);return cs.fromTimestamp(t)}function td(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ih(e.oe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ih(e.oe,t)})),u=ss.fromMillis(t.localWriteTimeMs);return new Qh(t.batchId,u,n,o)}function nd(e){var t,n,r=ed(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ed(e.lastLimboFreeSnapshotVersion):cs.min();return void 0!==e.query.documents?(Ku(1===(n=e.query).documents.length),t=bl(pl(Jf(n.documents[0])))):t=function(e){return bl(uh(e))}(e.query),new Xh(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ys.fromBase64String(e.resumeToken))}function rd(e,t){var n,r=Zh(t.snapshotVersion),i=Zh(t.lastLimboFreeSnapshotVersion);n=cl(t.target)?ah(e.oe,t.target):oh(e.oe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ul(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function id(e){var t=uh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?El(t,t.limit,"L"):t}function ad(e,t){return new Wh(t.largestBatchId,ih(e.oe,t.overlayMutation))}function od(e,t){var n=t.path.lastSegment();return[e,yh(t.path.popLast()),n]}function ud(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Zh(r.readTime),documentKey:yh(r.documentKey.path),largestBatchId:r.largestBatchId}}var sd=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return cd(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ed(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return cd(e).put({bundleId:(n=t).id,createTime:Zh(Gf(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ld(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:id(t.bundledQuery),readTime:ed(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ld(e).put(function(e){return{name:e.name,readTime:Zh(Gf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function cd(e){return Gh(e,"bundles")}function ld(e){return Gh(e,"namedQueries")}var fd=function(){function e(t,n){d(this,e),this.Tt=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return hd(e).get(od(this.userId,t)).next((function(e){return e?ad(n.Tt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=bf();return _s.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Wh(t,a);i.push(r.ce(e,o))})),_s.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(yh(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(hd(e).Y("collectionPathOverlayIndex",i))})),_s.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=bf(),a=yh(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return hd(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ad(r.Tt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=bf(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hd(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ad(a.Tt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ce",value:function(e,t){return hd(e).put(function(e,t,n){var r=l(od(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:rh(e.oe,n.mutation)}}(this.Tt,this.userId,t))}}],[{key:"ue",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function hd(e){return Gh(e,"documentOverlays")}var dd=function(){function e(){d(this,e)}return y(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Zs(e.integerValue));else if("doubleValue"in e){var n=Zs(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),Hs(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(ec(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?wc(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):qu()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.we(a,t),this.he(n[a],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.he(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),vs.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();function vd(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function pd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=vd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}dd.Ee=new dd;var md=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Ve()}},{key:"Se",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"De",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ve()}},{key:"Ce",value:function(e){var t=this.xe(e),n=pd(t);this.Ne(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"ke",value:function(e){var t=this.xe(e),n=pd(t);this.Ne(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$e",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Be",value:function(){return this.buffer.slice(0,this.position)}},{key:"xe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"Ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.Ne(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.Ne(1),this.buffer[this.position++]=~e}},{key:"Ne",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),yd=function(){function e(t){d(this,e),this.Le=t}return y(e,[{key:"ge",value:function(e){this.Le.Ae(e)}},{key:"_e",value:function(e){this.Le.Se(e)}},{key:"de",value:function(e){this.Le.Ce(e)}},{key:"le",value:function(){this.Le.$e()}}]),e}(),gd=function(){function e(t){d(this,e),this.Le=t}return y(e,[{key:"ge",value:function(e){this.Le.ve(e)}},{key:"_e",value:function(e){this.Le.De(e)}},{key:"de",value:function(e){this.Le.ke(e)}},{key:"le",value:function(){this.Le.Oe()}}]),e}(),kd=function(){function e(){d(this,e),this.Le=new md,this.qe=new yd(this.Le),this.Ue=new gd(this.Le)}return y(e,[{key:"seed",value:function(e){this.Le.seed(e)}},{key:"Ke",value:function(e){return 0===e?this.qe:this.Ue}},{key:"Be",value:function(){return this.Le.Be()}},{key:"reset",value:function(){this.Le.reset()}}]),e}(),wd=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Ge",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function bd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=xd(e.arrayValue,t.arrayValue))?n:0!==(n=xd(e.directionalValue,t.directionalValue))?n:vs.comparator(e.documentKey,t.documentKey)}function xd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Ed=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Qe=t.orderBy,this.je=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.ze=i:this.je.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"We",value:function(e){Ku(e.collectionGroup===this.collectionId);var t=ms(e);if(void 0!==t&&!this.He(t))return!1;for(var n=ys(e),r=0,i=0;r<n.length&&this.He(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.ze){var a=n[r];if(!this.Je(this.ze,a)||!this.Ye(this.Qe[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Qe.length||!this.Ye(this.Qe[i++],o))return!1}return!0}},{key:"He",value:function(e){var t,n=T(this.je);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ye",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Sd(e){var t,n;if(Ku(e instanceof Ac||e instanceof Nc),e instanceof Ac){if(e instanceof Kc){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ac.create(e.field,"==",t)})))||[];return Nc.create(r,"or")}return e}var i=e.filters.map((function(e){return Sd(e)}));return Nc.create(i,e.op)}function Id(e){if(0===e.getFilters().length)return[];var t=Ad(Sd(e));return Ku(_d(t)),Td(t)||Cd(t)?[t]:t.getFilters()}function Td(e){return e instanceof Ac}function Cd(e){return e instanceof Nc&&Oc(e)}function _d(e){return Td(e)||Cd(e)||function(e){if(e instanceof Nc&&Lc(e)){var t,n=T(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Td(r)&&!Cd(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Ad(e){if(Ku(e instanceof Ac||e instanceof Nc),e instanceof Ac)return e;if(1===e.filters.length)return Ad(e.filters[0]);var t=e.filters.map((function(e){return Ad(e)})),n=Nc.create(t,e.op);return _d(n=Ld(n))?n:(Ku(n instanceof Nc),Ku(Dc(n)),Ku(n.filters.length>1),n.filters.reduce((function(e,t){return Nd(e,t)})))}function Nd(e,t){var n;return Ku(e instanceof Ac||e instanceof Nc),Ku(t instanceof Ac||t instanceof Nc),n=e instanceof Ac?t instanceof Ac?function(e,t){return Nc.create([e,t],"and")}(e,t):Dd(e,t):t instanceof Ac?Dd(t,e):function(e,t){if(Ku(e.filters.length>0&&t.filters.length>0),Dc(e)&&Dc(t))return jc(e,t.getFilters());var n=Lc(e)?e:t,r=Lc(e)?t:e,i=n.filters.map((function(e){return Nd(e,r)}));return Nc.create(i,"or")}(e,t),Ld(n)}function Dd(e,t){if(Dc(t))return jc(t,e.getFilters());var n=t.filters.map((function(t){return Nd(e,t)}));return Nc.create(n,"or")}function Ld(e){if(Ku(e instanceof Ac||e instanceof Nc),e instanceof Ac)return e;var t=e.getFilters();if(1===t.length)return Ld(t[0]);if(Rc(e))return e;var n=t.map((function(e){return Ld(e)})),r=[];return n.forEach((function(t){t instanceof Ac?r.push(t):t instanceof Nc&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:Nc.create(r,e.op)}var Od=function(){function e(){d(this,e),this.Ze=new Rd}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),_s.resolve()}},{key:"getCollectionParents",value:function(e,t){return _s.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return _s.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return _s.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return _s.resolve(null)}},{key:"getIndexType",value:function(e,t){return _s.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return _s.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return _s.resolve(null)}},{key:"getMinOffset",value:function(e,t){return _s.resolve(xs.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return _s.resolve(xs.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return _s.resolve()}},{key:"updateIndexEntries",value:function(e,t){return _s.resolve()}}]),e}(),Rd=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $c(fs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new $c(fs.comparator)).toArray()}}]),e}(),Pd=new Uint8Array(0),Md=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Xe=new Rd,this.tn=new pf((function(e){return ul(e)}),(function(e,t){return sl(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:yh(i)};return jd(e).put(a)}return _s.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[us(t),""],!1,!0);return jd(e).W(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(wh(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Vd(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Bd(e);return a.next((function(e){o.put(ud(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Vd(e),r=Bd(e),i=Fd(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Fd(e),i=!0,a=new Map;return _s.forEach(this.en(t),(function(t){return n.nn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Tf(),o=[];return _s.forEach(a,(function(i,a){var u;Vu("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ul(t)));var s=function(e,t){var n=ms(t);if(void 0===n)return null;var r,i=T(ll(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=T(ys(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=T(ll(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(ys(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?fl(e,o.fieldPath,e.startAt):hl(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ic(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=T(ys(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?hl(e,o.fieldPath,e.endAt):fl(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ic(r,i)}(a,i),h=n.sn(i,a,l),d=n.sn(i,a,f),v=n.rn(i,a,c),p=n.on(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return _s.forEach(p,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=vs.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return _s.resolve(null)}))}},{key:"en",value:function(e){var t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Id(Nc.create(e.filters,"and")).map((function(t){return ol(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.tn.set(e,t),t)}},{key:"on",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.un(t[d/c]):Pd,f=u.cn(e,s,n[d%c],r),v=u.an(e,s,i[d%c],a),p=o.map((function(t){return u.cn(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,v,p)))},d=0;d<s;++d)f();return l}},{key:"cn",value:function(e,t,n,r){var i=new wd(e,vs.empty(),t,n);return r?i:i.Ge()}},{key:"an",value:function(e,t,n,r){var i=new wd(e,vs.empty(),t,n);return r?i.Ge():i}},{key:"nn",value:function(e,t){var n=new Ed(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.en(t);return _s.forEach(i,(function(t){return n.nn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new $c(ds.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=T(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=T(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"hn",value:function(e,t){var n,r=new kd,i=T(ys(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ke(a.kind);dd.Ee.ae(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Be()}},{key:"un",value:function(e){var t=new kd;return dd.Ee.ae(e,t.Ke(0)),t.Be()}},{key:"ln",value:function(e,t){var n=new kd;return dd.Ee.ae(dc(this.databaseId,t),n.Ke(function(e){var t=ys(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Be()}},{key:"rn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new kd);var i,a=0,o=T(ys(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=T(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.fn(t,s.fieldPath)&&pc(c))r=this.dn(r,s,c);else{var h=f.Ke(s.kind);dd.Ee.ae(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this._n(r)}},{key:"sn",value:function(e,t,n){return this.rn(e,t,n.position)}},{key:"_n",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Be();return t}},{key:"dn",value:function(e,t,n){var r,i=h(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=T(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new kd;f.seed(l.Be()),dd.Ee.ae(s,f.Ke(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"fn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ac&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Vd(e),i=Bd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return _s.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new ks(t.sequenceNumber,new xs(ed(t.readTime),new vs(wh(t.documentKey)),t.largestBatchId)):ks.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new gs(ds.fromServerFormat(n),r)}));return new ps(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:as(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Vd(e),a=Bd(e);return this.wn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return _s.forEach(t,(function(t){return a.put(ud(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return _s.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?_s.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),_s.forEach(a,(function(r){return n.mn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?_s.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"pn",value:function(e,t,n,r){return Fd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.ln(n,t.key),documentKey:t.key.path.toArray()})}},{key:"In",value:function(e,t,n,r){return Fd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.ln(n,t.key),t.key.path.toArray()])}},{key:"mn",value:function(e,t,n){var r=Fd(e),i=new $c(bd);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.ln(n,t)])},(function(e,r){i=i.add(new wd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new $c(bd),r=this.hn(t,e);if(null==r)return n;var i=ms(t);if(null!=i){var a=e.data.field(i.fieldPath);if(pc(a)){var o,u=T(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new wd(t.indexId,e.key,this.un(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new wd(t.indexId,e.key,Pd,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;Vu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=el(a),s=el(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=el(o)):l?(i(u),u=el(a)):(u=el(a),s=el(o))}}(r,i,bd,(function(r){o.push(a.pn(e,t,n,r))}),(function(r){o.push(a.In(e,t,n,r))})),_s.waitFor(o)}},{key:"wn",value:function(e){var t=1;return Bd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return bd(e,t)})).filter((function(e,t,n){return!t||0!==bd(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=bd(o,e),s=bd(o,t);if(0===u)r[0]=e.Ge();else if(u>0&&s<0)r.push(o),r.push(o.Ge());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Tn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Pd,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Pd,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Tn",value:function(e,t){return bd(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ud)}},{key:"getMinOffset",value:function(e,t){var n=this;return _s.mapArray(this.en(t),(function(t){return n.nn(e,t).next((function(e){return e||qu()}))})).next(Ud)}}]),e}();function jd(e){return Gh(e,"collectionParents")}function Fd(e){return Gh(e,"indexEntries")}function Vd(e){return Gh(e,"indexConfiguration")}function Bd(e){return Gh(e,"indexState")}function Ud(e){Ku(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Es(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xs(t.readTime,t.documentKey,n)}var zd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qd=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Kd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ku(1===u)})));var c,l=[],f=T(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Eh(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return _s.waitFor(a).next((function(){return l}))}function Gd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw qu();t=e.noDocument}return JSON.stringify(t).length}qd.DEFAULT_COLLECTION_PERCENTILE=10,qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qd.DEFAULT=new qd(41943040,qd.DEFAULT_COLLECTION_PERCENTILE,qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qd.DISABLED=new qd(-1,0,0);var Qd=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Xd(e),o=Wd(e);return o.add({}).next((function(u){Ku("number"==typeof u);var s,c=new Qh(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return rh(e.oe,t)})),i=n.mutations.map((function(t){return rh(e.oe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.Tt,i.userId,c),f=[],h=new $c((function(e,t){return as(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=Eh(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,Sh))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.En[u]=c.keys()})),_s.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Wd(e).get(t).next((function(e){return e?(Ku(e.userId===n.userId),td(n.Tt,e)):null}))}},{key:"An",value:function(e,t){var n=this;return this.En[t]?_s.resolve(this.En[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.En[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Wd(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ku(t.batchId>=r),a=td(n.Tt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return td(t.Tt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=xh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Xd(e).X({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=wh(c);if(s===n.userId&&t.path.isEqual(h))return Wd(e).get(f).next((function(e){if(!e)throw qu();Ku(e.userId===n.userId),a.push(td(n.Tt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $c(as),i=[];return t.forEach((function(t){var a=xh(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Xd(e).X({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=wh(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),_s.waitFor(i).next((function(){return n.Rn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=xh(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new $c(as);return Xd(e).X({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=wh(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Rn(e,u)}))}},{key:"Rn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Wd(e).get(t).next((function(e){if(null===e)throw qu();Ku(e.userId===n.userId),r.push(td(n.Tt,e))})))})),_s.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Kd(e.re,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Pn(t.batchId)})),_s.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Pn",value:function(e){delete this.En[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return _s.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Xd(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=wh(e[1]);i.push(a)}else r.done()})).next((function(){Ku(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Hd(e,this.userId,t)}},{key:"vn",value:function(e){var t=this;return Yd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ue",value:function(t,n,r,i){return Ku(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Hd(e,t,n){var r=xh(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Xd(e).X({range:a,Z:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Wd(e){return Gh(e,"mutations")}function Xd(e){return Gh(e,"documentMutations")}function Yd(e){return Gh(e,"mutationQueues")}var Jd=function(){function e(t){d(this,e),this.bn=t}return y(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}(),$d=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.Tt=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Dn(e).next((function(n){var r=new Jd(n.highestTargetId);return n.highestTargetId=r.next(),t.Cn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Dn(e).next((function(e){return cs.fromTimestamp(new ss(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Dn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Dn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Cn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.xn(e,t).next((function(){return n.Dn(e).next((function(r){return r.targetCount+=1,n.Nn(t,r),n.Cn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.xn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Zd(e).delete(t.targetId)})).next((function(){return n.Dn(e)})).next((function(t){return Ku(t.targetCount>0),t.targetCount-=1,n.Cn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Zd(e).X((function(o,u){var s=nd(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return _s.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Zd(e).X((function(e,n){var r=nd(n);t(r)}))}},{key:"Dn",value:function(e){return ev(e).get("targetGlobalKey").next((function(e){return Ku(null!==e),e}))}},{key:"Cn",value:function(e,t){return ev(e).put("targetGlobalKey",t)}},{key:"xn",value:function(e,t){return Zd(e).put(rd(this.Tt,t))}},{key:"Nn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Dn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ul(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Zd(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=nd(n);sl(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=tv(e);return t.forEach((function(t){var o=yh(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),_s.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=tv(e);return _s.forEach(t,(function(t){var a=yh(t.path);return _s.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=tv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=tv(e),i=Tf();return r.X({range:n,Z:!0},(function(e,t,n){var r=wh(e[1]),a=new vs(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=yh(t.path),r=IDBKeyRange.bound([n],[us(n)],!1,!0),i=0;return tv(e).X({index:"documentTargetsIndex",Z:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ie",value:function(e,t){return Zd(e).get(t).next((function(e){return e?nd(e):null}))}}]),e}();function Zd(e){return Gh(e,"targets")}function ev(e){return Gh(e,"targetGlobal")}function tv(e){return Gh(e,"targetDocuments")}function nv(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=as(r,o);return 0===s?as(i,u):s}var rv=function(){function e(t){d(this,e),this.kn=t,this.buffer=new $c(nv),this.$n=0}return y(e,[{key:"Mn",value:function(){return++this.$n}},{key:"On",value:function(e){var t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();nv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),iv=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Fn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}},{key:"stop",value:function(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}},{key:"started",get:function(){return null!==this.Fn}},{key:"Bn",value:function(e){var t=this;Vu("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Os(e.t0)){e.next=12;break}Vu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ts(e.t0);case 14:return e.next=16,t.Bn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),av=function(){function e(t,n){d(this,e),this.Ln=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.Ln.qn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return _s.resolve(Bs.at);var r=new rv(t);return this.Ln.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.Ln.Un(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Ln.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Ln.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vu("LruGarbageCollector","Garbage collection skipped; disabled"),_s.resolve(zd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Vu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),zd):n.Kn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Ln.getCacheSize(e)}},{key:"Kn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Vu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Fu()<=tn.DEBUG&&Vu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),_s.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ov=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new av(e,t)}(this,n)}return y(e,[{key:"qn",value:function(e){var t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Gn",value:function(e){var t=0;return this.Un(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Un",value:function(e,t){return this.Qn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return uv(e,n)}},{key:"removeReference",value:function(e,t,n){return uv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return uv(e,t)}},{key:"jn",value:function(e,t){return function(e,t){var n=!1;return Yd(e).tt((function(r){return Hd(e,r,t).next((function(e){return e&&(n=!0),_s.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Qn(e,(function(o,u){if(u<=t){var s=n.jn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,cs.min()),tv(e).delete([0,yh(o.path)])}))}));i.push(s)}})).next((function(){return _s.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return uv(e,t)}},{key:"Qn",value:function(e,t){var n,r=tv(e),i=Bs.at;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Bs.at&&t(new vs(wh(n)),i),i=s,n=u):i=Bs.at})).next((function(){i!==Bs.at&&t(new vs(wh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function uv(e,t){return tv(e).put(function(e,t){return{targetId:0,path:yh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var sv=function(){function e(){d(this,e),this.changes=new pf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,il.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?_s.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),cv=function(){function e(t){d(this,e),this.Tt=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return dv(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return dv(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],$h(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=il.newInvalidDocument(t);return dv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(vv(t))},(function(e,i){r=n.Wn(t,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r={size:0,document:il.newInvalidDocument(t)};return dv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(vv(t))},(function(e,i){r={document:n.Wn(t,i),size:Gd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=yf();return this.Jn(e,t,(function(e,t){var i=n.Wn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Yn",value:function(e,t){var n=this,r=yf(),i=new Xc(vs.comparator);return this.Jn(e,t,(function(e,t){var a=n.Wn(e,t);r=r.insert(e,a),i=i.insert(e,Gd(t))})).next((function(){return{documents:r,Zn:i}}))}},{key:"Jn",value:function(e,t,n){if(t.isEmpty())return _s.resolve();var r=new $c(mv);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(vv(r.first()),vv(r.last())),a=r.getIterator(),o=a.getNext();return dv(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=vs.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&mv(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(vv(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),$h(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dv(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=yf(),o=T(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Wn(vs.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Cl(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=yf(),o=pv(t,n),u=pv(t,xs.max());return dv(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Wn(vs.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new fv(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return hv(e).get("remoteDocumentGlobalKey").next((function(e){return Ku(!!e),e}))}},{key:"zn",value:function(e,t){return hv(e).put("remoteDocumentGlobalKey",t)}},{key:"Wn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=th(e.oe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=vs.fromSegments(t.noDocument.path),i=ed(t.noDocument.readTime);n=il.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return qu();var a=vs.fromSegments(t.unknownDocument.path),o=ed(t.unknownDocument.version);n=il.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new ss(e[0],e[1]);return cs.fromTimestamp(t)}(t.readTime)),n}(this.Tt,t);if(!n.isNoDocument()||!n.version.isEqual(cs.min()))return n}return il.newInvalidDocument(e)}}]),e}();function lv(e){return new cv(e)}var fv=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Xn=e,i.trackRemovals=r,i.ts=new pf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new $c((function(e,t){return as(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ts.get(a);if(n.push(t.Xn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Jh(t.Xn.Tt,o);i=i.add(a.path.popLast());var c=Gd(s);r+=c-u.size,n.push(t.Xn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Jh(t.Xn.Tt,o.convertToNoDocument(cs.min()));n.push(t.Xn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Xn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Xn.updateMetadata(e,r)),_s.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Xn.Hn(e,t).next((function(e){return n.ts.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Xn.Yn(e,t).next((function(e){var t=e.documents;return e.Zn.forEach((function(e,r){n.ts.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(sv);function hv(e){return Gh(e,"remoteDocumentGlobal")}function dv(e){return Gh(e,"remoteDocumentsV14")}function vv(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function pv(e,t){var n=t.documentKey.path.toArray();return[e,$h(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mv(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=as(n[a],r[a]))return i;return(i=as(n.length,r.length))||((i=as(n[n.length-2],r[r.length-2]))||as(n[n.length-1],r[r.length-1]))}var yv=y((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),gv=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Zl(r.mutation,e,tl.empty(),ss.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Tf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tf(),i=bf();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=kf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=bf();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Tf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=yf(),a=Ef(),o=Ef();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof rf)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Zl(o.mutation,t,o.mutation.getFieldMask(),ss.now())):a.set(t.key,tl.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new yv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Ef(),i=new Xc((function(e,t){return e-t})),a=Tf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=T(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||tl.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Tf()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=xf();c.forEach((function(e){if(!a.has(e)){var n=Jl(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return _s.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):_s.resolve(bf()),u=-1,s=a;return o.next((function(t){return _s.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?_s.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Tf())})).next((function(e){return{batchId:u,changes:wf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new vs(t)).next((function(e){var t=kf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=kf();return this.indexManager.getCollectionParents(e,i).next((function(o){return _s.forEach(o,(function(o){var u=function(e,t){return new dl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,il.newInvalidDocument(r)))}));var n=kf();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Zl(a.mutation,i,tl.empty(),ss.now()),Cl(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),kv=function(){function e(t){d(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return _s.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:Gf(n.createTime)}),_s.resolve()}},{key:"getNamedQuery",value:function(e,t){return _s.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:id(e.bundledQuery),readTime:Gf(e.readTime)}}(t)),_s.resolve()}}]),e}(),wv=function(){function e(){d(this,e),this.overlays=new Xc(vs.comparator),this.ss=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return _s.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=bf();return _s.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ce(e,t,i)})),_s.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ss.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),_s.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=bf(),i=t.length+1,a=new vs(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return _s.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Xc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=bf(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=bf(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return _s.resolve(s)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Wh(t,n));var a=this.ss.get(t);void 0===a&&(a=Tf(),this.ss.set(t,a)),this.ss.set(t,a.add(n.key))}}]),e}(),bv=function(){function e(){d(this,e),this.rs=new $c(xv.os),this.us=new $c(xv.cs)}return y(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new xv(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new xv(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new vs(new fs([])),r=new xv(n,e),i=new xv(n,e+1),a=[];return this.us.forEachInRange([r,i],(function(e){t.ls(e),a.push(e.key)})),a}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new vs(new fs([])),n=new xv(t,e),r=new xv(t,e+1),i=Tf();return this.us.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new xv(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),xv=function(){function e(t,n){d(this,e),this.key=t,this.gs=n}return y(e,null,[{key:"os",value:function(e,t){return vs.comparator(e.key,t.key)||as(e.gs,t.gs)}},{key:"cs",value:function(e,t){return as(e.gs,t.gs)||vs.comparator(e.key,t.key)}}]),e}(),Ev=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new $c(xv.os)}return y(e,[{key:"checkEmpty",value:function(e){return _s.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Qh(i,t,n,r);this.mutationQueue.push(a);var o,u=T(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ps=this.ps.add(new xv(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return _s.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return _s.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),i=r<0?0:r;return _s.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return _s.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return _s.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new xv(t,0),i=new xv(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],(function(e){var t=n.Is(e.gs);a.push(t)})),_s.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $c(as);return t.forEach((function(e){var t=new xv(e,0),i=new xv(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,i],(function(e){r=r.add(e.gs)}))})),_s.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;vs.isDocumentKey(i)||(i=i.child(""));var a=new xv(new vs(i),0),o=new $c(as);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gs)),!0)}),a),_s.resolve(this.Es(o))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ku(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return _s.forEach(t.mutations,(function(i){var a=new xv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ps=r}))}},{key:"Pn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new xv(t,0),r=this.ps.firstAfterOrEqual(n);return _s.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,_s.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Sv=function(){function e(t){d(this,e),this.Rs=t,this.docs=new Xc(vs.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return _s.resolve(n?n.document.mutableCopy():il.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=yf();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():il.newInvalidDocument(e))})),_s.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=yf(),a=t.path,o=new vs(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Es(bs(l),n)<=0||(r.has(l.key)||Cl(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return _s.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){qu()}},{key:"Ps",value:function(e,t){return _s.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Iv(this)}},{key:"getSize",value:function(e){return _s.resolve(this.size)}}]),e}(),Iv=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).Xn=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Xn.addEntry(e,i)):t.Xn.removeEntry(r)})),_s.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(sv),Tv=function(){function e(t){d(this,e),this.persistence=t,this.vs=new pf((function(e){return ul(e)}),sl),this.lastRemoteSnapshotVersion=cs.min(),this.highestTargetId=0,this.bs=0,this.Vs=new bv,this.targetCount=0,this.Ss=Jd.Vn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),_s.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return _s.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return _s.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),_s.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),_s.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new Jd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,_s.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),_s.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,_s.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.vs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.vs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),_s.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return _s.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return _s.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),_s.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),_s.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),_s.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return _s.resolve(n)}},{key:"containsKey",value:function(e,t){return _s.resolve(this.Vs.containsKey(t))}}]),e}(),Cv=function(){function e(t,n){var r=this;d(this,e),this.Ds={},this.overlays={},this.Cs=new Bs(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new Tv(this),this.indexManager=new Od,this.remoteDocumentCache=new Sv((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new Yh(n),this.$s=new kv(this.Tt)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new wv,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new Ev(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;Vu("MemoryPersistence","Starting transaction:",e);var i=new _v(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e,t){return _s.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),_v=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(Is),Av=function(){function e(t){d(this,e),this.persistence=t,this.Bs=new bv,this.Ls=null}return y(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw qu()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),_s.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),_s.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),_s.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _s.forEach(this.Us,(function(r){var i=vs.fromPath(r);return t.Ks(e,i).next((function(e){e||n.removeEntry(i,cs.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return _s.or([function(){return _s.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Fs(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}(),Nv=function(){function e(t){d(this,e),this.Tt=t}return y(e,[{key:"F",value:function(e,t,n,r){var i=this,a=new As("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bh,{unique:!0}),e.createObjectStore("documentMutations")}(e),Dv(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=_s.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Dv(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cs.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bh,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return _s.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.js(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ws(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Mh});t.createIndex("collectionPathOverlayIndex",jh,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Fh,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ih});t.createIndex("documentKeyIndex",Th),t.createIndex("collectionGroupIndex",Ch)}(e)})).next((function(){return i.Hs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Lh}).createIndex("sequenceNumberIndex",Oh,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Rh}).createIndex("documentKeyIndex",Ph,{unique:!1})}(e)}))),o}},{key:"Qs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Gd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return _s.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return _s.forEach(r,(function(r){Ku(r.userId===n.userId);var i=td(t.Tt,r);return Kd(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"js",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new fs(n),o=function(e){return[0,yh(e)]}(a);r.push(t.get(o).next((function(n){return n?_s.resolve():function(n){return t.put({targetId:0,path:yh(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return _s.waitFor(r)}))}))}},{key:"zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Dh});var n=t.store("collectionParents"),r=new Rd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:yh(i)})}};return t.store("remoteDocuments").X({Z:!0},(function(e,t){var n=new fs(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Z:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],wh(r));return i(a.popLast())}))}))}},{key:"Ws",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=nd(r),a=rd(t.Tt,i);return n.put(a)}))}},{key:"Hs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new vs(fs.fromString(i.document.name).popFirst(5)):i.noDocument?vs.fromSegments(i.noDocument.path):i.unknownDocument?vs.fromSegments(i.unknownDocument.path):qu()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return _s.waitFor(r)}))}},{key:"Js",value:function(e,t){var n=this,r=t.store("mutations"),i=lv(this.Tt),a=new Cv(Av.qs,this.Tt.oe);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Tf();td(n.Tt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),_s.forEach(r,(function(e,r){var o=new Pu(r),u=fd.ue(n.Tt,o),s=a.getIndexManager(o),c=Qd.ue(o,n.Tt,s,a.referenceDelegate);return new gv(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Kh(t,Bs.at),e).next()}))}))}}]),e}();function Dv(e){e.createObjectStore("targetDocuments",{keyPath:Ah}).createIndex("documentTargetsIndex",Nh,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_h,{unique:!0}),e.createObjectStore("targetGlobal")}var Lv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ov=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=o,this.document=u,this.Zs=c,this.Xs=l,this.ti=f,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=function(e){return Promise.resolve()},!e.C())throw new Hu(Qu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ov(this,i),this.oi=n+"main",this.Tt=new Yh(s),this.ui=new Ns(this.oi,this.ti,new Nv(this.Tt)),this.Ns=new $d(this.referenceDelegate,this.Tt),this.remoteDocumentCache=lv(this.Tt),this.$s=new sd,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===l&&Bu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Hu(Qu.FAILED_PRECONDITION,Lv);return e.hi(),e.li(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ns.getHighestSequenceNumber(t)}))})).then((function(t){e.Cs=new Bs(t,e.Zs)})).then((function(){e.xs=!0})).catch((function(t){return e.ui&&e.ui.close(),Promise.reject(t)}))}},{key:"di",value:function(e){var t=this;return this.ri=function(){var n=Yt(Wt().mark((function n(r){return Wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ui.L(function(){var t=Yt(Wt().mark((function t(n){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Pv(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e._i(t).next((function(t){t||(e.isPrimary=!1,e.Ys.enqueueRetryable((function(){return e.ri(!1)})))}))})).next((function(){return e.wi(t)})).next((function(n){return e.isPrimary&&!n?e.mi(t).next((function(){return!1})):!!n&&e.gi(t).next((function(){return!0}))}))})).catch((function(t){if(Os(t))return Vu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Vu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ys.enqueueRetryable((function(){return e.ri(t)})),e.isPrimary=t}))}},{key:"_i",value:function(e){var t=this;return Rv(e).get("owner").next((function(e){return _s.resolve(t.yi(e))}))}},{key:"pi",value:function(e){return Pv(e).delete(this.clientId)}},{key:"Ii",value:function(){var e=Yt(Wt().mark((function e(){var t,n,r,i,a=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ti(this.ii,18e5)){e.next=6;break}return this.ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Gh(e,"clientMetadata");return t.W().next((function(e){var n=a.Ei(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return _s.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ci){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ci.removeItem(this.Ai(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ai().then((function(){return e.Ii()})).then((function(){return e.fi()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"wi",value:function(e){var t=this;return this.Xs?_s.resolve(!0):Rv(e).get("owner").next((function(n){if(null!==n&&t.Ti(n.leaseTimestampMs,5e3)&&!t.Ri(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new Hu(Qu.FAILED_PRECONDITION,Lv);return!1}}return!(!t.networkEnabled||!t.inForeground)||Pv(e).W().next((function(e){return void 0===t.Ei(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Vu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Yt(Wt().mark((function e(){var t=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),e.next=7,this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Kh(e,Bs.at);return t.mi(n).next((function(){return t.pi(n)}))}));case 7:this.ui.close(),this.Vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ei",value:function(e,t){var n=this;return e.filter((function(e){return n.Ti(e.updateTimeMs,t)&&!n.Ri(e.clientId)}))}},{key:"Si",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Pv(t).W().next((function(t){return e.Ei(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xs}},{key:"getMutationQueue",value:function(e,t){return Qd.ue(e,this.Tt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Md(e,this.Tt.oe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return fd.ue(this.Tt,e)}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;Vu("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ti)?qh:14===i?zh:13===i?Uh:12===i?Bh:11===i?Vh:void qu();return this.ui.runTransaction(e,o,u,(function(i){return a=new Kh(i,r.Cs?r.Cs.next():Bs.at),"readwrite-primary"===t?r._i(a).next((function(e){return!!e||r.wi(a)})).next((function(t){if(!t)throw Bu("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ys.enqueueRetryable((function(){return r.ri(!1)})),new Hu(Qu.FAILED_PRECONDITION,Ss);return n(a)})).next((function(e){return r.gi(a).next((function(){return e}))})):r.Di(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Di",value:function(e){var t=this;return Rv(e).get("owner").next((function(e){if(null!==e&&t.Ti(e.leaseTimestampMs,5e3)&&!t.Ri(e.ownerId)&&!t.yi(e)&&!(t.Xs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Hu(Qu.FAILED_PRECONDITION,Lv)}))}},{key:"gi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rv(e).put("owner",t)}},{key:"mi",value:function(e){var t=this,n=Rv(e);return n.get("owner").next((function(e){return t.yi(e)?(Vu("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_s.resolve()}))}},{key:"Ti",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Bu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"hi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=function(){e.Ys.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ai()}))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}},{key:"vi",value:function(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}},{key:"li",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=function(){t.Pi();var e=/(?:Version|Mobile)\/1[456]/;Mt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ys.enterRestrictedMode(!0),t.Ys.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ei))}},{key:"bi",value:function(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}},{key:"Ri",value:function(e){var t;try{var n=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Vu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Bu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Pi",value:function(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(qr){Bu("Failed to set zombie client id.",qr)}}},{key:"Vi",value:function(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(qr){}}},{key:"Ai",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Ns.C()}}]),e}();function Rv(e){return Gh(e,"owner")}function Pv(e){return Gh(e,"clientMetadata")}function Mv(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var jv=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=i}return y(e,null,[{key:"Ni",value:function(t,n){var r,i=Tf(),a=Tf(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Fv=function(){function e(){d(this,e),this.ki=!1}return y(e,[{key:"initialize",value:function(e,t){this.$i=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Mi(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Fi(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(ml(t))return _s.resolve(null);var r=bl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=El(t,null,"F"),r=bl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Tf.apply(void 0,h(i));return n.$i.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Bi(t,i);return n.Li(t,o,a,r.readTime)?n.Mi(e,El(t,null,"F")):n.qi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return ml(t)||r.isEqual(cs.min())?this.Fi(e,t):this.$i.getDocuments(e,n).next((function(a){var o=i.Bi(t,a);return i.Li(t,o,n,r)?i.Fi(e,t):(Fu()<=tn.DEBUG&&Vu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tl(t)),i.qi(e,o,t,ws(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new $c(Al(e));return t.forEach((function(t,r){Cl(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fi",value:function(e,t){return Fu()<=tn.DEBUG&&Vu("QueryEngine","Using full collection scan to execute query:",Tl(t)),this.$i.getDocumentsMatchingQuery(e,t,xs.min())}},{key:"qi",value:function(e,t,n,r){return this.$i.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Vv=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Ui=n,this.Tt=i,this.Ki=new Xc(as),this.Gi=new pf((function(e){return ul(e)}),sl),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.$s=t.getBundleCache(),this.zi(r)}return y(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gv(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function Bv(e,t,n,r){return new Vv(e,t,n,r)}function Uv(e,t){return zv.apply(this,arguments)}function zv(){return zv=Yt(Wt().mark((function e(t,n){var r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Tf(),s=T(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=T(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=T(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var m,y=T(p.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Wi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function qv(e,t){var n=Gu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=_s.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ku(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Tf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Kv(e){var t=Gu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function Gv(e,t){var n=Gu(e),r=t.snapshotVersion,i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ns.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ns.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Ys.EMPTY_BYTE_STRING,cs.min()).withLastLimboFreeSnapshotVersion(cs.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ns.updateTargetData(e,c))}}));var u=yf(),s=Tf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Qv(e,a,t.documentUpdates).next((function(e){u=e.Hi,s=e.Ji}))),!r.isEqual(cs.min())){var c=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return _s.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ki=i,e}))}function Qv(e,t,n){var r=Tf(),i=Tf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=yf();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(cs.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Vu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Hi:r,Ji:i}}))}function Hv(e,t){var n=Gu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Wv(e,t){var n=Gu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(i){return i?(r=i,_s.resolve(r)):n.Ns.allocateTargetId(e).next((function(i){return r=new Xh(t,i,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function Xv(e,t,n){return Yv.apply(this,arguments)}function Yv(){return Yv=Yt(Wt().mark((function e(t,n,r){var i,a,o;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gu(t),a=i.Ki.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Os(e.t1)){e.next=12;break}throw e.t1;case 12:Vu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ki=i.Ki.remove(n),i.Gi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Yv.apply(this,arguments)}function Jv(e,t,n){var r=Gu(e),i=cs.min(),a=Tf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Gu(e),i=r.Gi.get(n);return void 0!==i?_s.resolve(r.Ki.get(i)):r.Ns.getTargetData(t,n)}(r,e,bl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?i:cs.min(),n?a:Tf())})).next((function(e){return ep(r,_l(t),e),{documents:e,Yi:a}}))}))}function $v(e,t){var n=Gu(e),r=Gu(n.Ns),i=n.Ki.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ie(e,t).next((function(e){return e?e.target:null}))}))}function Zv(e,t){var n=Gu(e),r=n.Qi.get(t)||cs.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ji.getAllFromCollectionGroup(e,t,ws(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return ep(n,t,e),e}))}function ep(e,t,n){var r=e.Qi.get(t)||cs.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}function tp(e,t,n,r){return np.apply(this,arguments)}function np(){return np=Yt(Wt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Gu(t),o=Tf(),u=yf(),s=T(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Zi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Xi(l)).setReadTime(n.tr(l.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.ji.newChangeBuffer({trackRemovals:!0}),e.next=7,Wv(a,function(e){return bl(pl(fs.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Qv(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ns.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Ns.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Hi,t.Ji)})).next((function(){return t.Hi}))}))})));case 9:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e,t){return ip.apply(this,arguments)}function ip(){return ip=Yt(Wt().mark((function e(t,n){var r,i,a,o=arguments;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Tf(),e.next=3,Wv(t,bl(id(n.bundledQuery)));case 3:return i=e.sent,a=Gu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Gf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$s.saveNamedQuery(e,n);var o=i.withResumeToken(Ys.EMPTY_BYTE_STRING,t);return a.Ki=a.Ki.insert(o.targetId,o),a.Ns.updateTargetData(e,o).next((function(){return a.Ns.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ns.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function ap(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function op(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function up(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var sp=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Hu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Bu("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),cp=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Hu(i.error.code,i.error.message))),a?new e(t,i.state,r):(Bu("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),lp=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"er",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=_f(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ws(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Bu("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),fp=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"er",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Bu("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),hp=function(){function e(){d(this,e),this.activeTargetIds=_f()}return y(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),dp=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Xc(as),this.started=!1,this.hr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=ap(this.persistenceKey,this.rr),this.dr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new hp),this._r=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.wr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.mr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.gr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.yr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}return y(e,[{key:"start",value:function(){var e=Yt(Wt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Si();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.rr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(ap(this.persistenceKey,i)))&&(o=lp.er(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.pr(),(u=this.storage.getItem(this.gr))&&(s=this.Ir(u))&&this.Tr(s),c=T(this.hr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.cr(f)}catch(d){c.e(d)}finally{c.f()}this.hr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.dr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Er(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ar(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ar(e,t,n),this.Rr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(up(this.persistenceKey,e));if(n){var r=cp.er(e,n);r&&(t=r.state)}}return this.Pr.sr(e),this.pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Pr.ir(e),this.pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Pr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(up(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.vr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Rr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Vu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Vu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Vu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"cr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Vu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Bu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(Yt(Wt().mark((function e(){var r,i,a,o,u,s,c;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t._r.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Sr(n.key),e.abrupt("return",t.Dr(r,null));case 6:if(!(i=t.Cr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Dr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.wr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Nr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.kr(a));case 16:e.next=41;break;case 18:if(!t.mr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.$r(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.gr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Ir(n.newValue))){e.next=30;break}return e.abrupt("return",t.Tr(u));case 30:e.next=41;break;case 32:if(n.key!==t.dr){e.next=37;break}s=function(e){var t=Bs.at;if(null!=e)try{var n=JSON.parse(e);Ku("number"==typeof n),t=n}catch(e){Bu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Bs.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.yr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.hr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Pr",get:function(){return this.ar.get(this.rr)}},{key:"pr",value:function(){this.setItem(this.lr,this.Pr.nr())}},{key:"Ar",value:function(e,t,n){var r=new sp(this.currentUser,e,t,n),i=op(this.persistenceKey,this.currentUser,e);this.setItem(i,r.nr())}},{key:"Rr",value:function(e){var t=op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(t))}},{key:"vr",value:function(e,t,n){var r=up(this.persistenceKey,e),i=new cp(e,t,n);this.setItem(r,i.nr())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}},{key:"Sr",value:function(e){var t=this._r.exec(e);return t?t[1]:null}},{key:"Cr",value:function(e,t){var n=this.Sr(e);return lp.er(n,t)}},{key:"Nr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return sp.er(new Pu(i),r,t)}},{key:"$r",value:function(e,t){var n=this.mr.exec(e),r=Number(n[1]);return cp.er(r,t)}},{key:"Ir",value:function(e){return fp.er(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"kr",value:function(){var e=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Br(t.batchId,t.state,t.error));case 2:Vu("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}},{key:"Dr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.qr(o,u).then((function(){n.ar=r}))}},{key:"Tr",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Er",value:function(e){var t=_f();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),vp=function(){function e(){d(this,e),this.Ur=new hp,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new hp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),pp=function(){function e(){d(this,e)}return y(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),mp=function(){function e(){var t=this;d(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return y(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){Vu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){Vu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),yp=null;function gp(){return null===yp?yp=268435456+Math.round(2147483648*Math.random()):yp++,"0x"+yp.toString(16)}var kp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},wp=function(){function e(t){d(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return y(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),bp="WebChannelConnection",xp=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"wo",value:function(e,t,n,r){var i=gp();return new Promise((function(a,o){var u=new Ou;u.setWithCredentials(!0),u.listenOnce(_u.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Cu.NO_ERROR:var t=u.getResponseJson();Vu(bp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Cu.TIMEOUT:Vu(bp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Hu(Qu.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:var n=u.getStatus();if(Vu(bp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Qu).indexOf(t)>=0?t:Qu.UNKNOWN}(s.status);o(new Hu(c,s.message))}else o(new Hu(Qu.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Hu(Qu.UNAVAILABLE,"Connection failed."));break;default:qu()}}finally{Vu(bp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Vu(bp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=gp(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Iu(),o=Tu(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Du({})),this._o(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Vu(bp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new wp({Yr:function(t){f?Vu(bp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Vu(bp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Vu(bp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Lu.EventType.OPEN,(function(){f||Vu(bp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Lu.EventType.CLOSE,(function(){f||(f=!0,Vu(bp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.oo())})),d(c,Lu.EventType.ERROR,(function(t){f||(f=!0,Uu(bp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.oo(new Hu(Qu.UNAVAILABLE,"The operation could not be completed")))})),d(c,Lu.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Ku(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Vu(bp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=sf[e];if(void 0!==t)return vf(t)}(u),l=o.message;void 0===s&&(s=Qu.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.oo(new Hu(s,l)),c.close()}else Vu(bp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.uo(i)}})),d(o,Au.STAT_EVENT,(function(t){t.stat===Nu.PROXY?Vu(bp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Nu.NOPROXY&&Vu(bp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.ro()}),0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,i){var a=gp(),o=this.fo(e,t);Vu("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this._o(u,r,i),this.wo(e,o,u,n).then((function(t){return Vu("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Uu("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,i,a){return this.lo(e,t,n,r,i)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=kp[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function Ep(){return"undefined"!=typeof window?window:null}function Sp(){return"undefined"!=typeof document?document:null}function Ip(e){return new Uf(e,!0)}var Tp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Eo=0}},{key:"Po",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&Vu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),Cp=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.Ys=t,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Tp(t,n)}return y(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=Yt(Wt().mark((function e(t,n){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===Qu.RESOURCE_EXHAUSTED?(Bu(n.toString()),Bu("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===Qu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Co===n&&e.jo(i,a)}),(function(n){t((function(){var t=new Hu(Qu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.ko.vo(Yt(Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return Vu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(Vu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),_p=function(e){k(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s}return y(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.yt?(Ku(void 0===t||"string"==typeof t),Ys.fromBase64String(t||"")):(Ku(void 0===t||t instanceof Uint8Array),Ys.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Qu.UNKNOWN:vf(e.code);return new Hu(t,e.message||"")}(o);n=new Of(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Xf(e,s.document.name),l=Gf(s.document.updateTime),f=s.document.createTime?Gf(s.document.createTime):cs.min(),h=new nl({mapValue:{fields:s.document.fields}}),d=il.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new Df(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Xf(e,m.document),g=m.readTime?Gf(m.readTime):cs.min(),k=il.newNoDocument(y,g),w=m.removedTargetIds||[];n=new Df([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var x=Xf(e,b.document),E=b.removedTargetIds||[];n=new Df([],E,x,null)}else{if(!("filter"in t))return qu();t.filter;var S=t.filter;S.targetId;var I=S.count||0,T=new hf(I),C=S.targetId;n=new Lf(C,T)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return cs.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?cs.min():t.readTime?Gf(t.readTime):cs.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=$f(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=cl(r)?{documents:ah(e,r)}:{query:oh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=qf(e,t.resumeToken):t.snapshotVersion.compareTo(cs.min())>0&&(n.readTime=zf(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=$f(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(Cp),Ap=function(e){k(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s.Zo=!1,s}return y(n,[{key:"Xo",get:function(){return this.Zo}},{key:"start",value:function(){this.Zo=!1,this.lastStreamToken=void 0,_r(w(n.prototype),"start",this).call(this)}},{key:"Go",value:function(){this.Zo&&this.tu([])}},{key:"Wo",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(Ku(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();var t=function(e,t){return e&&e.length>0?(Ku(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Gf(e.updateTime):Gf(t);return n.isEqual(cs.min())&&(n=Gf(t)),new Hl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Gf(e.commitTime);return this.listener.eu(n,t)}return Ku(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}},{key:"su",value:function(){var e={};e.database=$f(this.Tt),this.qo(e)}},{key:"tu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return rh(t.Tt,e)}))};this.qo(n)}}]),n}(Cp),Np=function(e){k(n,e);var t=E(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.Tt=a,o.iu=!1,o}return y(n,[{key:"ru",value:function(){if(this.iu)throw new Hu(Qu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.lo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Qu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hu(Qu.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var i=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection.mo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Qu.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Hu(Qu.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return y((function e(){d(this,e)}))}());var Dp=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return y(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(Bu(t),this.cu=!1):Vu("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),Lp=y((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr((function(e){r.enqueueAndForget(Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=qp(o),!e.t0){e.next=5;break}return Vu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Yt(Wt().mark((function e(t){var n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gu(t)).mu.add(4),e.next=4,Pp(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,Op(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new Dp(r,i)}));function Op(e){return Rp.apply(this,arguments)}function Rp(){return Rp=Yt(Wt().mark((function e(t){var n,r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qp(t)){e.next=18;break}n=T(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Rp.apply(this,arguments)}function Pp(e){return Mp.apply(this,arguments)}function Mp(){return Mp=Yt(Wt().mark((function e(t){var n,r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Mp.apply(this,arguments)}function jp(e,t){var n=Gu(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),zp(n)?Up(n):gm(n).Mo()&&Vp(n,t))}function Fp(e,t){var n=Gu(e),r=gm(n);n.wu.delete(t),r.Mo()&&Bp(n,t),0===n.wu.size&&(r.Mo()?r.Bo():qp(n)&&n.pu.set("Unknown"))}function Vp(e,t){e.Iu.Ot(t.targetId),gm(e).Jo(t)}function Bp(e,t){e.Iu.Ot(t),gm(e).Yo(t)}function Up(e){e.Iu=new Pf({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),gm(e).start(),e.pu.au()}function zp(e){return qp(e)&&!gm(e).$o()&&e.wu.size>0}function qp(e){return 0===Gu(e).mu.size}function Kp(e){e.Iu=void 0}function Gp(e){return Qp.apply(this,arguments)}function Qp(){return Qp=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){Vp(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Hp(e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=Yt(Wt().mark((function e(t,n){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Kp(t),zp(t)?(t.pu.fu(n),Up(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Wp.apply(this,arguments)}function Xp(e,t,n){return Yp.apply(this,arguments)}function Yp(){return Yp=Yt(Wt().mark((function e(t,n,r){var i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof Of&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Yt(Wt().mark((function e(t,n){var r,i,a,o;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.wu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.wu.delete(o),t.Iu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Vu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Jp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Df?t.Iu.Qt(n):n instanceof Lf?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(cs.min())){e.next=29;break}return e.prev=14,e.next=17,Kv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.wu.get(r);i&&e.wu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(Ys.EMPTY_BYTE_STRING,n.snapshotVersion)),Bp(e,t);var r=new Xh(n.target,t,1,n.sequenceNumber);Vp(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Vu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Jp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Yp.apply(this,arguments)}function Jp(e,t,n){return $p.apply(this,arguments)}function $p(){return $p=Yt(Wt().mark((function e(t,n,r){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Os(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,Pp(t);case 5:t.pu.set("Offline"),r||(r=function(){return Kv(t.localStore)}),t.asyncQueue.enqueueRetryable(Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,Op(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Zp(e,t){return t().catch((function(n){return Jp(e,n,t)}))}function em(e){return tm.apply(this,arguments)}function tm(){return tm=Yt(Wt().mark((function e(t){var n,r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gu(t),r=km(n),i=n._u.length>0?n._u[n._u.length-1].batchId:-1;case 2:if(!nm(n)){e.next=19;break}return e.prev=3,e.next=6,Hv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n._u.length&&r.Bo(),e.abrupt("break",19);case 10:i=a.batchId,rm(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Jp(n,e.t0);case 17:e.next=2;break;case 19:im(n)&&am(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),tm.apply(this,arguments)}function nm(e){return qp(e)&&e._u.length<10}function rm(e,t){e._u.push(t);var n=km(e);n.Mo()&&n.Xo&&n.tu(t.mutations)}function im(e){return qp(e)&&!km(e).$o()&&e._u.length>0}function am(e){km(e).start()}function om(e){return um.apply(this,arguments)}function um(){return um=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:km(t).su();case 1:case"end":return e.stop()}}),e)}))),um.apply(this,arguments)}function sm(e){return cm.apply(this,arguments)}function cm(){return cm=Yt(Wt().mark((function e(t){var n,r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=km(t),r=T(t._u);try{for(r.s();!(i=r.n()).done;)a=i.value,n.tu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e,t,n){return fm.apply(this,arguments)}function fm(){return fm=Yt(Wt().mark((function e(t,n,r){var i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._u.shift(),a=Hh.from(i,n,r),e.next=3,Zp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,em(t);case 5:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function hm(e,t){return dm.apply(this,arguments)}function dm(){return dm=Yt(Wt().mark((function e(t,n){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&km(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Yt(Wt().mark((function e(t,n){var r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!df(i=n.code)||i===Qu.ABORTED){e.next=7;break}return r=t._u.shift(),km(t).Fo(),e.next=5,Zp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,em(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:im(t)&&am(t);case 5:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function vm(e,t){return pm.apply(this,arguments)}function pm(){return pm=Yt(Wt().mark((function e(t,n){var r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Gu(t)).asyncQueue.verifyOperationInProgress(),Vu("RemoteStore","RemoteStore received new credentials"),i=qp(r),r.mu.add(3),e.next=6,Pp(r);case 6:return i&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,Op(r);case 12:case"end":return e.stop()}}),e)}))),pm.apply(this,arguments)}function mm(e,t){return ym.apply(this,arguments)}function ym(){return ym=Yt(Wt().mark((function e(t,n){var r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gu(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,Op(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,Pp(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function gm(e){return e.Tu||(e.Tu=function(e,t,n){var r=Gu(e);return r.ru(),new _p(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Gp.bind(null,e),no:Hp.bind(null,e),Ho:Xp.bind(null,e)}),e.gu.push(function(){var t=Yt(Wt().mark((function t(n){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.Fo(),zp(e)?Up(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:Kp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}function km(e){return e.Eu||(e.Eu=function(e,t,n){var r=Gu(e);return r.ru(),new Ap(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:om.bind(null,e),no:hm.bind(null,e),nu:sm.bind(null,e),eu:lm.bind(null,e)}),e.gu.push(function(){var t=Yt(Wt().mark((function t(n){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Eu.Fo(),t.next=4,em(e);case 4:t.next=9;break;case 6:return t.next=8,e.Eu.stop();case 8:e._u.length>0&&(Vu("RemoteStore","Stopping write stream with ".concat(e._u.length," pending writes")),e._u=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Eu}var wm=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hu(Qu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function bm(e,t){if(Bu("AsyncQueue","".concat(t,": ").concat(e)),Os(e))return new Hu(Qu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var xm=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||vs.comparator(e.key,n.key)}:function(e,t){return vs.comparator(e.key,t.key)},this.keyedMap=kf(),this.sortedSet=new Xc(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Em=function(){function e(){d(this,e),this.Au=new Xc(vs.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):qu():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Sm=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,xm.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Im=y((function e(){d(this,e),this.Pu=void 0,this.listeners=[]})),Tm=y((function e(){d(this,e),this.queries=new pf((function(e){return Il(e)}),Sl),this.onlineState="Unknown",this.vu=new Set}));function Cm(e,t){return _m.apply(this,arguments)}function _m(){return _m=Yt(Wt().mark((function e(t,n){var r,i,a,o,u;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Im),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Pu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=bm(e.t0,"Initialization of query '".concat(Tl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Pu&&n.Vu(o.Pu)&&Om(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),_m.apply(this,arguments)}function Am(e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=Yt(Wt().mark((function e(t,n){var r,i,a,o,u;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Nm.apply(this,arguments)}function Dm(e,t){var n,r=Gu(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=T(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Pu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Om(r)}function Lm(e,t,n){var r=Gu(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Om(e){e.vu.forEach((function(e){e.next()}))}var Rm=function(){function e(t,n,r){d(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Sm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Du?this.xu(e)&&(this.Su.next(e),a=!0):this.Nu(e,this.onlineState)&&(this.ku(e),a=!0),this.Cu=e,a}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.$u||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=Sm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}(),Pm=function(){function e(t,n){d(this,e),this.Mu=t,this.byteLength=n}return y(e,[{key:"Ou",value:function(){return"metadata"in this.Mu}}]),e}(),Mm=function(){function e(t){d(this,e),this.Tt=t}return y(e,[{key:"Zi",value:function(e){return Xf(this.Tt,e)}},{key:"Xi",value:function(e){return e.metadata.exists?th(this.Tt,e.document,!1):il.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}},{key:"tr",value:function(e){return Gf(e)}}]),e}(),jm=function(){function e(t,n,r){d(this,e),this.Fu=t,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Fm(t)}return y(e,[{key:"Bu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;var n=fs.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Lu",value:function(e){var t,n=new Map,r=new Mm(this.Tt),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Zi(a.metadata.name),s=T(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Tf()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Yt(Wt().mark((function e(){var t,n,r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tp(this.localStore,new Mm(this.Tt),this.documents,this.Fu.id);case 2:t=e.sent,n=this.Lu(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,rp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Vm=y((function e(t){d(this,e),this.key=t})),Bm=y((function e(t){d(this,e),this.key=t})),Um=function(){function e(t,n){d(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Tf(),this.mutatedKeys=Tf(),this.ju=Al(t),this.zu=new xm(this.ju)}return y(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new Em,i=t?t.zu:this.zu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Cl(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Yu(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.ju(f,s)>0||c&&n.ju(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:u,mutatedKeys:a}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var a=e.Ju.Ru();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qu()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var o=t?this.Xu():[],u=0===this.Qu.size&&this.current?1:0,s=u!==this.Gu;return this.Gu=u,0!==a.length||s?{snapshot:new Sm(this.query,e.zu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Em,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=Tf(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new Bm(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new Vm(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=Tf();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return Sm.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),zm=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),qm=y((function e(t){d(this,e),this.key=t,this.ic=!1})),Km=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new pf((function(e){return Il(e)}),Sl),this.uc=new Map,this.cc=new Set,this.ac=new Xc(vs.comparator),this.hc=new Map,this.lc=new bv,this.fc={},this.dc=new Map,this._c=Jd.Sn(),this.onlineState="Unknown",this.wc=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function Gm(e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=Yt(Wt().mark((function e(t,n){var r,i,a,o,u,s;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fy(t),!(o=r.oc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.sc(),e.next=15;break;case 6:return e.next=8,Wv(r.localStore,bl(n));case 8:return u=e.sent,r.isPrimaryClient&&jp(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Hm(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Qm.apply(this,arguments)}function Hm(e,t,n,r,i){return Wm.apply(this,arguments)}function Wm(){return Wm=Yt(Wt().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=Yt(Wt().mark((function e(t,n,r,i){var a,o,u;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Hu(r),e.t0=a.Li,!e.t0){e.next=6;break}return e.next=5,Jv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(vy(t,n.targetId,u.tc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Jv(t.localStore,n,!0);case 3:return o=e.sent,u=new Um(n,o.Yi),s=u.Hu(o.documents),c=Nf.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),vy(t,r,l.tc),f=new zm(n,r,u),e.abrupt("return",(t.oc.set(n,f),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Wm.apply(this,arguments)}function Xm(e,t){return Ym.apply(this,arguments)}function Ym(){return Ym=Yt(Wt().mark((function e(t,n){var r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gu(t),i=r.oc.get(n),!((a=r.uc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(i.targetId,a.filter((function(e){return!Sl(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Xv(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Fp(r.remoteStore,i.targetId),hy(r,i.targetId)})).catch(Ts);case 9:e.next=14;break;case 11:return hy(r,i.targetId),e.next=14,Xv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Ym.apply(this,arguments)}function Jm(e,t,n){return $m.apply(this,arguments)}function $m(){return $m=Yt(Wt().mark((function e(t,n,r){var i,a,o;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Gu(e),a=ss.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Tf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=yf(),s=Tf();return i.ji.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=T(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ef(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new rf(c.key,l,rl(l.value.mapValue),Wl.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:wf(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fc[e.currentUser.toKey()];r||(r=new Xc(as)),r=r.insert(t,n),e.fc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,yy(i,a.changes);case 9:return e.next=11,em(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=bm(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),$m.apply(this,arguments)}function Zm(e,t){return ey.apply(this,arguments)}function ey(){return ey=Yt(Wt().mark((function e(t,n){var r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),e.prev=1,e.next=4,Gv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(Ku(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?Ku(n.ic):e.removedDocuments.size>0&&(Ku(n.ic),n.ic=!1))})),e.next=8,yy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ts(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ey.apply(this,arguments)}function ty(e,t,n){var r=Gu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.oc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Om(n)}(r.eventManager,t),i.length&&r.rc.Ho(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ny(e,t,n){return ry.apply(this,arguments)}function ry(){return ry=Yt(Wt().mark((function e(t,n,r){var i,a,o,u,s,c;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.hc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Xc(vs.comparator)).insert(o,il.newNoDocument(o,cs.min())),s=Tf().add(o),c=new Af(cs.min(),new Map,new $c(as),u,s),e.next=9,Zm(i,c);case 9:i.ac=i.ac.remove(o),i.hc.delete(n),my(i),e.next=16;break;case 14:return e.next=16,Xv(i.localStore,n,!1).then((function(){return hy(i,n,r)})).catch(Ts);case 16:case"end":return e.stop()}}),e)}))),ry.apply(this,arguments)}function iy(e,t){return ay.apply(this,arguments)}function ay(){return ay=Yt(Wt().mark((function e(t,n){var r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),i=n.batch.batchId,e.prev=1,e.next=4,qv(r.localStore,n);case 4:return a=e.sent,fy(r,i,null),ly(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,yy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ts(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ay.apply(this,arguments)}function oy(e,t,n){return uy.apply(this,arguments)}function uy(){return uy=Yt(Wt().mark((function e(t,n,r){var i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gu(t),e.prev=1,e.next=4,function(e,t){var n=Gu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ku(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,fy(i,n,r),ly(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,yy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ts(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),uy.apply(this,arguments)}function sy(e,t){return cy.apply(this,arguments)}function cy(){return cy=Yt(Wt().mark((function e(t,n){var r,i,a,o;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qp((r=Gu(t)).remoteStore)||Vu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Gu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.dc.get(i)||[]).push(n),r.dc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=bm(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),cy.apply(this,arguments)}function ly(e,t){(e.dc.get(t)||[]).forEach((function(e){e.resolve()})),e.dc.delete(t)}function fy(e,t,n){var r=Gu(e),i=r.fc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fc[r.currentUser.toKey()]=i}}function hy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.uc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.oc.delete(a),n&&e.rc.gc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||dy(e,t)}))}function dy(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(Fp(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),my(e))}function vy(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Vm?(e.lc.addReference(a.key,t),py(e,a)):a instanceof Bm?(Vu("SyncEngine","Document no longer in limbo: "+a.key),e.lc.removeReference(a.key,t),e.lc.containsKey(a.key)||dy(e,a.key)):qu()}}catch(o){i.e(o)}finally{i.f()}}function py(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(Vu("SyncEngine","New document in limbo: "+n),e.cc.add(r),my(e))}function my(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new vs(fs.fromString(t)),r=e._c.next();e.hc.set(r,new qm(n)),e.ac=e.ac.insert(n,r),jp(e.remoteStore,new Xh(bl(pl(n.path)),r,2,Bs.at))}}function yy(e,t,n){return gy.apply(this,arguments)}function gy(){return gy=Yt(Wt().mark((function e(t,n,r){var i,a,o,u;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gu(t),a=[],o=[],u=[],e.t0=i.oc.isEmpty(),e.t0){e.next=9;break}return i.oc.forEach((function(e,t){u.push(i.mc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=jv.Ni(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.rc.Ho(a),e.next=9,function(){var e=Yt(Wt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return _s.forEach(n,(function(t){return _s.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return _s.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Os(e.t0)){e.next=10;break}throw e.t0;case 10:Vu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ki.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ki=r.Ki.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),gy.apply(this,arguments)}function ky(e,t){return wy.apply(this,arguments)}function wy(){return wy=Yt(Wt().mark((function e(t,n){var r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Gu(t)).currentUser.isEqual(n)){e.next=11;break}return Vu("SyncEngine","User change. New user:",n.toKey()),e.next=5,Uv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new Hu(Qu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,yy(r,i.Wi);case 11:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function by(e,t){var n=Gu(e),r=n.hc.get(t);if(r&&r.ic)return Tf().add(r.key);var i=Tf(),a=n.uc.get(t);if(!a)return i;var o,u=T(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.oc.get(s);i=i.unionWith(c.view.Wu)}}catch(l){u.e(l)}finally{u.f()}return i}function xy(e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=Yt(Wt().mark((function e(t,n){var r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),e.next=3,Jv(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.nc(i),e.abrupt("return",(r.isPrimaryClient&&vy(r,n.targetId,a.tc),a));case 6:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function Sy(e,t){return Iy.apply(this,arguments)}function Iy(){return Iy=Yt(Wt().mark((function e(t,n){var r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),e.abrupt("return",Zv(r.localStore,n).then((function(e){return yy(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Iy.apply(this,arguments)}function Ty(e,t,n,r){return Cy.apply(this,arguments)}function Cy(){return Cy=Yt(Wt().mark((function e(t,n,r,i){var a,o;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gu(t),e.next=3,function(e,t){var n=Gu(e),r=Gu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.An(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):_s.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,em(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(fy(a,n,i||null),ly(a,n),function(e,t){Gu(Gu(e).mutationQueue).Pn(t)}(a.localStore,n)):qu();case 11:return e.next=13,yy(a,o);case 13:e.next=16;break;case 15:Vu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Cy.apply(this,arguments)}function _y(e,t){return Ay.apply(this,arguments)}function Ay(){return Ay=Yt(Wt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fy(r=Gu(t)),Vy(r),!0!==n||!0===r.wc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Ny(r,i.toArray());case 5:return a=e.sent,r.wc=!0,e.next=9,mm(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(u=o.n()).done;)s=u.value,jp(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.wc){e.next=25;break}return c=[],l=Promise.resolve(),r.uc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return hy(r,t),Xv(r.localStore,t,!0)})),Fp(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Ny(r,c);case 21:return function(e){var t=Gu(e);t.hc.forEach((function(e,n){Fp(t.remoteStore,n)})),t.lc._s(),t.hc=new Map,t.ac=new Xc(vs.comparator)}(r),r.wc=!1,e.next=25,mm(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Ay.apply(this,arguments)}function Ny(e,t,n){return Dy.apply(this,arguments)}function Dy(){return Dy=Yt(Wt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,p,m,y;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Gu(t),a=[],o=[],u=T(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.uc.get(c))||0===f.length){e.next=34;break}return e.next=11,Wv(i.localStore,bl(f[0]));case 11:l=e.sent,h=T(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.oc.get(v),e.next=20,xy(i,p);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,$v(i.localStore,c);case 36:return y=e.sent,e.next=39,Wv(i.localStore,y);case 39:return l=e.sent,e.next=42,Hm(i,Ly(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.rc.Ho(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Dy.apply(this,arguments)}function Ly(e){return vl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Oy(e){var t=Gu(e);return Gu(Gu(t.localStore).persistence).Si()}function Ry(e,t,n,r){return Py.apply(this,arguments)}function Py(){return Py=Yt(Wt().mark((function e(t,n,r,i){var a,o,u,s;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Gu(t)).wc){e.next=3;break}return e.abrupt("return",void Vu("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.uc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Zv(a.localStore,_l(o[0]));case 10:return u=e.sent,s=Af.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ys.EMPTY_BYTE_STRING),e.next=14,yy(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Xv(a.localStore,n,!0);case 17:return hy(a,n,i),e.abrupt("break",20);case 19:qu();case 20:case"end":return e.stop()}}),e)}))),Py.apply(this,arguments)}function My(e,t,n){return jy.apply(this,arguments)}function jy(){return jy=Yt(Wt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Fy(t)).wc){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.uc.has(u)){e.next=10;break}return Vu("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,$v(i.localStore,u);case 12:return s=e.sent,e.next=15,Wv(i.localStore,s);case 15:return c=e.sent,e.next=18,Hm(i,Ly(s),c.targetId,!1,c.resumeToken);case 18:jp(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,h=Wt().mark((function e(){var t;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.uc.has(t),!e.t0){e.next=5;break}return e.next=5,Xv(i.localStore,t,!1).then((function(){Fp(i.remoteStore,t),hy(i,t)})).catch(Ts);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),jy.apply(this,arguments)}function Fy(e){var t=Gu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=by.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ny.bind(null,t),t.rc.Ho=Dm.bind(null,t.eventManager),t.rc.gc=Lm.bind(null,t.eventManager),t}function Vy(e){var t=Gu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oy.bind(null,t),t}function By(e,t,n){var r=Gu(e);(function(){var e=Yt(Wt().mark((function e(t,n,r){var i,a,o,u,s;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Gu(e),r=Gf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Fm(i)),a=new jm(i,t.localStore,n.Tt),e.next=15,n.yc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Bu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.yc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,yy(t,s.Uu,void 0);case 31:return e.next=33,function(e,t){var n=Gu(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.qu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Uu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Uy=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=Ip(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return Bv(this.persistence,new Fv,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new Cv(Av.qs,this.Tt)}},{key:"Ic",value:function(e){return new vp}},{key:"terminate",value:function(){var e=Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),zy=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Pc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=Yt(Wt().mark((function e(t){var r=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(w(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Pc.initialize(this,t);case 4:return e.next=6,Vy(this.Pc.syncEngine);case 6:return e.next=8,em(this.Pc.remoteStore);case 8:return e.next=10,this.persistence.di((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ec",value:function(e){return Bv(this.persistence,new Fv,e.initialUser,this.Tt)}},{key:"Ac",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new iv(n,e.asyncQueue,t)}},{key:"Rc",value:function(e,t){var n=new Vs(t,this.persistence);return new Fs(e.asyncQueue,n)}},{key:"Tc",value:function(e){var t=Mv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qd.withCacheSize(this.cacheSizeBytes):qd.DEFAULT;return new Ov(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ep(),Sp(),this.Tt,this.sharedClientState,!!this.forceOwnership)}},{key:"Ic",value:function(e){return new vp}}]),n}(Uy),qy=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Pc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=Yt(Wt().mark((function e(t){var r,i=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(w(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Pc.syncEngine,e.t0=this.sharedClientState instanceof dp,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Br:Ty.bind(null,r),Lr:Ry.bind(null,r),qr:My.bind(null,r),Si:Oy.bind(null,r),Fr:Sy.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.di(function(){var e=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_y(i.Pc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){var t=Ep();if(!dp.C(t))throw new Hu(Qu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Mv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(zy),Ky=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=Yt(Wt().mark((function e(t,n){var r=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ty(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ky.bind(null,this.syncEngine),e.next=12,mm(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Tm}},{key:"createDatastore",value:function(e){var t,n=Ip(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new xp(t));return function(e,t,n,r){return new Np(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ty(o.syncEngine,e,0)},a=mp.C()?new mp:new pp,new Lp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Km(e,t,n,r,i,a);return o&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Yt(Wt().mark((function e(t){var n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gu(t),Vu("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,Pp(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Gy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Yt(Wt().mark((function r(){var i;return Wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Qy=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):Bu("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Hy=function(){function e(t,n){var r=this;d(this,e),this.Vc=t,this.Tt=n,this.metadata=new Wu,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.Mu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Mu))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Vc.cancel()}},{key:"getMetadata",value:function(){var e=Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yc",value:function(){var e=Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Dc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=Yt(Wt().mark((function e(){var t,n,r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Sc.decode(t),r=Number(n),isNaN(r)&&this.xc("length string (".concat(n,") is not valid number")),e.next=9,this.Nc(r);case 9:return i=e.sent,e.abrupt("return",new Pm(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"kc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Cc",value:function(){var e=Yt(Wt().mark((function e(){var t,n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.kc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.kc())<0&&this.xc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Yt(Wt().mark((function e(t){var n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.xc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Sc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xc",value:function(e){throw this.Vc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=Yt(Wt().mark((function e(){var t,n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Wy=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=Yt(Wt().mark((function e(t){var n,r=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Hu(Qu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Yt(Wt().mark((function e(t,n){var r,i,a,o,u,s;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),i=$f(r.Tt)+"/documents",a={documents:n.map((function(e){return Wf(r.Tt,e)}))},e.next=5,r.mo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=nh(r.Tt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ku(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new lf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Yt(Wt().mark((function e(){var t,n=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=vs.fromPath(t);n.mutations.push(new ff(r,n.precondition(r)))})),e.next=7,function(){var e=Yt(Wt().mark((function e(t,n){var r,i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t),i=$f(r.Tt)+"/documents",a={writes:n.map((function(e){return rh(r.Tt,e)}))},e.next=3,r.lo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qu();t=cs.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Hu(Qu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(cs.min())?Wl.exists(!1):Wl.updateTime(t):Wl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(cs.min()))throw new Hu(Qu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wl.updateTime(t)}return Wl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Xy=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new Tp(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.Mc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.ko.vo(Yt(Wt().mark((function t(){var n,r;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Wy(e.datastore),(r=e.Fc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Bc(t)}))}))})).catch((function(t){e.Bc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Fc",value:function(e){try{var t=this.updateFunction(e);return!Qs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Bc",value:function(e){var t=this;this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Lc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!df(t)}return!1}}]),e}(),Yy=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pu.UNAUTHENTICATED,this.clientId=is.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Vu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Yt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Hu(Qu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Wu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Yt(Wt().mark((function n(){var r;return Wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=bm(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Jy(e,t){return $y.apply(this,arguments)}function $y(){return $y=Yt(Wt().mark((function e(t,n){var r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Vu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Uv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),$y.apply(this,arguments)}function Zy(e,t){return eg.apply(this,arguments)}function eg(){return eg=Yt(Wt().mark((function e(t,n){var r,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tg(t);case 3:return r=e.sent,Vu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return vm(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return vm(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),eg.apply(this,arguments)}function tg(e){return ng.apply(this,arguments)}function ng(){return ng=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Vu("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Jy(t,new Uy);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ng.apply(this,arguments)}function rg(e){return ig.apply(this,arguments)}function ig(){return ig=Yt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Vu("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Zy(t,new Ky);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ig.apply(this,arguments)}function ag(e){return tg(e).then((function(e){return e.persistence}))}function og(e){return tg(e).then((function(e){return e.localStore}))}function ug(e){return rg(e).then((function(e){return e.remoteStore}))}function sg(e){return rg(e).then((function(e){return e.syncEngine}))}function cg(e){return rg(e).then((function(e){return e.datastore}))}function lg(e){return fg.apply(this,arguments)}function fg(){return fg=Yt(Wt().mark((function e(t){var n,r;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Gm.bind(null,n.syncEngine),r.onUnlisten=Xm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),fg.apply(this,arguments)}function hg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wu;return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function i(){return Wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Qy({next:function(a){t.enqueueAndForget((function(){return Am(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Hu(Qu.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Hu(Qu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Rm(pl(n.path),a,{includeMetadataChanges:!0,$u:!0});return Cm(e,o)},i.next=3,lg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function dg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wu;return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function i(){return Wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Qy({next:function(n){t.enqueueAndForget((function(){return Am(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Hu(Qu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Rm(n,a,{includeMetadataChanges:!0,$u:!0});return Cm(e,o)},i.next=3,lg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var vg=new Map;function pg(e,t,n){if(!n)throw new Hu(Qu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function mg(e,t,n,r){if(!0===t&&!0===r)throw new Hu(Qu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function yg(e){if(!vs.isDocumentKey(e))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function gg(e){if(vs.isDocumentKey(e))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function kg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":qu()}function wg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hu(Qu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=kg(e);throw new Hu(Qu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function bg(e,t){if(t<=0)throw new Hu(Qu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var xg=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Hu(Qu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hu(Qu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,mg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Eg=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xg({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new Hu(Qu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Hu(Qu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Yu;switch(e.type){case"gapi":var t=e.client;return new es(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hu(Qu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=vg.get(e);t&&(Vu("ComponentProvider","Removing Datastore"),vg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Sg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=wg(e,Eg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Uu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Pu.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_t(JSON.stringify({alg:"none",type:"JWT"})),_t(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Hu(Qu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Pu(s)}e._authCredentials=new Ju(new Xu(o,u))}}var Ig=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Cg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Tg=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Cg=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,pl(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ig(this.firestore,null,new vs(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Tg);function _g(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ht(e),pg("collection","path",t),e instanceof Eg){var a=fs.fromString.apply(fs,[t].concat(r));return gg(a),new Cg(e,null,a)}if(!(e instanceof Ig||e instanceof Cg))throw new Hu(Qu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fs.fromString.apply(fs,[t].concat(r)));return gg(o),new Cg(e.firestore,null,o)}function Ag(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ht(e),1===arguments.length&&(t=is.R()),pg("doc","path",t),e instanceof Eg){var a=fs.fromString.apply(fs,[t].concat(r));return yg(a),new Ig(e,null,new vs(a))}if(!(e instanceof Ig||e instanceof Cg))throw new Hu(Qu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fs.fromString.apply(fs,[t].concat(r)));return yg(o),new Ig(e.firestore,e instanceof Cg?e.converter:null,new vs(o))}function Ng(e,t){return e=Ht(e),t=Ht(t),(e instanceof Ig||e instanceof Cg)&&(t instanceof Ig||t instanceof Cg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Dg(e,t){return e=Ht(e),t=Ht(t),e instanceof Tg&&t instanceof Tg&&e.firestore===t.firestore&&Sl(e._query,t._query)&&e.converter===t.converter}var Lg=function(){function e(){var t=this;d(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Tp(this,"async_queue_retry"),this.Hc=function(){var e=Sp();e&&Vu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=Sp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return y(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=Sp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new Wu;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=Yt(Wt().mark((function e(){var t=this;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Os(e.t0)){e.next=12;break}throw e.t0;case 12:Vu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Bu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var i=wm.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(i),i}},{key:"Jc",value:function(){this.Qc&&qu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=Yt(Wt().mark((function e(){var t;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=T(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.Gc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();function Og(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Rg=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Wu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Pg=function(e){k(n,e);var t=E(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Lg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||jg(this),this._firestoreClient.terminate()}}]),n}(Eg);function Mg(e){return e._firestoreClient||jg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function jg(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Us(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Yy(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Fg(e,t,n){var r=new Wu;return e.asyncQueue.enqueue(Yt(Wt().mark((function i(){var a;return Wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Jy(e,n);case 3:return i.next=5,Zy(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Qu.FAILED_PRECONDITION||e.code===Qu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Uu("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Vg(e){return function(e){return e.asyncQueue.enqueue(Yt(Wt().mark((function t(){var n,r;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ag(e);case 2:return n=t.sent,t.next=5,ug(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Gu(e);return t.mu.delete(0),Op(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Mg(e=wg(e,Pg)))}function Bg(e){return function(e){return e.asyncQueue.enqueue(Yt(Wt().mark((function t(){var n,r;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ag(e);case 2:return n=t.sent,t.next=5,ug(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Yt(Wt().mark((function e(t){var n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gu(t)).mu.add(0),e.next=4,Pp(n);case 4:n.pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Mg(e=wg(e,Pg)))}function Ug(e,t){var n=Mg(e=wg(e,Pg)),r=new Rg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Hy(e,t)}(function(e,t){if(e instanceof Uint8Array)return Gy(e,t);if(e instanceof ArrayBuffer)return Gy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Ip(t));e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=By,t.next=3,sg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function zg(e,t){return function(e,t){return e.asyncQueue.enqueue(Yt(Wt().mark((function n(){return Wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Gu(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$s.getNamedQuery(e,t)}))},n.next=3,og(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Mg(e=wg(e,Pg)),t).then((function(t){return t?new Tg(e,null,t.query):null}))}function qg(e){if(e._initialized||e._terminated)throw new Hu(Qu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Kg=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ys.fromBase64String(t))}catch(t){throw new Hu(Qu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ys.fromUint8Array(t))}}]),e}(),Gg=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ds(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Qg=y((function e(t){d(this,e),this._methodName=t})),Hg=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Hu(Qu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hu(Qu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return as(this._lat,e._lat)||as(this._long,e._long)}}]),e}(),Wg=/^__.*__$/,Xg=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new rf(e,this.data,this.fieldMask,t,this.fieldTransforms):new nf(e,this.data,t,this.fieldTransforms)}}]),e}(),Yg=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new rf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Jg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qu()}}var $g=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return gk(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(Jg(this.ra)&&Wg.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),Zg=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||Ip(t)}return y(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $g({ra:e,methodName:t,_a:n,path:ds.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function ek(e){var t=e._freezeSettings(),n=Ip(e._databaseId);return new Zg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tk(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wa(a.merge||a.mergeFields?2:0,t,n,i);vk("Data must be an object, but it was:",o,r);var u,s,c=hk(r,o);if(a.merge)u=new tl(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=T(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=pk(t,l.value,n);if(!o.contains(d))throw new Hu(Qu.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));kk(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new tl(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Xg(new nl(c),u,s)}var nk=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ra)throw 1===e.ra?e.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Qg);function rk(e,t,n){return new $g({ra:3,_a:t.settings._a,methodName:e._methodName,ca:n},t.databaseId,t.Tt,t.ignoreUndefinedProperties)}var ik=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new Ql(e.path,new Fl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Qg),ak=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ma=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=rk(this,e,!0),n=this.ma.map((function(e){return fk(e,t)})),r=new Vl(n);return new Ql(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Qg),ok=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ma=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=rk(this,e,!0),n=this.ma.map((function(e){return fk(e,t)})),r=new Ul(n);return new Ql(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Qg),uk=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ga=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new ql(e.Tt,Ol(e.Tt,this.ga));return new Ql(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Qg);function sk(e,t,n,r){var i=e.wa(1,t,n);vk("Data must be an object, but it was:",i,r);var a=[],o=nl.empty();Ks(r,(function(e,r){var u=yk(t,e,n);r=Ht(r);var s=i.ha(u);if(r instanceof nk)a.push(u);else{var c=fk(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new tl(a);return new Yg(o,u,i.fieldTransforms)}function ck(e,t,n,r,i,a){var o=e.wa(1,t,n),u=[pk(t,r,n)],s=[i];if(a.length%2!=0)throw new Hu(Qu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(pk(t,a[c])),s.push(a[c+1]);for(var l=[],f=nl.empty(),h=u.length-1;h>=0;--h)if(!kk(l,u[h])){var d=u[h],v=s[h];v=Ht(v);var p=o.ha(d);if(v instanceof nk)l.push(d);else{var m=fk(v,p);null!=m&&(l.push(d),f.set(d,m))}}var y=new tl(l);return new Yg(f,y,o.fieldTransforms)}function lk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return fk(n,e.wa(r?4:3,t))}function fk(e,t){if(dk(e=Ht(e)))return vk("Unsupported field value:",t,e),hk(e,t);if(e instanceof Qg)return function(e,t){if(!Jg(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=fk(n.value,t.la(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ht(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ol(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ss.fromDate(e);return{timestampValue:zf(t.Tt,n)}}if(e instanceof ss){var r=new ss(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zf(t.Tt,r)}}if(e instanceof Hg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Kg)return{bytesValue:qf(t.Tt,e._byteString)};if(e instanceof Ig){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Qf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(kg(e)))}(e,t)}function hk(e,t){var n={};return Gs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ks(e,(function(e,r){var i=fk(r,t.ua(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function dk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ss||e instanceof Hg||e instanceof Kg||e instanceof Ig||e instanceof Qg)}function vk(e,t,n){if(!dk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=kg(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}function pk(e,t,n){if((t=Ht(t))instanceof Gg)return t._internalPath;if("string"==typeof t)return yk(e,t);throw gk("Field path arguments must be of type string or ",e,!1,void 0,n)}var mk=new RegExp("[~\\*/\\[\\]]");function yk(e,t,n){if(t.search(mk)>=0)throw gk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(Gg,h(t.split(".")))._internalPath}catch(r){throw gk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function gk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Hu(Qu.INVALID_ARGUMENT,u+e+s)}function kk(e,t){return e.some((function(e){return e.isEqual(t)}))}var wk=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Ig(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new bk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(xk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),bk=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return _r(w(n.prototype),"data",this).call(this)}}]),n}(wk);function xk(e,t){return"string"==typeof t?yk(e,t):t instanceof Gg?t._internalPath:t._delegate._internalPath}function Ek(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hu(Qu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sk=y((function e(){d(this,e)})),Ik=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(Sk);function Tk(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Sk&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof _k})).length,n=e.filter((function(e){return e instanceof Ck})).length;if(t>1||t>0&&n>0)throw new Hu(Qu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=T(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Ck=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Bk(e._query,t),new Tg(e.firestore,e.converter,xl(e._query,t))}},{key:"_parse",value:function(e){var t=ek(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Vk(o,a);var s,c=[],l=T(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Fk(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Fk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Vk(o,a),u=lk(n,"where",o,"in"===a||"not-in"===a);return Ac.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ik);var _k=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Nc.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=T(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Bk(r,a),r=xl(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Tg(e.firestore,e.converter,xl(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Sk);var Ak=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Hc(t,n);return function(e,t){if(null===yl(e)){var n=gl(e);null!==n&&Uk(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Tg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new dl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ik);var Nk=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new Tg(e.firestore,e.converter,El(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ik);var Dk=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=jk(e,this.type,this._docOrFields,this._inclusive);return new Tg(e.firestore,e.converter,function(e,t){return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ik);function Lk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dk._create("startAt",t,!0)}function Ok(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dk._create("startAfter",t,!1)}var Rk=function(e){k(n,e);var t=E(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=jk(e,this.type,this._docOrFields,this._inclusive);return new Tg(e.firestore,e.converter,function(e,t){return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ik);function Pk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Rk._create("endBefore",t,!1)}function Mk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Rk._create("endAt",t,!0)}function jk(e,t,n,r){if(n[0]=Ht(n[0]),n[0]instanceof wk)return function(e,t,n,r,i){if(!r)throw new Hu(Qu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=T(wl(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(dc(t,r.key));else{var c=r.data.field(s.field);if(tc(c))throw new Hu(Qu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ic(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ek(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Hu(Qu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!kl(e)&&-1!==c.indexOf("/"))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(fs.fromString(c));if(!vs.isDocumentKey(l))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new vs(l);u.push(dc(t,f))}else{var h=lk(n,r,c);u.push(h)}}return new Ic(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Fk(e,t,n){if("string"==typeof(n=Ht(n))){if(""===n)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kl(t)&&-1!==n.indexOf("/"))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(fs.fromString(n));if(!vs.isDocumentKey(r))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return dc(e,new vs(r))}if(n instanceof Ig)return dc(e,n._key);throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(kg(n),"."))}function Vk(e,t){if(!Array.isArray(e)||0===e.length)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Bk(e,t){if(t.isInequality()){var n=gl(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=yl(e);null!==i&&Uk(e,r,i)}var a=function(e,t){var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var i,a=T(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Hu(Qu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hu(Qu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Uk(e,t,n){if(!n.isEqual(t))throw new Hu(Qu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var zk=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qu()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ks(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Hg(Zs(e.latitude),Zs(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=nc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$s(e);return new ss(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=fs.fromString(e);Ku(mh(n));var r=new zs(n.get(1),n.get(3)),i=new vs(n.popFirst(5));return r.isEqual(t)||Bu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function qk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Kk=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Kg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ig(this.firestore,null,t)}}]),n}(zk);var Gk=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Qk=function(e){k(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return _r(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Hk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(xk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(wk),Hk=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _r(w(n.prototype),"data",this).call(this,e)}}]),n}(Qk),Wk=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gk(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Hk(n._firestore,n._userDataWriter,r.key,r,new Gk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hu(Qu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Hk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Hk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Xk(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Xk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qu()}}function Yk(e,t){return e instanceof Qk&&t instanceof Qk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Wk&&t instanceof Wk&&e._firestore===t._firestore&&Dg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Jk=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Kg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ig(this.firestore,null,t)}}]),n}(zk);function $k(e){e=wg(e,Ig);var t=wg(e.firestore,Pg),n=Mg(t),r=new Jk(t);return function(e,t){var n=new Wu;return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function r(){return Wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Yt(Wt().mark((function e(t,n,r){var i,a;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Gu(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Hu(Qu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=bm(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,og(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Qk(t,r,e._key,n,new Gk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Zk(e){e=wg(e,Tg);var t=wg(e.firestore,Pg),n=Mg(t),r=new Jk(t);return function(e,t){var n=new Wu;return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function r(){return Wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Yt(Wt().mark((function e(t,n,r){var i,a,o,u,s;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jv(t,n,!0);case 3:i=e.sent,a=new Um(n,i.Yi),o=a.Hu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=bm(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,og(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Wk(t,r,e,n)}))}function ew(e,t,n){e=wg(e,Ig);var r=wg(e.firestore,Pg),i=qk(e.converter,t,n);return iw(r,[tk(ek(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Wl.none())])}function tw(e,t,n){e=wg(e,Ig);for(var r=wg(e.firestore,Pg),i=ek(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return iw(r,[("string"==typeof(t=Ht(t))||t instanceof Gg?ck(i,"updateDoc",e._key,t,n,o):sk(i,"updateDoc",e._key,t)).toMutation(e._key,Wl.exists(!0))])}function nw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ht(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Og(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Og(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Ig)l=wg(e.firestore,Pg),f=pl(e._key.path),c={next:function(t){n[s]&&n[s](aw(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=wg(e,Tg);l=wg(v.firestore,Pg),f=v._query;var p=new Jk(l);c={next:function(e){n[s]&&n[s](new Wk(l,p,v,e))},error:n[s+1],complete:n[s+2]},Ek(e._query)}return function(e,t,n,r){var i=new Qy(r),a=new Rm(t,i,n);return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Cm,t.next=3,lg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Am,t.next=3,lg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Mg(l),f,h,c)}function rw(e,t){return function(e,t){var n=new Qy(t);return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gu(e).vu.add(t),t.next()},t.next=3,lg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gu(e).vu.delete(t)},t.next=3,lg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Mg(e=wg(e,Pg)),Og(t)?t:{next:t})}function iw(e,t){return function(e,t){var n=new Wu;return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function r(){return Wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Jm,r.next=3,sg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Mg(e),t)}function aw(e,t,n){var r=n.docs.get(t._key),i=new Jk(e);return new Qk(e,i,t._key,r,new Gk(n.hasPendingWrites,n.fromCache),t.converter)}var ow={maxAttempts:5},uw=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ek(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=sw(e,this._firestore),i=qk(r.converter,t,n),a=tk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Wl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=sw(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ht(t))||t instanceof Gg?ck(this._dataReader,"WriteBatch.update",i._key,t,n,o):sk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Wl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=sw(e,this._firestore);return this._mutations=this._mutations.concat(new lf(t._key,Wl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Hu(Qu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function sw(e,t){if((e=Ht(e)).firestore!==t)throw new Hu(Qu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var cw=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=sw(e,this._firestore),i=new Jk(this._firestore);return _r(w(n.prototype),"get",this).call(this,e).then((function(e){return new Qk(t._firestore,i,r._key,e._document,new Gk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=ek(t)}return y(e,[{key:"get",value:function(e){var t=this,n=sw(e,this._firestore),r=new Kk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return qu();var i=e[0];if(i.isFoundDocument())return new wk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new wk(t._firestore,r,n._key,null,n.converter);throw qu()}))}},{key:"set",value:function(e,t,n){var r=sw(e,this._firestore),i=qk(r.converter,t,n),a=tk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=sw(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ht(t))||t instanceof Gg?ck(this._dataReader,"Transaction.update",i._key,t,n,o):sk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=sw(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function lw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ak("arrayUnion",t)}function fw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ok("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mu=e}(Qn),Vn(new Jt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Pg(new $u(e.getProvider("auth-internal")),new ns(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hu(Qu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),$n(Ru,"3.9.0",e),$n(Ru,"3.9.0","esm2017")}();var hw="@firebase/firestore-compat",dw="0.3.5";function vw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Hu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function pw(){if("undefined"===typeof Uint8Array)throw new Hu("unimplemented","Uint8Arrays are not available in this environment.")}function mw(){if("undefined"==typeof atob)throw new Hu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var yw=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return mw(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return pw(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return mw(),new e(Kg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return pw(),new e(Kg.fromUint8Array(t))}}]),e}();function gw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var kw=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){qg(e=wg(e,Pg));var n=Mg(e),r=e._freezeSettings(),i=new Ky;return Fg(n,i,new zy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){qg(e=wg(e,Pg));var t=Mg(e),n=e._freezeSettings(),r=new Ky;return Fg(t,r,new qy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Hu(Qu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Wu;return e._queue.enqueueAndForgetEvenWhileRestricted(Yt(Wt().mark((function n(){return Wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Yt(Wt().mark((function e(t){var n;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ns.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ns.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Mv(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ww=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof zs||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Uu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Sg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Vg(this._delegate)}},{key:"disableNetwork",value:function(){return Bg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&mg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Wu;return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function n(){return Wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=sy,n.next=3,sg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Mg(e=wg(e,Pg)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return rw(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Hu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Rw(this,_g(this._delegate,e))}catch(t){throw Tw(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Iw(this,Ag(this._delegate,e))}catch(t){throw Tw(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Dw(this,function(e,t){if(e=wg(e,Eg),pg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Hu(Qu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Tg(e,null,function(e){return new dl(fs.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Tw(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=wg(e,Pg);var r=Object.assign(Object.assign({},ow),n);return function(e){if(e.maxAttempts<1)throw new Hu(Qu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Wu;return e.asyncQueue.enqueueAndForget(Yt(Wt().mark((function i(){var a;return Wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,cg(e);case 2:a=i.sent,new Xy(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Mg(e),(function(n){return t(new cw(e,n))}),r)}(this._delegate,(function(n){return e(new xw(t,n))}))}},{key:"batch",value:function(){var e=this;return Mg(this._delegate),new Ew(new uw(this._delegate,(function(t){return iw(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Ug(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return zg(this._delegate,e).then((function(e){return e?new Dw(t,e):null}))}}]),e}(),bw=function(e){k(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new yw(new Kg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Iw.forKey(t,this.firestore,null)}}]),n}(zk);var xw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new bw(t)}return y(e,[{key:"get",value:function(e){var t=this,n=Pw(e);return this._delegate.get(n).then((function(e){return new Aw(t._firestore,new Qk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Pw(e);return n?(vw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Pw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Pw(e);return this._delegate.delete(t),this}}]),e}(),Ew=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=Pw(e);return n?(vw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Pw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Pw(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Sw=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new Hk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Nw(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new bw(t),n),i.set(n,a)),a}}]),e}();Sw.INSTANCES=new WeakMap;var Iw=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bw(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Rw(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Rw(this.firestore,_g(this._delegate,e))}catch(t){throw Tw(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ht(e))instanceof Ig&&Ng(this._delegate,e)}},{key:"set",value:function(e,t){t=vw("DocumentReference.set",t);try{return t?ew(this._delegate,e,t):ew(this._delegate,e)}catch(n){throw Tw(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tw(this._delegate,e):tw.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Tw(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return iw(wg(e.firestore,Pg),[new lf(e._key,Wl.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Cw(n),a=_w(n,(function(t){return new Aw(e.firestore,new Qk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return nw(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?$k(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=wg(e,Ig);var t=wg(e.firestore,Pg);return hg(Mg(t),e._key,{source:"server"}).then((function(n){return aw(t,e,n)}))}(this._delegate):function(e){e=wg(e,Ig);var t=wg(e.firestore,Pg);return hg(Mg(t),e._key).then((function(n){return aw(t,e,n)}))}(this._delegate),t.then((function(e){return new Aw(n.firestore,new Qk(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Sw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Hu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Ig(n._delegate,r,new vs(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Ig(n._delegate,r,t))}}]),e}();function Tw(e,t,n){return e.message=e.message.replace(t,n),e}function Cw(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!gw(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function _w(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=gw(e[0])?e[0]:gw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Aw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new Iw(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Yk(this._delegate,e._delegate)}}]),e}(),Nw=function(e){k(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||qu()}(void 0!==t),t}}]),n}(Aw),Dw=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bw(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Tk(this._delegate,function(e,t,n){var r=t,i=xk("where",e);return Ck._create(i,r,n)}(t,n,r)))}catch(i){throw Tw(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Tk(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xk("orderBy",e);return Ak._create(n,t)}(t,n)))}catch(r){throw Tw(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Tk(this._delegate,function(e){return bg("limit",e),Nk._create("limit",e,"F")}(t)))}catch(n){throw Tw(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Tk(this._delegate,function(e){return bg("limitToLast",e),Nk._create("limitToLast",e,"L")}(t)))}catch(n){throw Tw(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Tk(this._delegate,Lk.apply(void 0,arguments)))}catch(t){throw Tw(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Tk(this._delegate,Ok.apply(void 0,arguments)))}catch(t){throw Tw(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Tk(this._delegate,Pk.apply(void 0,arguments)))}catch(t){throw Tw(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Tk(this._delegate,Mk.apply(void 0,arguments)))}catch(t){throw Tw(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Dg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Zk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=wg(e,Tg);var t=wg(e.firestore,Pg),n=Mg(t),r=new Jk(t);return dg(n,e._query,{source:"server"}).then((function(n){return new Wk(t,r,e,n)}))}(this._delegate):function(e){e=wg(e,Tg);var t=wg(e.firestore,Pg),n=Mg(t),r=new Jk(t);return Ek(e._query),dg(n,e._query).then((function(n){return new Wk(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Ow(n.firestore,new Wk(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Cw(n),a=_w(n,(function(t){return new Ow(e.firestore,new Wk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return nw(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Sw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Lw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Nw(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Ow=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new Dw(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Nw(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Lw(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Nw(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Yk(this._delegate,e._delegate)}}]),e}(),Rw=function(e){k(n,e);var t=E(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Iw(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Iw(this.firestore,void 0===e?Ag(this._delegate):Ag(this._delegate,e))}catch(t){throw Tw(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=wg(e.firestore,Pg),r=Ag(e),i=qk(e.converter,t);return iw(n,[tk(ek(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Wl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Iw(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Ng(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Sw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Dw);function Pw(e){return wg(e,Ig)}var Mw,jw=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(Gg,n)}return y(e,[{key:"isEqual",value:function(e){return(e=Ht(e))instanceof Gg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(ds.keyField().canonicalString())}}]),e}(),Fw=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new ik("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new nk("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=lw.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=fw.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new uk("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Vw={Firestore:ww,GeoPoint:Hg,Timestamp:ss,Blob:yw,Transaction:xw,WriteBatch:Ew,DocumentReference:Iw,DocumentSnapshot:Aw,Query:Dw,QueryDocumentSnapshot:Nw,QuerySnapshot:Ow,CollectionReference:Rw,FieldPath:jw,FieldValue:Fw,setLogLevel:function(e){!function(e){ju.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function Bw(){var e=(0,r.useContext)(bt),t=e.isNewUser,n=e.setIsNewUser,i=e.setChatList,a=e.updateMainChatId;return{postNewChat:function(e){var r={title:e||null,createdAt:Cr.firestore.Timestamp.now(),archived:!1};return fetch("".concat(gt,"/chatMeta.json"),{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){!function(e){fetch("".concat(gt,"/chatMeta/").concat(e,".json")).then((function(e){return e.json()})).then((function(t){var n=yt({id:e},t);i((function(e){return e.concat(n)})),a(e)}))}(e.name),t&&n(!1)}))}}}function Uw(e){var t=(0,r.useContext)(We).setIsFlapOpen,n=(0,r.useRef)(),i=Bw().postNewChat,a=xt(),o=(0,r.useContext)(bt),u=o.isPageLoading,s=o.isNewUser;function c(e){if(!u){e.preventDefault();var r=n.current.value;i(r).then((function(){n.current.value=""})),a.width<480&&t(!1)}}return(0,qe.jsxs)("form",{onSubmit:c,className:"flex h-28 w-full flex-none  flex-col items-center justify-center px-3 \n      ".concat(e.nav&&(u||s)&&"pointer-events-none opacity-50","\n      ").concat(e.welcome?"gap-2":"gap-1"),children:[(0,qe.jsx)("label",{htmlFor:"title",className:"text-lg font-bold text-petal",children:e.welcome?"Start your first chat!":"New Chat"}),(0,qe.jsx)("input",{id:"title",type:"text",maxLength:"50",ref:n,placeholder:"+ chat title",className:"w-full rounded-full border-2 border-blossom-300 py-1 text-vincent-800 placeholder:text-vincent-700 hover:border-blossom-500 hover:placeholder:text-vincent-400 focus:border-blossom-500 f   ocus:ring-0 max-w-md  ".concat(e.welcome?"text-center":"text-left")}),(0,qe.jsx)("input",{type:"submit",hidden:!0}),(0,qe.jsxs)("div",{children:[(0,qe.jsx)(lt,{task:"chatCancel",onClick:function(e){e.preventDefault(),n.current.value=""},addButtonClass:"h-6 w-6"}),(0,qe.jsx)(lt,{task:"chatSubmit",onClick:c,addButtonClass:"h-6 w-6"})]})]})}function zw(){var e=(0,r.useContext)(bt),t=e.isPageLoading,n=e.isNewUser,i=ft().handleNavClose,a=l((0,r.useState)(!0),2),o=a[0],u=a[1];return(0,qe.jsxs)("nav",{className:"pass-overflow blush-frame relative flex flex-col rounded-l-none bg-gradient-to-br from-vincent-500/80 via-vincent-400 to-vincent-700 ",children:[(0,qe.jsxs)("div",{className:"flex flex-row items-center justify-between p-2 pl-3 ",children:[(0,qe.jsx)("div",{className:"text-lg font-bold leading-none text-petal ".concat((t||n)&&"text-opacity-40"),children:o?"Chat history":"All chats"}),(0,qe.jsx)(lt,{onClick:i,task:"navClose",addButtonClass:"lg:hidden h-6 w-6"})]}),(0,qe.jsx)("hr",{className:"blush-separator"}),(0,qe.jsx)(St,{isActiveOnly:o,setIsActiveOnly:u}),(0,qe.jsx)("hr",{className:"blush-separator"}),(0,qe.jsx)(Uw,{nav:!0})]})}(function(e,t){e.INTERNAL.registerComponent(new Jt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Vw)))})(Mw=Cr,(function(e,t){return new ww(e,t,new kw)})),Mw.registerVersion(hw,dw);var qw=(0,r.createContext)({isMessageLoading:!1,messageList:[],setMessageList:function(){}});function Kw(e){var t=(0,r.useContext)(bt).mainChatId,n=l((0,r.useState)(!1),2),i=n[0],a=n[1],o=l((0,r.useState)([]),2),u=o[0],s=o[1];(0,r.useEffect)((function(){if(t){a(!0);var e=new AbortController;return fetch("".concat(gt,"/messages/").concat(t,".json"),{signal:e.signal}).then((function(e){if(!e.ok)throw new Error("Message list response not ok");return e.json()})).then((function(e){var t=[];for(var n in e){var r=yt({id:n},e[n]);t.push(r)}s(t),a(!1)})).catch((function(e){console.log("marker"),console.log(e),a(!1)})),function(){e.abort()}}}),[t]);var c={isMessageLoading:i,messageList:u,setMessageList:s};return(0,qe.jsx)(qw.Provider,{value:c,children:e.children})}var Gw=qw,Qw=function(e){return e.Mouse="mouse",e.Touch="touch",e.Pointer="pointer",e}(Qw||{}),Hw=function(e){return e.CancelledByMovement="cancelled-by-movement",e.CancelledByRelease="cancelled-by-release",e.CancelledOutsideElement="cancelled-outside-element",e}(Hw||{}),Ww=function(){var e,t;return null!==(e=null===(t=window)||void 0===t?void 0:t.PointerEvent)&&void 0!==e?e:null},Xw=function(){var e,t;return null!==(e=null===(t=window)||void 0===t?void 0:t.TouchEvent)&&void 0!==e?e:null};function Yw(e){var t=e.nativeEvent;if(!t)return!1;var n=Xw();return n&&t instanceof n||"touches"in t}function Jw(e){var t=Ww();return e.nativeEvent instanceof MouseEvent&&!(t&&e.nativeEvent instanceof t)}function $w(e){var t=e.nativeEvent;if(!t)return!1;var n=Ww();return n&&t instanceof n||"pointerId"in t}function Zw(e){return Jw(e)||Yw(e)||$w(e)}function eb(e){return Yw(e)?{x:e.touches[0].pageX,y:e.touches[0].pageY}:Jw(e)||$w(e)?{x:e.pageX,y:e.pageY}:null}function tb(e){var t=e.menuItems,n=e.setShowMenu,i=e.setShowArchiveModal,a=e.contextClass,o=(0,r.useRef)();function u(e){o.current&&!o.current.contains(e.target)&&n(!1)}return(0,r.useEffect)((function(){return window.addEventListener("mousedown",u),function(){window.removeEventListener("mousedown",u)}}),[]),(0,qe.jsx)("div",{ref:o,className:a,children:t.map((function(e,t){var r=e.icon;return(0,qe.jsx)("button",{tabIndex:"0",className:"",onClick:function(){return function(e){n(!1),"edit"===e.type&&e.actionLayout?e.actionLayout():"archive"===e.type&&i(!0)}(e)},children:(0,qe.jsx)(r,{className:"menu-icon"})},t)}))})}function nb(e){var t=e.setShowArchiveModal,n=e.onConfirm,r=e.type;return(0,qe.jsx)("div",{className:"flex-col-center fixed left-0 top-0 z-20 h-full w-full bg-black/60",children:(0,qe.jsxs)("div",{className:"m-auto h-fit w-fit rounded-3xl border-4 border-blossom-500 bg-petal px-8 py-4",children:[(0,qe.jsxs)("p",{className:"text-md font-bold text-blossom-600",children:["Please confirm to archive this ",r,":"]}),(0,qe.jsxs)("div",{className:"flex flex-row justify-center gap-2 pt-2",children:[(0,qe.jsx)("button",{onClick:n,className:"title-button",children:"Confirm"}),(0,qe.jsx)("button",{onClick:function(){t(!1)},className:"title-button",children:"Cancel"})]})]})})}function rb(e){var t=e.menuItems,n=e.showEditMode,i=e.contextClass,a=e.children,o=l((0,r.useState)(!1),2),u=o[0],s=o[1],c=l((0,r.useState)(!1),2),f=c[0],h=c[1];var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.threshold,i=void 0===n?400:n,a=t.captureEvent,o=void 0!==a&&a,u=t.detect,s=void 0===u?Qw.Pointer:u,c=t.cancelOnMovement,l=void 0!==c&&c,f=t.cancelOutsideElement,h=void 0===f||f,d=t.filterEvents,v=t.onStart,p=t.onMove,m=t.onFinish,y=t.onCancel,g=(0,r.useRef)(!1),k=(0,r.useRef)(!1),w=(0,r.useRef)(),b=(0,r.useRef)(),x=(0,r.useRef)(),E=(0,r.useRef)(e),S=(0,r.useRef)(null),I=(0,r.useCallback)((function(e){k.current||Zw(e)&&(void 0!==d&&!d(e)||(o&&e.persist(),null!==v&&void 0!==v&&v(e,{context:w.current}),S.current=eb(e),k.current=!0,b.current=e.currentTarget,x.current=setTimeout((function(){E.current&&(E.current(e,{context:w.current}),g.current=!0)}),i)))}),[o,d,v,i]),T=(0,r.useCallback)((function(e,t){Zw(e)&&k.current&&(S.current=null,o&&e.persist(),g.current?null===m||void 0===m||m(e,{context:w.current}):k.current&&(null===y||void 0===y||y(e,{context:w.current,reason:null!==t&&void 0!==t?t:Hw.CancelledByRelease})),g.current=!1,k.current=!1,void 0!==x.current&&clearTimeout(x.current))}),[o,m,y]),C=(0,r.useCallback)((function(e){if(null!==p&&void 0!==p&&p(e,{context:w.current}),l&&S.current){var t=eb(e);if(t){var n=!0===l?25:l,r={x:Math.abs(t.x-S.current.x),y:Math.abs(t.y-S.current.y)};(r.x>n||r.y>n)&&T(e,Hw.CancelledByMovement)}}}),[T,l,p]);return(0,r.useEffect)((function(){function e(e){var t=function(e){return{target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:function(){}}}(e);T(t)}if(window)return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),window.addEventListener("pointerup",e),function(){window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),window.removeEventListener("pointerup",e)}}),[T]),(0,r.useEffect)((function(){return function(){void 0!==x.current&&clearTimeout(x.current)}}),[]),(0,r.useEffect)((function(){E.current=e}),[e]),(0,r.useCallback)((function(t){if(w.current=t,null===e)return{};switch(s){case Qw.Mouse:var n={onMouseDown:I,onMouseMove:C,onMouseUp:T};return h&&(n.onMouseLeave=function(e){T(e,Hw.CancelledOutsideElement)}),n;case Qw.Touch:return{onTouchStart:I,onTouchMove:C,onTouchEnd:T};case Qw.Pointer:var r={onPointerDown:I,onPointerMove:C,onPointerUp:T};return h&&(r.onPointerLeave=function(e){return T(e,Hw.CancelledOutsideElement)}),r}}),[e,T,h,s,C,I])}((function(){s(!0)}));return(0,qe.jsxs)("div",yt(yt({},d()),{},{onContextMenu:function(e){e&&e.preventDefault(),s(!0)},onKeyDown:function(e){e.shiftKey&&"F10"===e.key||"ContextMenu"===e.key?(e.preventDefault(),s(!0)):"Enter"!==e.key||f||n||s(!0)},className:"relative inline-block",children:[a,u&&(0,qe.jsx)(tb,{menuItems:t,setShowMenu:s,setShowArchiveModal:h,contextClass:i}),f&&(0,qe.jsx)(nb,{setShowArchiveModal:h,setShowMenu:s,onConfirm:function(){t.find((function(e){return"archive"===e.type})).confirmationFunction(),h(!1)},type:"chat"})]}))}function ib(e){var t=e.textareaRef,n=e.message,i=e.confirmEdit,a=e.setShowEditMode;return(0,r.useEffect)((function(){t.current.focus()}),[t]),(0,qe.jsxs)("div",{className:"w-full flex-col-center  justify-center gap-1 text-sm",children:[(0,qe.jsx)("textarea",{type:"text",ref:t,maxLength:"50",defaultValue:n,placeholder:"Enter your message",className:" w-full  border  border-vincent-700 bg-petal text-sm caret-vincent-800"}),(0,qe.jsxs)("div",{className:"flex flex=row gap-2 pt-1",children:[(0,qe.jsx)("button",{className:"title-button bg-petal",onClick:i,children:"Confirm"}),(0,qe.jsx)("button",{className:"title-button bg-petal",onClick:function(){a(!1)},children:"Cancel"})]})]})}function ab(e){var t=e.id,n=e.message,i=l((0,r.useState)(!1),2),a=(i[0],i[1],l((0,r.useState)(!1),2)),o=a[0],u=a[1],s=l((0,r.useState)(!1),2),c=(s[0],s[1],(0,r.useRef)());return o?(0,qe.jsx)(ib,{textareaRef:c,message:n,confirmEdit:function(){u(!1)},setShowEditMode:u}):(0,qe.jsx)("div",{className:"flex w-fit max-w-full  flex-col break-words rounded-r-3xl bg-petal/80 py-2 pl-2 pr-4 leading-tight",children:n},t)}function ob(){var e=(0,r.useContext)(bt),t=e.isPageLoading,n=e.isNewUser,i=l((0,r.useState)(null),2),a=i[0],o=i[1],u=(0,r.useContext)(Gw).messageList,s=(0,r.useRef)();return(0,r.useEffect)((function(){s.current&&(s.current.scrollTop=s.current.scrollHeight)}),[u]),(0,r.useEffect)((function(){o(t?null:n?(0,qe.jsx)("div",{className:"mx-auto flex h-full w-3/4 min-w-fit pt-8",children:(0,qe.jsx)(Uw,{welcome:!0})}):(0,qe.jsx)("div",{ref:s,className:"\n                 skyscroll\n                flex h-full flex-auto  flex-col  gap-2 overflow-y-scroll whitespace-pre-wrap bg-transparent pr-6 ",children:u.map((function(e){return(0,qe.jsx)(ab,{id:e.id,message:e.message})}))}))}),[t,n,u]),(0,qe.jsx)("section",{className:"pass-overflow h-full flex-auto bg-transparent/20 p-2 ",children:a})}function ub(){var e=(0,r.useContext)(bt),t=e.isPageLoading,n=e.isNewUser,i=e.mainChatId,a=(0,r.useRef)(),o=(0,r.useContext)(Gw).setMessageList,u=l((0,r.useState)(""),2),s=u[0],c=u[1],f={postAddMessage:function(e,t,n){var r={message:t,createdAt:Cr.firestore.Timestamp.now()};fetch("".concat(gt,"/messages/").concat(e,".json"),{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n&&n(e.name)}))},updateLocalMessages:function(e,t,n){fetch("".concat(gt,"/messages/").concat(e,"/").concat(t,".json")).then((function(e){return e.json()})).then((function(e){var r=yt({id:t},e);n&&n(r)}))}},h=f.postAddMessage,d=f.updateLocalMessages,v=xt();return(0,qe.jsx)("section",{className:"h-fit flex-none bg-transparent text-center ".concat((t||n)&&"pointer-events-none opacity-50"),children:(0,qe.jsxs)("form",{className:"relative h-fit h-full ",style:{lineHeight:0},children:[(0,qe.jsx)("textarea",{id:"entry",ref:a,maxLength:"2000",className:"skinnyscroll h-28  max-h-60 w-full resize-y border-0 bg-transparent/20 text-white placeholder-vincent-50/80 caret-white hover:bg-transparent/50 \n          ",placeholder:"+ message...",style:{minHeight:"60px"},value:s,onChange:function(e){c(e.target.value)},onKeyDown:function(e){13===e.key&&(e.preventDefault(),e.target.value+="\n")}}),(0,qe.jsx)(lt,{task:"messageSubmit",onClick:function(e){if(!t&&!n){e.preventDefault();var r=a.current.value.trim();""!==r?h(i,r,(function(e){d(i,e,(function(e){o((function(t){return t.concat(e)}))})),c(""),v.width>480&&a.current.focus()})):console.log("Empty message or white spaces only, not submitting.")}},addButtonClass:"h-6 w-6 absolute bottom-2 right-2"})]})})}function sb(e){var t=e.inputRef,n=e.title,i=e.confirmEdit,a=e.setShowEditMode,o=(0,r.useRef)();function u(e){o.current&&!o.current.contains(e.target)&&a(!1)}function s(e){"Escape"===e.key&&a(!1)}return(0,r.useEffect)((function(){return t.current.focus(),window.addEventListener("mousedown",u),window.addEventListener("keydown",s),function(){window.removeEventListener("mousedown",u),window.removeEventListener("keydown",s)}}),[]),(0,qe.jsxs)("div",{ref:o,className:"flex w-full flex-row justify-center gap-1 text-sm",children:[(0,qe.jsx)("input",{type:"text",ref:t,maxLength:"50",defaultValue:n||"",placeholder:"Enter your chat title",className:"h-7 w-full rounded-full border  border-vincent-700 bg-vincent-200/50 text-sm caret-vincent-800 text-vincent-800"}),(0,qe.jsx)("button",{className:"title-button",onClick:i,children:"Confirm"}),(0,qe.jsx)("button",{className:"title-button",onClick:function(){return a(!1)},children:"Cancel"})]})}function cb(e){var t=e.title,n=e.onTitleChange,i=e.showEditMode,a=e.setShowEditMode,o=(0,r.useRef)();return i?(0,qe.jsx)(sb,{inputRef:o,title:t,confirmEdit:function(){var e=o.current.value.trim().replace(/\s+/g," ");""===e&&e!==t||n(e),a(!1)},setShowEditMode:a}):(0,qe.jsx)("h1",{tabIndex:"0",className:"min-h-7",style:{lineHeight:"1.5rem"},children:t||"Untitled Chat"})}function lb(){var e=(0,r.useContext)(bt),t=e.isPageLoading,n=e.isNewUser,i=e.chatList,a=e.setChatList,o=e.mainChatId,u=e.updateMainChatId,s=e.findLastActiveId,c=l((0,r.useState)(""),2),f=c[0],h=c[1],d=l((0,r.useState)(""),2),v=d[0],p=d[1],m=l((0,r.useState)(!1),2),y=m[0],g=m[1],k=[{type:"edit",text:"Edit Title",icon:at,actionLayout:function(){return g(!0)},confirmationFunction:null},{type:"archive",text:"Archive Chat",icon:it,actionLayout:null,confirmationFunction:function(){var e=i.map((function(e){return e.id===o?yt(yt({},e),{},{archived:!0}):e}));a(e),u(s(e)),t=o,fetch("".concat(gt,"/chatMeta/").concat(t,".json"),{method:"PATCH",body:JSON.stringify({archived:!0}),headers:{"Content-Type":"application/json"}}).then((function(){console.log("Chat archived in the database")})).catch((function(e){console.error("Error archiving chat:",e)}));var t}}];return(0,r.useEffect)((function(){if(t)h("Loading Duck"),p("Quack quack quack");else if(n)h("Welcome to MyDuck"),p("Start a new chat!");else if(o){var e=i.find((function(e){return e.id===o}));h(e.title?e.title:null),p("Created: ".concat(function(e){var t=new Date(1e3*e.seconds).toDateString();return"".concat(t)}(e.createdAt)))}}),[t,n,i,o]),(0,qe.jsx)(rb,{menuItems:k,showEditMode:y,contextClass:"chat-menu",children:(0,qe.jsxs)("header",{tabIndex:"0",className:"blush-header relative h-fit min-h-16 px-2 ".concat((t||!n&&!o)&&"text-opacity-30"),children:[(0,qe.jsx)("div",{className:"flex flex-row justify-center gap-2 px-6 ",children:(0,qe.jsx)(cb,{title:f,onTitleChange:function(e){var t=i.map((function(t){return t.id===o?yt(yt({},t),{},{title:e}):t}));a(t),function(e,t){fetch("".concat(gt,"/chatMeta/").concat(e,".json"),{method:"PATCH",body:JSON.stringify({title:t}),headers:{"Content-Type":"application/json"}}).then((function(){console.log("Chat title updated in the database")})).catch((function(e){console.error("Error updating chat title:",e)}))}(o,e)},showEditMode:y,setShowEditMode:g})}),(0,qe.jsx)("div",{className:"flex flex-row justify-center gap-2 px-6",children:(0,qe.jsx)("div",{className:"tagline",children:v})})]})})}function fb(){return(0,qe.jsx)(Kw,{children:(0,qe.jsxs)("main",{className:"pass-overflow blush-frame flex flex-auto flex-col justify-between",children:[(0,qe.jsx)(lb,{}),(0,qe.jsx)(ob,{}),(0,qe.jsx)("hr",{className:"blush-separator"}),(0,qe.jsx)(ub,{})]})})}function hb(){var e=(0,r.useContext)(We),t=e.isFlapOpen,n=e.setIsFlapOpen;return(0,qe.jsx)(wt,{children:(0,qe.jsxs)("div",{className:"w-effective pass-overflow px-2  min-h-80",children:[(0,qe.jsxs)("div",{className:"pass-overflow relative xs:hidden ",children:[(0,qe.jsx)("div",{className:"smooth w-80 max-w-full  rounded transition \n            ".concat(t?"translate-x-0":"-translate-x-full","\n            absolute bottom-0 left-0 top-0 z-20"),children:(0,qe.jsx)(zw,{})}),(0,qe.jsx)("div",{className:"smooth fixed inset-0 z-10 bg-black transition-opacity  ".concat(t?"opacity-50":"invisible opacity-0"),onClick:function(){n(!1)}}),(0,qe.jsx)(fb,{})]}),(0,qe.jsxs)("div",{className:"pass-overflow relative hidden xs:block lg:hidden",children:[(0,qe.jsx)("div",{className:"smooth w-52 rounded pr-2 transition sm:w-60  md:w-64\n            ".concat(t?"translate-x-0":"-translate-x-full","\n            absolute bottom-0 left-0 top-0 z-20"),children:(0,qe.jsx)(zw,{})}),(0,qe.jsx)("div",{className:"pass-overflow smooth relative transition-all  ".concat(t?"ml-52 sm:ml-60 md:ml-64":"ml-0"),children:(0,qe.jsx)(fb,{})})]}),(0,qe.jsxs)("div",{className:"pass-overflow hidden flex-row gap-2 lg:flex",children:[(0,qe.jsx)("div",{className:"w-72 flex-none",children:(0,qe.jsx)(zw,{})}),(0,qe.jsx)("div",{className:"w-full flex-1",children:(0,qe.jsx)(fb,{})})]})]})})}function db(e){var t=l((0,r.useState)(!0),2),n=t[0],i=t[1],a=l((0,r.useState)(),2),o=a[0],u=a[1];function s(){i((function(e){return!e}))}(0,r.useEffect)((function(){e.expand&&i(!1)}),[]),(0,r.useEffect)((function(){u((function(e){return n?(0,qe.jsx)(qe.Fragment,{children:"\u25b8"}):(0,qe.jsx)(qe.Fragment,{children:"\u25be"})}))}),[n]);var c=e.noborder?"":"border",f="p-1  ".concat(c," ").concat(e.addClass);return e.collapse||e.expand?(e.expand,(0,qe.jsxs)("div",{className:f,children:[(0,qe.jsxs)("button",{onClick:s,className:"flex items-baseline space-x-2 rounded-r-full pr-2",children:[(0,qe.jsx)("h2",{className:"font-bold text-petal text-lg",children:e.title}),(0,qe.jsx)("p",{className:"titletext",children:o})]}),!n&&(0,qe.jsx)("div",{children:e.children})]})):(0,qe.jsxs)("div",{className:f,children:[(0,qe.jsx)("h2",{className:"font-bold text-petal text-lg",children:e.title}),e.children]})}var vb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAOwAAADsAEnxA+tAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADVBJREFUeJztnW2QHMV5x39Pz8zune5FEokQxkhC4oOjuLAh4aSThNBKCDsCkhAcUqFsV6qcSuGYF5eF+ZBUqCJOxYSEqrhIymAnldixnXKBbeIKsc2LEC9C0t2JFzt1yEhwd5KCLCGEdbqT7m53pp98WA5L4u50OzuzM7OaX9V90O72/3lW/d/u6Z6ebsjJycnJycnJycnJycnJyTlXkKQTyAKVnhUbxOcGDezlalmCZR5+UAQxqBocCRAqIlJWVw6LY/Zi2OVa9xuyZvu+pPOfidwAU6C7ftuzgbc5mPA/w7i9RH3rhBISkII5IQXnf8XlH9xVfT+IONW6yQ1wCpW+7jWM2/t13O/SSshKnwEpOmPS4jzmFud8Tq545u2o9cOQGwAo7+peKSf9f7cn/OVo/PHEESvt3pNup/yJXNpzOP6IM+SSZPCk0QOrWv19/k/siH8V2oCaPwNxTWA6vYfc7p7bGh58MoekAieNDmy4CrHfKO8+tjTpXEyr87Ztda8udvf8rOGxGx0waVQRHSx9HrFPAYlXPoAdC36d4fLLlZ4Vf9no2OdUC6AHVrXiF74L8nuTr5V3H0sypdMRMJ2F//LW9P5Bo0KeMy2ADpbm4RcfP7XyU4eCHS7fUHmu6xXVxtTNOWEA3bupE3QLsDbpXGaDHa181H++66VGxGp6A2j/TQXcse+B/FbSudSCHa18tLKt68m44zS9AZhz5JvANUmnEQZ7vLLR377iwThjNLUBdKh0K/DHSedRD8Fw5bN+b/fvxqXftKMAHSxdBuwAWmb6XKpGAdMgnpnw2ooXyuod70St3ZQtQPUKWr/GWSo/K2jFFv0g+GEc2k1pAAZLnwNZkXQaUWJHy1f6fSuvjVq36Qygg6V5CH+TdB6Ro6Angn+LWrbpDIByGzAv6TTiwJ70F/o7V34qSs2mMoAe+lgbwh1J5xEnOh7cG6WeG6VY4pws34ywIOk04sSO+RdNfP3S44xYP6TEOEiPit7Vsrn/9aYaBupQ6XmUK2spk4Vh4JmINehrE/XKjKKmq2m6AN23cRnKmqTzmOTYsLJnwHJsOIaFJoVIVNoR+5Xm6QJscD0pmNiaKMOjP5pg+y4fVRCBNV0uN15XwHOjSU99i8w16LCtV+qqpmkBQNcnnQHA9x6b4IU+/70VZqqwrdfnv5+oRBpHFniR6DSFAd69d74u6TyOvqPsfHHqa7PndlYoV6LrDrS1/tZEYKQpDMD+jRcD85NO4/iJ6ZvkIIBDb0V5PVC/lioHm8MAWvlQ0ikAXLjQwZnmaQIRmD83ulga2Prbb+G1JjGApMIAxQKUVk/dN69f49HRHuF/t4J01v3syssuVFfKMrjhGghWIrwN8qgsfeZQ/Vk2jAuSTmCS6zcWsFZ5dnuAVcVxYMOVBa69OpqLttNoNXAsCF1cRLZIdaVs8VHg46e8N47IPyGVe2XJtl/WnWjM6EDpnxFuDVM2romgEyfh6LGABecZWlviGZ3KqKAHymGL/6Kw6DcXGYKWv+b0ygdoQfUurPO6DpXu1L2bivWlGjOiHUmncCZtc2DxhU5slQ9AXT2Afkf+6JHAoPaT039IzkO5H3fsNR0ofapRS5VD0DwTWrVgQpsrUOy/ABiQD8yiwBKEbzFU2qUD69K3wFJlLOkUEiEIPRR8uOXOn++B6kCiFhtdjsgTOrju8XfX3KUDYSTpFBLBD2WACSW4Z/IfIZt0+Rjwkg6tf1j3bVwWTiNClDeTTiERxsIYQP5u8tcP9U0lCKo3Yf1+HVr/gO6/5sI6tOpE9icXOzl0tOYhYG9hRL986gtRXNS1oHo7QeUNHVr/dR24+iMRaNaGQ3/DYyaMOALlmlqAX1iXm+Se/tPGjVFe1beg+mdI8FMdXPeCDpVu1b1rG7M658jxPcB4Q2KlBVNT1Q2L4drWz/e/r6UUHSzFuTVGAPSh+iNEnucku+TDz4zGEUgHS1uBUq3lsrgiCEDUQX8+C88rR0Xs9YU7d++c6u24x88O0I1INwBzCHSwtAflVYS9qB4EDqHyS1xRIHxtWDsAUooi6UxwdFb9/0/V8IfFzbtfn+4DjZ5AcYDlCMuB6i0yqA5Ebb0NUeKLgRqGOIIemXEK2Ao86EnnXbJ5x4xzJOfmDFrmmb7/V3jBKF8ofLG/bzZKuQGyyOH3Nf9l4CcWvtJ6Z//WWqRyA2QM8Qx6ZMIHBhB6BLZ4tvI/8sU9oTaezA2QMUzRPOS0t9wht7wYySrT3AAZQorOuBPsul1uIexTQe8jN0CGkFb3S7I6usqHJlkWfi4gbe4Bb3VPpA+GQm6AbOCIZa73+3FI511ABjAdhfu8y3a8HIt2HKI50SEFZ9ydu/ieuPRzA6QcLQctlaODr8SlnxsgA+iov7yyrevZOLRzA2QEe7xylf/Cigei1s0NkCGCkcptld6u34lSMzdAlrAqetx+X3eu7IxKMjdAxtByMMf39dGo9HIDZBA7Wt5Q6V0VyYYYqZkI0nJQXUEYBwYwUl1JG/5xqvRggRPl7wKzeaprRhI3gB0u4x8eq+cxp5oQ1yCtDtLmYjqi2W4rCexYcEGwfdUtzuodX6tHJ9EuwI5U8A+ebFjlQ3WHLTtSITg0RuX1YXjTh4nGnxkYBXaifE+9GokaIHgr4aX8ChxXGPDhYFBtWjOEHQsu8Hd03ViPRnIGUK32+2lh2MJABU5mywW2Ut/O6AkaILHI01MB9gdwPDsm0DF/eT3zAvkw8EyUaneQFRMEKr7lL8IWzw0wFZMmGE9jM/V+tBzcHLZsboDpUODNIJ1d1ZlMBIvCbt+TG2AmygpH098VaKAm6F2xKUzZxhhAQccC7EgZO1Kp/o1Gu3lybLwdVC8O044vnw5TLPaZQB0P8A+eQCfS/0uaEgWOWViQ7sbSBv6lYcrF+60CxT+Q4cqf5JhN/bWABOHuC8RqgGC4jPoZr3yo7saV8hGBVjTUXEC8LUClCSp/kpMpN4BvHd1aaq+1XLwGkCa49TpJqC3ZGkxHeWGtReI1QN27maeIcJsyNhTfaroMIE66r5xrIgMGED84v9YyBqj7ALppcZqoC9AMfBen9hkLE+c+u1Jooj7ASX8LYH19q9YyBo3TAKZ5JpsjOvMvTjyvteZTXgxofCeCCJjWxJcdRkMh5QYQoG3h4VqLGUQGYkjnPaQthrNykiCCc/riRFxTkQ8/UvP5MQbLa3Ek9F6AjiYxwJy0G0BC7bJqQGM1gBSqy7AzTbsBL90GwDEHwhQzOOalqHM5E+e8dJ85dVbmpbzyAXHNrjDlDIu3vgrEekag6SggxYy2Ai0CHekfyli1/xqmnBFBgWeiTecMBJzzW2MNERsXpL/yxTPlwpq+We0NfCbVbyfyZKQZTRWo3cXMy9ijWL9mqqdzpp2C2XP2D01N9dsFzveB2I9ecxe2ZqcraDNwfjZydYryYNiyBkAueWoYkceiS2m6aIK7uA3xUv6rmiPwwWxUvnjGNyv7Hgpb/lc1Eeh/RJLRWRDX4C5pT+99gnYDi93M3MqWVmeHSPinGn9lgGULfgzxTgpNIp7BW9qO6UzRJJGRapO/yMnO4SMiqGu+UI/EewYQeSQAva/+rGYbWXA/2Ia7qK160yhJOgwsdaoXfRlC2tz+QnfPi/VonP6Nj45+GxisR7DmBNo9vGWduIvaMO1e43bwcAQzvwDLPLjISf/NnimQgvls3RpnvqCD624G+c96hUOjYMd8mAjQCYtajeBAKapbxLgGKQjS4iJFAyKZPTbOdHiveGv7Lq9XZ0rb6+C6LSAb6hXPAlk0gDhYb37nxbLiuVDz/6cydadn3T8nzqViOXVhOgtfjaLyYRoDyCVb9qB6dxQBcqLFzHH/z13Ve3tketO+s/TZ+4EfRhUop37EM77bXihFqTmtAURQPOdPQc/Jo9lTh4Dp8D4jV2x/I0rZGQe+ctGWoxh3E+g7UQbNqREBM7fwj253z7eilj7rzIcs2fIq6mwCTkQdPGd2mLnFH3irezfHoj2bD8myp3tBPkFugoZjOr0fe6t7PhGb/mw/KEu3Po7V9cCRuJLJOQUBZ27x296VfdfGGaamyW+55Nk+xK6jwdPF5xxG1Mxr+Vt3TU+obV9qClVrAbn4ud34rZeBPhxDPuc8UjATTqd3o7dq5181JF7YgqoIQ6U7gHuBjC74S9dUsLR7r3quu1ZW72jYqKvuW2C6b+MyAv8BhOuiSKjRpMEA4pmytLt3e6t6/77hsaMS0sHSDcCXgeVRaTaCRA3giDVt7mNui71ZrnjxZBIpRHoTXBXD4LrrELkb6IpSOy6SMIA4YmWO+7zrdHxSVj/9ZsMTODWXOERVEQY3rMXYT6PcBMyNI04UNNIAptU5RIv7HVf4knT3HG9Y4BmIfRmMDpZaEN2ElasRNpCyLiJOA4gjlqK73xTkaccp3Ccrt4Vevx8XDV8HpUNrP4C6HwH9DZAPgS4F5gPt7/5FdibebCjvGZ4XtqwgFkOAwRcx42p4RzzzBg4/A/cpr3v7E1HmmpOTk5OTk5OTk5OTk5OTk1MP/w+Jikah5alJxwAAAABJRU5ErkJggg==";function pb(){return(0,qe.jsxs)("div",{className:"flex flex-col gap-2  rounded-xl  px-4 pt-2 pb-2",children:[(0,qe.jsxs)("div",{className:"flex flex-row items-end justify-start gap-2",children:[(0,qe.jsx)("img",{className:"h-10 px-2",src:vb,alt:"rubber duck"}),(0,qe.jsxs)("div",{className:"",children:[(0,qe.jsx)("p",{className:"text-xs",children:"Developed by:"}),(0,qe.jsx)("p",{className:"titletext text-xl leading-none sm:text-left",children:"Codeyluwak"})]})]}),(0,qe.jsxs)("div",{children:[(0,qe.jsx)("p",{className:"text-sm sm:hidden",children:"Learning React, Tailwind, and Firebase on the path to master Next.js, with MyDuck as my first project."}),(0,qe.jsx)("p",{className:" hidden text-sm sm:block",children:"On my journey to master Next.js, I'm learning React, Tailwind, and Firebase. MyDuck, my first project, was inspired by the need for a rubber duck chat that allows me to keep track of conversations and take notes."})]})]})}var mb=n.p+"static/media/gogh-almond-blossom-1024.d067a4b0e46a54617bee.jpg";function yb(){return(0,qe.jsx)("div",{className:"pass-overflow w-full bg-transparent px-2",children:(0,qe.jsxs)("main",{className:"w-effective blush-frame pass-overflow flex h-full flex-col text-vincent-800",children:[(0,qe.jsxs)("header",{className:"blush-header",children:[(0,qe.jsx)("h1",{children:"Welcome to MyDuck"}),(0,qe.jsx)("p",{className:"tagline",children:"Brainstorm with your inner rubber duck"})]}),(0,qe.jsx)("section",{className:"pass-overflow flex-auto bg-transparent/20 p-2 text-petal",children:(0,qe.jsxs)("div",{className:"skyscroll flex h-full min-h-80 flex-auto  flex-col  gap-2 overflow-y-scroll whitespace-pre-wrap   bg-transparent pr-8 ",children:[(0,qe.jsx)(db,{title:"About",noborder:!0,children:(0,qe.jsx)("p",{children:"MyDuck is a single user chat app for talking to your inner rubber duck. Often we feel the need to talk to somebody else, and turn out that just able to articulate what we have in mind, we have it sorted. It also function as brainstorming note pad."})}),(0,qe.jsxs)(db,{title:"Versions",noborder:!0,children:[(0,qe.jsxs)("p",{children:[(0,qe.jsx)("span",{className:"font-bold",children:"v1.0.0"}),": First stable version."]}),(0,qe.jsxs)("p",{children:[(0,qe.jsx)("span",{className:"font-bold",children:"main-dev-1.1.0"}),": Current version under development. Sourced in v1.0.0"]})]}),(0,qe.jsxs)(db,{title:"Chat structure",noborder:!0,children:[(0,qe.jsx)("p",{children:"Chats are organized by user added titled chatrooms."}),(0,qe.jsx)("p",{children:"Future works: ability to classify chatrooms, edit chatroom title, and set up message scale prority."})]}),(0,qe.jsx)(db,{title:"Members and security",noborder:!0,children:(0,qe.jsxs)("p",{children:[" ","Urgent future work: Security, signup, password protected login."]})}),(0,qe.jsx)(db,{title:"Future API works",noborder:!0,children:(0,qe.jsx)("p",{children:"Interesting API works will be added soon. Maybe talking to yourself will be becoming more real!"})}),(0,qe.jsx)(db,{title:"Development tools and libraries",noborder:!0,children:(0,qe.jsx)("p",{children:"MyDuck is developed with React JS, Tailwind CSS, and Firebase Realtime Database. In the near future, MyDuck will adopt MERN."})}),(0,qe.jsx)(db,{title:"Members and security",noborder:!0,children:(0,qe.jsxs)("p",{children:[" ","Urgent future work: Security, signup, password protected login."]})}),(0,qe.jsx)(db,{title:"Future API works",noborder:!0,children:(0,qe.jsx)("p",{children:"Interesting API works will be added soon. Maybe talking to yourself will be becoming more real!"})}),(0,qe.jsx)(db,{title:"Development tools and libraries",noborder:!0,children:(0,qe.jsx)("p",{children:"MyDuck is developed with React JS, Tailwind CSS, and Firebase Realtime Database."})}),(0,qe.jsxs)(db,{title:"Theme",noborder:!0,addClass:"w-full",children:[(0,qe.jsx)("p",{children:"Van Gogh's Almond Blossoms, with a yellow rubber duck."}),(0,qe.jsxs)("div",{className:"flex-col-center mx-auto my-4 w-4/5 md:w-2/3 ",children:[(0,qe.jsx)("img",{className:"w-full mb-2 max-w-md flex-shrink rounded border-2 border-petal/50",src:mb,alt:"Gogh's Almond Blossom"}),(0,qe.jsx)("div",{className:"max-w-full text-sm",children:"Almond Blossom by Vincent van Gogh"}),(0,qe.jsxs)("div",{className:"text-xs",children:["Public domain, via"," ",(0,qe.jsx)("a",{href:"https://commons.wikimedia.org/wiki/File:Vincent_van_Gogh_-_Almond_blossom_-_Google_Art_Project.jpg",children:"Wikimedia Commons"})]})]})]})]})}),(0,qe.jsx)("hr",{className:"blush-separator"}),(0,qe.jsx)("section",{className:"border-none bg-transparent/20 text-petal",children:(0,qe.jsx)(pb,{})})]})})}var gb=function(e,t){switch(t.type){case"decrement":return yt(yt({},e),{},{count:e.count-1});case"increment":return yt(yt({},e),{},{count:e.count+1});case"toggleColor":return yt(yt({},e),{},{color:!e.color});case"updateInput":return yt(yt({},e),{},{input:t.payload});default:throw new Error}},kb={INCREMENT:"increment",DECREMENT:"decrement",TOGGLE_COLOR:"toggleColor",UPDATE_INPUT:"updateInput"};function wb(){var e=l((0,r.useReducer)(gb,{count:0,color:!1,input:""}),2),t=e[0],n=e[1];return(0,qe.jsxs)("div",{className:"flex-col-center",children:[(0,qe.jsx)("h2",{children:"useReducer"}),(0,qe.jsxs)("div",{className:"sandbox  gap-2 ".concat(t.color?"bg-blossom-800/50":"bg-transparent"),children:[(0,qe.jsx)("input",{type:"text",className:"sandbox-input",placeholder:"try me",value:t.input,onChange:function(e){return n({type:kb.UPDATE_INPUT,payload:e.target.value})}}),(0,qe.jsx)("p",{children:t.count}),(0,qe.jsxs)("section",{className:"flex flex-row gap-2",children:[(0,qe.jsx)("button",{onClick:function(){return n({type:kb.DECREMENT})},className:"sandbox-button",children:"-"}),(0,qe.jsx)("button",{onClick:function(){return n({type:kb.INCREMENT})},className:"sandbox-button",children:"+"}),(0,qe.jsx)("button",{onClick:function(){return n({type:kb.TOGGLE_COLOR})},className:"sandbox-button",children:"color"})]}),(0,qe.jsx)("p",{className:"sandbox-display",children:t.input})]})]})}function bb(){var e=l((0,r.useState)(""),2),t=e[0],n=e[1],i=l((0,r.useState)(0),2),a=i[0],o=i[1],u=l((0,r.useState)(!1),2),s=u[0],c=u[1];return(0,qe.jsxs)("div",{className:"flex-col-center",children:[(0,qe.jsx)("h2",{children:"useState"}),(0,qe.jsxs)("div",{className:"sandbox ".concat(s?"bg-blossom-800/50":"bg-transparent"," \n   gap-2\n    \n    "),children:[(0,qe.jsx)("input",{type:"text",value:t,placeholder:"try me",onChange:function(e){return n(e.target.value)},className:"sandbox-input"}),(0,qe.jsx)("p",{children:a}),(0,qe.jsxs)("section",{className:"flex flex-row gap-2",children:[(0,qe.jsx)("button",{onClick:function(){return o((function(e){return e-1}))},className:"sandbox-button",children:"-"}),(0,qe.jsx)("button",{onClick:function(){return o((function(e){return e+1}))},className:"sandbox-button",children:"+"}),(0,qe.jsx)("button",{onClick:function(){console.log("color button clicked"),c((function(e){return!e}))},className:"sandbox-button",children:"color"})]}),(0,qe.jsx)("p",{className:"sandbox-display",children:t})]})]})}function xb(){var e=l((0,r.useState)([1,2,3]),2),t=e[0],n=e[1],i=l((0,r.useState)(),2);i[0],i[1];return console.log("++++++++++++++++Rendering start+++++++++++++"),console.log(t),(0,qe.jsxs)("div",{className:"flex-col-center",children:[(0,qe.jsx)("h2",{children:"useState Timing"}),(0,qe.jsxs)("div",{className:"sandbox",children:[(0,qe.jsx)("div",{className:"sandbox-display",children:t.join(", ")}),(0,qe.jsx)("button",{onClick:function(){var e;e=0,n((function(t){return[e].concat(h(t))})),function(e){n((function(t){return[].concat(h(t),[e])}))}(0)},className:"sandbox-button",children:"Add 0 in the beginning and end"})]})]})}function Eb(){return(0,qe.jsx)("div",{className:"pass-overflow w-full px-2",children:(0,qe.jsxs)("main",{className:"w-effective blush-frame pass-overflow flex h-full flex-col text-vincent-800",children:[(0,qe.jsxs)("header",{className:"blush-header",children:[(0,qe.jsx)("h1",{children:"Sandbox"}),(0,qe.jsx)("p",{className:"tagline",children:"Come and play, ducks!"})]}),(0,qe.jsx)("section",{className:"pass-overflow flex flex-auto flex-col  gap-2 bg-transparent/20 p-2 text-petal",children:(0,qe.jsxs)("div",{className:"flex-col-center gap-8",children:[(0,qe.jsx)(xb,{}),(0,qe.jsx)(wb,{}),(0,qe.jsx)(bb,{})]})})]})})}function Sb(){var e=function(e){var t=l((0,r.useState)(e),2),n=t[0],i=t[1];return[n,function(e){i((function(t){return"boolean"===typeof e?e:!t}))}]}(!1),t=l(e,2),n=t[0],i=t[1];return(0,qe.jsxs)("div",{className:"flex-col-center",children:[(0,qe.jsx)("h2",{children:"useToggle"}),(0,qe.jsxs)("div",{className:"sandbox",children:[(0,qe.jsx)("div",{className:"sandbox-display",children:"".concat(n.toString()[0].toUpperCase()).concat(n.toString().slice(1))}),(0,qe.jsx)("div",{children:"3 modes:"}),(0,qe.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,qe.jsx)("button",{className:"sandbox-button",onClick:function(){return i(!0)},children:"True"}),(0,qe.jsx)("button",{className:"sandbox-button",onClick:i,children:"Toggle"}),(0,qe.jsx)("button",{className:"sandbox-button",onClick:function(){return i(!1)},children:"False"})]})]})]})}function Ib(){var e=xt();return(0,qe.jsxs)("div",{className:"flex-col-center",children:[(0,qe.jsx)("h2",{children:"useWindowSize"}),(0,qe.jsxs)("div",{className:"sandbox",children:[(0,qe.jsx)("p",{children:"Window's inner width and height"}),(0,qe.jsxs)("p",{children:["Width: ",(0,qe.jsx)("span",{className:"sandbox-display px-2 py-0 rounded-full ",children:e.width})," px"]}),(0,qe.jsxs)("p",{children:["Height: ",(0,qe.jsx)("span",{className:"sandbox-display px-2 py-0 rounded-full ",children:e.height})," px"]})]})]})}function Tb(){var e=l((0,r.useState)(""),2),t=e[0],n=e[1],i=l((0,r.useState)(""),2),a=i[0],o=i[1],u=l((0,r.useState)(0),2),s=u[0],c=u[1];return function(e,t){var n=(0,r.useRef)(!0);(0,r.useEffect)((function(){if(!n.current)return e();n.current=!1}),t)}((function(){n("Welcome! You are guest number ".concat(s))}),[s]),(0,r.useEffect)((function(){o("Welcome! You are guest number ".concat(s))}),[s]),(0,qe.jsxs)("div",{className:"flex-col-center",children:[(0,qe.jsx)("h2",{children:"useUpdateEffect"}),(0,qe.jsxs)("div",{className:"sandbox",children:[(0,qe.jsx)("div",{children:"Below should only display upon click:"}),(0,qe.jsx)("div",{className:"sandbox-display",children:t}),(0,qe.jsx)("button",{className:"sandbox-button",onClick:function(){c((function(e){return e+1}))},children:"Get your number"}),(0,qe.jsx)("div",{className:"pt-2",children:"Note: Refresh page for seeing the effect. Using regular useEffect hook, it will also run the first time page get rendered, like below:"}),(0,qe.jsx)("div",{className:"sandbox-display",children:a})]})]})}var Cb=(0,r.createContext)({MockArray:[]});function _b(e){var t=l((0,r.useState)([]),2),n={mockArray:t[0],setMockArray:t[1]};return(0,qe.jsx)(Cb.Provider,{value:n,children:e.children})}function Ab(){var e,t=(0,r.useContext)(Cb),n=t.mockArray,i=t.setMockArray,a=(e=i,{addItem:function(t){e((function(e){return[].concat(h(e),[t])}))},editItem:function(t,n,r){e((function(e){return e.map((function(e){return e.id===t?yt(yt({},e),{},pt({},n,r)):e}))}))},toggleArchived:function(t){e((function(e){return e.map((function(e){return e.id===t?yt(yt({},e),{},{archived:!e.archived}):e}))}))}}),o=a.addItem,u=(0,r.useRef)();return(0,qe.jsxs)("div",{className:"flex-col-center",children:[(0,qe.jsx)("h2",{children:"useArray"}),(0,qe.jsxs)("div",{className:"sandbox",children:[(0,qe.jsx)("div",{className:"font-bold ",children:"Student List"}),(0,qe.jsx)("ul",{className:"w-full space-y-1",children:n.length?n.map((function(e){return(0,qe.jsx)("li",{className:"sandbox-display w-full ",children:e.name})})):(0,qe.jsx)("li",{className:"sandbox-display w-full text-petal/50",children:"Waiting for first student"})}),(0,qe.jsx)("div",{className:"mt-4 font-bold",children:"New Student Form"}),(0,qe.jsxs)("form",{className:"flex flex-row",onSubmit:function(e){e.preventDefault(),o({id:Date.now(),name:u.current.value,archived:!1}),u.current.value="",u.current.focus()},children:[(0,qe.jsx)("input",{type:"text",placeholder:"Student name...",className:"sandbox-input",ref:u}),(0,qe.jsx)("button",{type:"submit",className:"sandbox-button",children:"Submit"})]})]})]})}function Nb(){return(0,qe.jsx)(_b,{children:(0,qe.jsx)("div",{className:"pass-overflow w-full px-2",children:(0,qe.jsxs)("main",{className:"w-effective blush-frame pass-overflow flex h-full flex-col text-vincent-800",children:[(0,qe.jsxs)("header",{className:"blush-header",children:[(0,qe.jsx)("h1",{children:"Universal Custom Hooks"}),(0,qe.jsx)("p",{className:"tagline",children:"Hooks: the feather in every duck's cap."})]}),(0,qe.jsx)("section",{className:"pass-overflow flex flex-auto flex-col  gap-2 bg-transparent/20 p-2 text-petal",children:(0,qe.jsxs)("div",{className:"flex-col-center gap-8",children:[(0,qe.jsx)(Ab,{}),(0,qe.jsx)(Tb,{}),(0,qe.jsx)(Sb,{}),(0,qe.jsx)(Ib,{})]})})]})})})}var Db=[{name:"MyDuck",path:"/myduck",element:(0,qe.jsx)(hb,{}),exact:!0},{name:"About",path:"/myduck/about",element:(0,qe.jsx)(yb,{}),exact:!1},{name:"Sandbox",path:"/myduck/sandbox",element:(0,qe.jsx)(Eb,{}),exact:!1},{name:"customHooks",path:"/myduck/customHooks",element:(0,qe.jsx)(Nb,{}),exact:!1}];function Lb(){return(0,qe.jsx)(vt,{children:(0,qe.jsx)(je,{children:Db.map((function(e){return(0,qe.jsx)(Pe,{path:e.path,exact:e.exact,element:e.element},e.name)}))})})}a.createRoot(document.getElementById("root")).render((0,qe.jsx)(Be,{children:(0,qe.jsx)(Lb,{})}))}()}();
//# sourceMappingURL=main.377c627a.js.map